{"file_contents":{"client/src/components/ui/label.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","path":null,"size_bytes":724,"size_tokens":null},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","path":null,"size_bytes":4845,"size_tokens":null},"script/build.ts":{"content":"import { build as esbuild } from \"esbuild\";\nimport { build as viteBuild } from \"vite\";\nimport { rm, readFile } from \"fs/promises\";\n\n// server deps to bundle to reduce openat(2) syscalls\n// which helps cold start times\nconst allowlist = [\n  \"@google/generative-ai\",\n  \"@neondatabase/serverless\",\n  \"axios\",\n  \"connect-pg-simple\",\n  \"cors\",\n  \"date-fns\",\n  \"drizzle-orm\",\n  \"drizzle-zod\",\n  \"express\",\n  \"express-rate-limit\",\n  \"express-session\",\n  \"jsonwebtoken\",\n  \"memorystore\",\n  \"multer\",\n  \"nanoid\",\n  \"nodemailer\",\n  \"openai\",\n  \"passport\",\n  \"passport-local\",\n  \"stripe\",\n  \"uuid\",\n  \"ws\",\n  \"xlsx\",\n  \"zod\",\n  \"zod-validation-error\",\n];\n\nasync function buildAll() {\n  await rm(\"dist\", { recursive: true, force: true });\n\n  console.log(\"building client...\");\n  await viteBuild();\n\n  console.log(\"building server...\");\n  const pkg = JSON.parse(await readFile(\"package.json\", \"utf-8\"));\n  const allDeps = [\n    ...Object.keys(pkg.dependencies || {}),\n    ...Object.keys(pkg.devDependencies || {}),\n  ];\n  const externals = allDeps.filter((dep) => !allowlist.includes(dep));\n\n  await esbuild({\n    entryPoints: [\"server/index.ts\"],\n    platform: \"node\",\n    bundle: true,\n    format: \"cjs\",\n    outfile: \"dist/index.cjs\",\n    define: {\n      \"process.env.NODE_ENV\": '\"production\"',\n    },\n    minify: true,\n    external: externals,\n    logLevel: \"info\",\n  });\n}\n\nbuildAll().catch((err) => {\n  console.error(err);\n  process.exit(1);\n});\n","path":null,"size_bytes":1439,"size_tokens":null},"server/static.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(__dirname, \"public\");\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","path":null,"size_bytes":547,"size_tokens":null},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","path":null,"size_bytes":2712,"size_tokens":null},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","path":null,"size_bytes":1642,"size_tokens":null},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n      {children}\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","path":null,"size_bytes":4280,"size_tokens":null},"client/src/pages/Markets.tsx":{"content":"import { Navbar } from \"@/components/layout/Navbar\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useState, useMemo, useEffect } from \"react\";\nimport { Search, Filter, Loader2, TrendingUp, Clock } from \"lucide-react\";\nimport { Link } from \"wouter\";\nimport { formatDistanceToNow } from \"date-fns\";\nimport { getAllMarkets, Market, MarketStatus, formatUsdc, categoryToString, CATEGORY_NAMES } from \"@/lib/contract\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\n\nfunction MarketCard({ market }: { market: Market }) {\n  const total = market.yesPool + market.noPool;\n  const yesPrice = total > BigInt(0) ? Number((market.noPool * BigInt(10000)) / total) / 100 : 50;\n  const noPrice = 100 - yesPrice;\n  const volume = formatUsdc(market.totalVolume);\n  const isOpen = market.status === MarketStatus.OPEN;\n  const deadline = new Date(Number(market.deadline) * 1000);\n  const isExpired = deadline < new Date();\n\n  return (\n    <Link href={`/event/${market.id}`}>\n      <Card className=\"bg-card/50 backdrop-blur-sm border-border/50 hover:border-primary/50 transition-all cursor-pointer group h-full\" data-testid={`card-market-${market.id}`}>\n        <CardContent className=\"p-5 flex flex-col h-full\">\n          <div className=\"flex gap-2 mb-3\">\n            <Badge className=\"bg-primary/20 text-primary border-primary/30 text-xs\">\n              {categoryToString(market.category)}\n            </Badge>\n            {!isOpen && (\n              <Badge variant=\"outline\" className=\"text-xs\">\n                {market.status === MarketStatus.RESOLVED ? \"Resolved\" : \n                 market.status === MarketStatus.PENDING_RESOLUTION ? \"Pending\" : \"Voided\"}\n              </Badge>\n            )}\n          </div>\n          \n          <h3 className=\"font-semibold text-base leading-tight mb-4 group-hover:text-primary transition-colors line-clamp-2 flex-grow\">\n            {market.question}\n          </h3>\n          \n          <div className=\"space-y-3 mt-auto\">\n            <div className=\"flex justify-between items-center\">\n              <div className=\"flex items-center gap-2\">\n                <div className=\"w-2 h-2 rounded-full bg-monad-green animate-pulse\"></div>\n                <span className=\"text-2xl font-bold text-monad-green\">{yesPrice.toFixed(0)}%</span>\n                <span className=\"text-xs text-muted-foreground\">YES</span>\n              </div>\n              <div className=\"text-right\">\n                <span className=\"text-lg font-bold text-monad-pink\">{noPrice.toFixed(0)}%</span>\n                <span className=\"text-xs text-muted-foreground ml-1\">NO</span>\n              </div>\n            </div>\n            \n            <div className=\"h-2 bg-secondary/50 rounded-full overflow-hidden\">\n              <div \n                className=\"h-full bg-gradient-to-r from-monad-green to-monad-green/70 rounded-full transition-all\"\n                style={{ width: `${yesPrice}%` }}\n              />\n            </div>\n            \n            <div className=\"flex justify-between text-xs text-muted-foreground pt-1\">\n              <div className=\"flex items-center gap-1\">\n                <TrendingUp className=\"h-3 w-3\" />\n                <span>${parseFloat(volume).toLocaleString()} vol</span>\n              </div>\n              <div className=\"flex items-center gap-1\">\n                <Clock className=\"h-3 w-3\" />\n                <span>{isExpired ? \"Expired\" : formatDistanceToNow(deadline, { addSuffix: true })}</span>\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </Link>\n  );\n}\n\nexport default function Markets() {\n  const [activeCategory, setActiveCategory] = useState(\"All\");\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [markets, setMarkets] = useState<Market[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  const loadMarkets = async () => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      const data = await getAllMarkets();\n      setMarkets(data);\n    } catch (e: any) {\n      setError(e.message || \"Failed to load markets\");\n    }\n    setIsLoading(false);\n  };\n\n  useEffect(() => {\n    loadMarkets();\n    const interval = setInterval(loadMarkets, 15000);\n    return () => clearInterval(interval);\n  }, []);\n\n  const categories = [\"All\", ...CATEGORY_NAMES];\n\n  const filteredMarkets = useMemo(() => {\n    return markets.filter((m) => {\n      const matchesSearch = m.question.toLowerCase().includes(searchQuery.toLowerCase());\n      const matchesCategory = activeCategory === \"All\" || categoryToString(m.category) === activeCategory;\n      return matchesSearch && matchesCategory;\n    });\n  }, [markets, searchQuery, activeCategory]);\n\n  return (\n    <div className=\"min-h-screen bg-background bg-grid-pattern font-sans selection:bg-primary/30\">\n      <Navbar />\n      \n      <main className=\"container mx-auto px-4 py-8 space-y-8\">\n        <div className=\"flex flex-col space-y-4\">\n          <h1 className=\"text-3xl font-bold tracking-tight\" data-testid=\"text-markets-title\">Explore Markets</h1>\n          <p className=\"text-muted-foreground max-w-2xl\">\n            Browse and trade on fully on-chain prediction markets. All trades happen directly on Monad.\n          </p>\n        </div>\n\n        <div className=\"flex flex-col md:flex-row gap-4 items-center justify-between sticky top-16 z-40 bg-background/95 backdrop-blur-xl p-4 rounded-xl border border-border/50 shadow-sm\">\n          <div className=\"relative w-full md:w-96\">\n            <Search className=\"absolute left-3 top-2.5 h-4 w-4 text-muted-foreground\" />\n            <Input \n              placeholder=\"Search markets...\" \n              className=\"pl-9 bg-secondary/30\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              data-testid=\"input-search\"\n            />\n          </div>\n\n          <div className=\"flex gap-2 w-full md:w-auto overflow-x-auto pb-2 md:pb-0 no-scrollbar items-center\">\n            <Filter className=\"h-4 w-4 text-muted-foreground mr-2 shrink-0\" />\n            {categories.map((cat) => (\n              <Button\n                key={cat}\n                variant={activeCategory === cat ? \"default\" : \"outline\"}\n                size=\"sm\"\n                onClick={() => setActiveCategory(cat)}\n                data-testid={`button-category-${cat.toLowerCase()}`}\n                className={`rounded-full whitespace-nowrap ${activeCategory === cat \n                  ? \"bg-foreground text-background hover:bg-foreground/90\" \n                  : \"bg-transparent border-border text-muted-foreground hover:text-foreground\"}`}\n              >\n                {cat}\n              </Button>\n            ))}\n            <div className=\"w-[1px] h-6 bg-border/50 mx-2 hidden md:block\"></div>\n            <Select defaultValue=\"volume\">\n              <SelectTrigger className=\"w-[140px] h-9 rounded-full bg-transparent border-border hidden md:flex\" data-testid=\"select-sort\">\n                <SelectValue placeholder=\"Sort by\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"volume\">High Volume</SelectItem>\n                <SelectItem value=\"newest\">Newest</SelectItem>\n                <SelectItem value=\"ending\">Ending Soon</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n        </div>\n\n        {isLoading ? (\n          <div className=\"flex items-center justify-center py-20\">\n            <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n          </div>\n        ) : error ? (\n          <div className=\"col-span-full flex flex-col items-center justify-center py-20 text-muted-foreground\">\n            <p>Failed to load markets. Please try again.</p>\n            <Button variant=\"link\" onClick={loadMarkets}>Retry</Button>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 min-h-[500px]\">\n            {filteredMarkets.length > 0 ? (\n              filteredMarkets.map((market) => (\n                <MarketCard key={Number(market.id)} market={market} />\n              ))\n            ) : (\n              <div className=\"col-span-full flex flex-col items-center justify-center py-20 text-muted-foreground\">\n                <Search className=\"h-12 w-12 mb-4 opacity-20\" />\n                <p>No markets found. Create the first one!</p>\n                <Link href=\"/create\">\n                  <Button variant=\"link\" data-testid=\"button-create-market\">Create Market</Button>\n                </Link>\n              </div>\n            )}\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}\n","path":null,"size_bytes":8882,"size_tokens":null},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","path":null,"size_bytes":4419,"size_tokens":null},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","path":null,"size_bytes":3895,"size_tokens":null},"client/src/components/ui/field.tsx":{"content":"\"use client\"\n\nimport { useMemo } from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\nimport { Separator } from \"@/components/ui/separator\"\n\nfunction FieldSet({ className, ...props }: React.ComponentProps<\"fieldset\">) {\n  return (\n    <fieldset\n      data-slot=\"field-set\"\n      className={cn(\n        \"flex flex-col gap-6\",\n        \"has-[>[data-slot=checkbox-group]]:gap-3 has-[>[data-slot=radio-group]]:gap-3\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldLegend({\n  className,\n  variant = \"legend\",\n  ...props\n}: React.ComponentProps<\"legend\"> & { variant?: \"legend\" | \"label\" }) {\n  return (\n    <legend\n      data-slot=\"field-legend\"\n      data-variant={variant}\n      className={cn(\n        \"mb-3 font-medium\",\n        \"data-[variant=legend]:text-base\",\n        \"data-[variant=label]:text-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"field-group\"\n      className={cn(\n        \"group/field-group @container/field-group flex w-full flex-col gap-7 data-[slot=checkbox-group]:gap-3 [&>[data-slot=field-group]]:gap-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nconst fieldVariants = cva(\n  \"group/field data-[invalid=true]:text-destructive flex w-full gap-3\",\n  {\n    variants: {\n      orientation: {\n        vertical: [\"flex-col [&>*]:w-full [&>.sr-only]:w-auto\"],\n        horizontal: [\n          \"flex-row items-center\",\n          \"[&>[data-slot=field-label]]:flex-auto\",\n          \"has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px has-[>[data-slot=field-content]]:items-start\",\n        ],\n        responsive: [\n          \"@md/field-group:flex-row @md/field-group:items-center @md/field-group:[&>*]:w-auto flex-col [&>*]:w-full [&>.sr-only]:w-auto\",\n          \"@md/field-group:[&>[data-slot=field-label]]:flex-auto\",\n          \"@md/field-group:has-[>[data-slot=field-content]]:items-start @md/field-group:has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px\",\n        ],\n      },\n    },\n    defaultVariants: {\n      orientation: \"vertical\",\n    },\n  }\n)\n\nfunction Field({\n  className,\n  orientation = \"vertical\",\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof fieldVariants>) {\n  return (\n    <div\n      role=\"group\"\n      data-slot=\"field\"\n      data-orientation={orientation}\n      className={cn(fieldVariants({ orientation }), className)}\n      {...props}\n    />\n  )\n}\n\nfunction FieldContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"field-content\"\n      className={cn(\n        \"group/field-content flex flex-1 flex-col gap-1.5 leading-snug\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof Label>) {\n  return (\n    <Label\n      data-slot=\"field-label\"\n      className={cn(\n        \"group/field-label peer/field-label flex w-fit gap-2 leading-snug group-data-[disabled=true]/field:opacity-50\",\n        \"has-[>[data-slot=field]]:w-full has-[>[data-slot=field]]:flex-col has-[>[data-slot=field]]:rounded-md has-[>[data-slot=field]]:border [&>[data-slot=field]]:p-4\",\n        \"has-data-[state=checked]:bg-primary/5 has-data-[state=checked]:border-primary dark:has-data-[state=checked]:bg-primary/10\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"field-label\"\n      className={cn(\n        \"flex w-fit items-center gap-2 text-sm font-medium leading-snug group-data-[disabled=true]/field:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldDescription({ className, ...props }: React.ComponentProps<\"p\">) {\n  return (\n    <p\n      data-slot=\"field-description\"\n      className={cn(\n        \"text-muted-foreground text-sm font-normal leading-normal group-has-[[data-orientation=horizontal]]/field:text-balance\",\n        \"nth-last-2:-mt-1 last:mt-0 [[data-variant=legend]+&]:-mt-1.5\",\n        \"[&>a:hover]:text-primary [&>a]:underline [&>a]:underline-offset-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldSeparator({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  children?: React.ReactNode\n}) {\n  return (\n    <div\n      data-slot=\"field-separator\"\n      data-content={!!children}\n      className={cn(\n        \"relative -my-2 h-5 text-sm group-data-[variant=outline]/field-group:-mb-2\",\n        className\n      )}\n      {...props}\n    >\n      <Separator className=\"absolute inset-0 top-1/2\" />\n      {children && (\n        <span\n          className=\"bg-background text-muted-foreground relative mx-auto block w-fit px-2\"\n          data-slot=\"field-separator-content\"\n        >\n          {children}\n        </span>\n      )}\n    </div>\n  )\n}\n\nfunction FieldError({\n  className,\n  children,\n  errors,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  errors?: Array<{ message?: string } | undefined>\n}) {\n  const content = useMemo(() => {\n    if (children) {\n      return children\n    }\n\n    if (!errors) {\n      return null\n    }\n\n    if (errors?.length === 1 && errors[0]?.message) {\n      return errors[0].message\n    }\n\n    return (\n      <ul className=\"ml-4 flex list-disc flex-col gap-1\">\n        {errors.map(\n          (error, index) =>\n            error?.message && <li key={index}>{error.message}</li>\n        )}\n      </ul>\n    )\n  }, [children, errors])\n\n  if (!content) {\n    return null\n  }\n\n  return (\n    <div\n      role=\"alert\"\n      data-slot=\"field-error\"\n      className={cn(\"text-destructive text-sm font-normal\", className)}\n      {...props}\n    >\n      {content}\n    </div>\n  )\n}\n\nexport {\n  Field,\n  FieldLabel,\n  FieldDescription,\n  FieldError,\n  FieldGroup,\n  FieldLegend,\n  FieldSeparator,\n  FieldSet,\n  FieldContent,\n  FieldTitle,\n}\n","path":null,"size_bytes":6044,"size_tokens":null},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","path":null,"size_bytes":1037,"size_tokens":null},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","path":null,"size_bytes":565,"size_tokens":null},"server/db.ts":{"content":"import { Pool, neonConfig } from \"@neondatabase/serverless\";\nimport { drizzle } from \"drizzle-orm/neon-serverless\";\nimport ws from \"ws\";\nimport * as schema from \"@shared/schema\";\n\nneonConfig.webSocketConstructor = ws;\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL must be set. Did you forget to provision a database?\");\n}\n\nexport const pool = new Pool({ connectionString: process.env.DATABASE_URL });\nexport const db = drizzle({ client: pool, schema });\n","path":null,"size_bytes":474,"size_tokens":null},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // @replit\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \",\n  {\n    variants: {\n      variant: {\n        default:\n          // @replit shadow-xs instead of shadow, no hover because we use hover-elevate\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary:\n          // @replit no hover because we use hover-elevate\n          \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          // @replit shadow-xs instead of shadow, no hover because we use hover-elevate\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n          // @replit shadow-xs\" - use badge outline variable\n        outline: \"text-foreground border [border-color:var(--badge-outline)]\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","path":null,"size_bytes":1522,"size_tokens":null},"vite-plugin-meta-images.ts":{"content":"import type { Plugin } from 'vite';\nimport fs from 'fs';\nimport path from 'path';\n\n/**\n * Vite plugin that updates og:image and twitter:image meta tags\n * to point to the app's opengraph image with the correct Replit domain.\n */\nexport function metaImagesPlugin(): Plugin {\n  return {\n    name: 'vite-plugin-meta-images',\n    transformIndexHtml(html) {\n      const baseUrl = getDeploymentUrl();\n      if (!baseUrl) {\n        log('[meta-images] no Replit deployment domain found, skipping meta tag updates');\n        return html;\n      }\n\n      // Check if opengraph image exists in public directory\n      const publicDir = path.resolve(process.cwd(), 'client', 'public');\n      const opengraphPngPath = path.join(publicDir, 'opengraph.png');\n      const opengraphJpgPath = path.join(publicDir, 'opengraph.jpg');\n      const opengraphJpegPath = path.join(publicDir, 'opengraph.jpeg');\n\n      let imageExt: string | null = null;\n      if (fs.existsSync(opengraphPngPath)) {\n        imageExt = 'png';\n      } else if (fs.existsSync(opengraphJpgPath)) {\n        imageExt = 'jpg';\n      } else if (fs.existsSync(opengraphJpegPath)) {\n        imageExt = 'jpeg';\n      }\n\n      if (!imageExt) {\n        log('[meta-images] OpenGraph image not found, skipping meta tag updates');\n        return html;\n      }\n\n      const imageUrl = `${baseUrl}/opengraph.${imageExt}`;\n\n      log('[meta-images] updating meta image tags to:', imageUrl);\n\n      html = html.replace(\n        /<meta\\s+property=\"og:image\"\\s+content=\"[^\"]*\"\\s*\\/>/g,\n        `<meta property=\"og:image\" content=\"${imageUrl}\" />`\n      );\n\n      html = html.replace(\n        /<meta\\s+name=\"twitter:image\"\\s+content=\"[^\"]*\"\\s*\\/>/g,\n        `<meta name=\"twitter:image\" content=\"${imageUrl}\" />`\n      );\n\n      return html;\n    },\n  };\n}\n\nfunction getDeploymentUrl(): string | null {\n  if (process.env.REPLIT_INTERNAL_APP_DOMAIN) {\n    const url = `https://${process.env.REPLIT_INTERNAL_APP_DOMAIN}`;\n    log('[meta-images] using internal app domain:', url);\n    return url;\n  }\n\n  if (process.env.REPLIT_DEV_DOMAIN) {\n    const url = `https://${process.env.REPLIT_DEV_DOMAIN}`;\n    log('[meta-images] using dev domain:', url);\n    return url;\n  }\n\n  return null;\n}\n\nfunction log(...args: any[]): void {\n  if (process.env.NODE_ENV === 'production') {\n    console.log(...args);\n  }\n}\n","path":null,"size_bytes":2333,"size_tokens":null},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","path":null,"size_bytes":1877,"size_tokens":null},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { serveStatic } from \"./static\";\nimport { createServer } from \"http\";\n\nconst app = express();\nconst httpServer = createServer(app);\n\ndeclare module \"http\" {\n  interface IncomingMessage {\n    rawBody: unknown;\n  }\n}\n\napp.use(\n  express.json({\n    verify: (req, _res, buf) => {\n      req.rawBody = buf;\n    },\n  }),\n);\n\napp.use(express.urlencoded({ extended: false }));\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  await registerRoutes(httpServer, app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (process.env.NODE_ENV === \"production\") {\n    serveStatic(app);\n  } else {\n    const { setupVite } = await import(\"./vite\");\n    await setupVite(httpServer, app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || \"5000\", 10);\n  httpServer.listen(\n    {\n      port,\n      host: \"0.0.0.0\",\n      reusePort: true,\n    },\n    () => {\n      log(`serving on port ${port}`);\n    },\n  );\n})();\n","path":null,"size_bytes":2560,"size_tokens":null},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { Toaster as SonnerToaster } from \"sonner\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { RainbowKitProvider, darkTheme } from \"@rainbow-me/rainbowkit\";\nimport { WagmiProvider } from \"wagmi\";\nimport { config } from \"./lib/wagmi\";\nimport \"@rainbow-me/rainbowkit/styles.css\";\n\nimport Home from \"@/pages/Home\";\nimport Markets from \"@/pages/Markets\";\nimport Leaderboard from \"@/pages/Leaderboard\";\nimport Portfolio from \"@/pages/Portfolio\";\nimport Wallet from \"@/pages/Wallet\";\nimport CreateEvent from \"@/pages/CreateEvent\";\nimport EventDetails from \"@/pages/EventDetails\";\nimport NotFound from \"@/pages/not-found\";\n\nfunction Router() {\n  return (\n    <Switch>\n      <Route path=\"/\" component={Home} />\n      <Route path=\"/markets\" component={Markets} />\n      <Route path=\"/leaderboard\" component={Leaderboard} />\n      <Route path=\"/portfolio\" component={Portfolio} />\n      <Route path=\"/wallet\" component={Wallet} />\n      <Route path=\"/create\" component={CreateEvent} />\n      <Route path=\"/event/:id\" component={EventDetails} />\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction App() {\n  return (\n    <WagmiProvider config={config}>\n      <QueryClientProvider client={queryClient}>\n        <RainbowKitProvider\n          theme={darkTheme({\n            accentColor: \"#836EF9\",\n            accentColorForeground: \"white\",\n            borderRadius: \"large\",\n            fontStack: \"system\",\n            overlayBlur: \"small\",\n          })}\n          modalSize=\"compact\"\n        >\n          <TooltipProvider>\n            <Toaster />\n            <SonnerToaster position=\"top-right\" theme=\"dark\" />\n            <Router />\n          </TooltipProvider>\n        </RainbowKitProvider>\n      </QueryClientProvider>\n    </WagmiProvider>\n  );\n}\n\nexport default App;\n","path":null,"size_bytes":2002,"size_tokens":null},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-9 px-2 min-w-9\",\n        sm: \"h-8 px-1.5 min-w-8\",\n        lg: \"h-10 px-2.5 min-w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","path":null,"size_bytes":1486,"size_tokens":null},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","path":null,"size_bytes":80,"size_tokens":null},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-xl border bg-card text-card-foreground shadow\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"font-semibold leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","path":null,"size_bytes":1828,"size_tokens":null},"client/src/components/ui/sonner.tsx":{"content":"\"use client\"\n\nimport { useTheme } from \"next-themes\"\nimport { Toaster as Sonner } from \"sonner\"\n\ntype ToasterProps = React.ComponentProps<typeof Sonner>\n\nconst Toaster = ({ ...props }: ToasterProps) => {\n  const { theme = \"system\" } = useTheme()\n\n  return (\n    <Sonner\n      theme={theme as ToasterProps[\"theme\"]}\n      className=\"toaster group\"\n      toastOptions={{\n        classNames: {\n          toast:\n            \"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg\",\n          description: \"group-[.toast]:text-muted-foreground\",\n          actionButton:\n            \"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground\",\n          cancelButton:\n            \"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground\",\n        },\n      }}\n      {...props}\n    />\n  )\n}\n\nexport { Toaster }\n","path":null,"size_bytes":894,"size_tokens":null},"client/src/components/ui/button-group.tsx":{"content":"import { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Separator } from \"@/components/ui/separator\"\n\nconst buttonGroupVariants = cva(\n  \"flex w-fit items-stretch has-[>[data-slot=button-group]]:gap-2 [&>*]:focus-visible:relative [&>*]:focus-visible:z-10 has-[select[aria-hidden=true]:last-child]:[&>[data-slot=select-trigger]:last-of-type]:rounded-r-md [&>[data-slot=select-trigger]:not([class*='w-'])]:w-fit [&>input]:flex-1\",\n  {\n    variants: {\n      orientation: {\n        horizontal:\n          \"[&>*:not(:first-child)]:rounded-l-none [&>*:not(:first-child)]:border-l-0 [&>*:not(:last-child)]:rounded-r-none\",\n        vertical:\n          \"flex-col [&>*:not(:first-child)]:rounded-t-none [&>*:not(:first-child)]:border-t-0 [&>*:not(:last-child)]:rounded-b-none\",\n      },\n    },\n    defaultVariants: {\n      orientation: \"horizontal\",\n    },\n  }\n)\n\nfunction ButtonGroup({\n  className,\n  orientation,\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof buttonGroupVariants>) {\n  return (\n    <div\n      role=\"group\"\n      data-slot=\"button-group\"\n      data-orientation={orientation}\n      className={cn(buttonGroupVariants({ orientation }), className)}\n      {...props}\n    />\n  )\n}\n\nfunction ButtonGroupText({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  asChild?: boolean\n}) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      className={cn(\n        \"bg-muted shadow-xs flex items-center gap-2 rounded-md border px-4 text-sm font-medium [&_svg:not([class*='size-'])]:size-4 [&_svg]:pointer-events-none\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ButtonGroupSeparator({\n  className,\n  orientation = \"vertical\",\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"button-group-separator\"\n      orientation={orientation}\n      className={cn(\n        \"bg-input relative !m-0 self-stretch data-[orientation=vertical]:h-auto\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  ButtonGroup,\n  ButtonGroupSeparator,\n  ButtonGroupText,\n  buttonGroupVariants,\n}\n","path":null,"size_bytes":2209,"size_tokens":null},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport tailwindcss from \"@tailwindcss/vite\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\nimport { metaImagesPlugin } from \"./vite-plugin-meta-images\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    tailwindcss(),\n    metaImagesPlugin(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  css: {\n    postcss: {\n      plugins: [],\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    host: \"0.0.0.0\",\n    allowedHosts: true,\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","path":null,"size_bytes":1330,"size_tokens":null},"client/src/components/market/EventCard.tsx":{"content":"import { motion } from \"framer-motion\";\nimport { type Event } from \"@/lib/api\";\nimport { Card, CardContent, CardFooter, CardHeader } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Clock, TrendingUp, Users, Trophy } from \"lucide-react\";\nimport { formatDistanceToNow } from \"date-fns\";\nimport { EventVoteChart } from \"./EventVoteChart\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Link } from \"wouter\";\n\ninterface EventCardProps {\n  event: Event;\n  featured?: boolean;\n}\n\nexport function EventCard({ event, featured = false }: EventCardProps) {\n  const { toast } = useToast();\n  \n  const volume = parseFloat(event.volume);\n  const yesPrice = parseFloat(event.yesPrice);\n  const noPrice = parseFloat(event.noPrice);\n  \n  const totalVotes = Math.floor(volume / 10); \n  const yesVotes = Math.floor(totalVotes * yesPrice);\n  const noVotes = totalVotes - yesVotes;\n\n  const handleBet = (e: React.MouseEvent, type: \"YES\" | \"NO\") => {\n    e.preventDefault();\n    e.stopPropagation();\n    toast({\n      title: `Bet Placed: ${type}`,\n      description: `You placed a bet on ${type} for \"${event.question}\"`,\n      variant: \"default\", \n      className: type === \"YES\" ? \"border-monad-green text-monad-green\" : \"border-monad-pink text-monad-pink\"\n    });\n  };\n\n  return (\n    <motion.div\n      whileHover={{ y: -4 }}\n      transition={{ type: \"spring\", stiffness: 300 }}\n      className=\"h-full\"\n    >\n      <Link href={`/event/${event.id}`}>\n        <Card \n          className={`h-full flex flex-col overflow-hidden border bg-card/40 backdrop-blur-md transition-all duration-300 group cursor-pointer ${featured ? \"border-primary/30 shadow-[0_0_30px_rgba(131,110,249,0.15)]\" : \"border-white/5 hover:border-primary/30 hover:shadow-[0_0_20px_rgba(131,110,249,0.1)]\"}`}\n          data-testid={`card-event-${event.id}`}\n        >\n          <CardHeader className=\"pb-2 space-y-3 relative z-10\">\n            <div className=\"flex justify-between items-start\">\n              <div className=\"flex gap-2\">\n                <Badge variant=\"outline\" className=\"bg-white/5 text-xs font-mono text-muted-foreground border-white/10\">\n                  {event.category}\n                </Badge>\n                {event.resolved && (\n                  <Badge variant=\"default\" className=\"bg-green-500/10 text-green-400 border border-green-500/20 flex items-center gap-1\">\n                    <Trophy className=\"w-3 h-3\" /> Resolved\n                  </Badge>\n                )}\n              </div>\n              <div className=\"flex items-center text-xs text-muted-foreground font-mono\">\n                <Clock className=\"w-3 h-3 mr-1\" />\n                {formatDistanceToNow(new Date(event.deadline), { addSuffix: true })}\n              </div>\n            </div>\n            \n            <h3 className={`font-bold leading-tight text-foreground/90 group-hover:text-primary transition-colors ${featured ? \"text-2xl md:text-3xl\" : \"text-lg\"}`}>\n              {event.question}\n            </h3>\n\n            <div className=\"flex justify-between text-xs text-muted-foreground font-mono pt-1\">\n              <div className=\"flex items-center\">\n                <TrendingUp className=\"w-3 h-3 mr-1 text-primary\" />\n                ${(volume / 1000).toFixed(1)}k Vol\n              </div>\n              <div className=\"flex items-center\">\n                <Users className=\"w-3 h-3 mr-1\" />\n                {Math.floor(volume / 50)} Traders\n              </div>\n            </div>\n          </CardHeader>\n\n          <CardContent className=\"pb-2 flex-grow relative z-10\">\n            <div className=\"space-y-4\">\n              <div className=\"bg-black/20 rounded-lg p-2 border border-white/5\">\n                  <EventVoteChart \n                      yesVotes={yesVotes} \n                      noVotes={noVotes} \n                      outcome={event.outcome as \"YES\" | \"NO\" | undefined}\n                  />\n              </div>\n            </div>\n          </CardContent>\n\n          <CardFooter className=\"pt-2 pb-4 px-4 relative z-10\">\n            <div className=\"w-full grid grid-cols-2 gap-3\">\n              <Button \n                onClick={(e) => handleBet(e, \"YES\")}\n                variant=\"outline\" \n                className=\"h-10 border-white/5 bg-white/5 text-monad-green hover:bg-monad-green/10 hover:border-monad-green/30 font-mono font-bold transition-all active:scale-95\"\n                disabled={event.resolved}\n                data-testid={`button-bet-yes-${event.id}`}\n              >\n                BET YES\n              </Button>\n              <Button \n                onClick={(e) => handleBet(e, \"NO\")}\n                variant=\"outline\" \n                className=\"h-10 border-white/5 bg-white/5 text-monad-pink hover:bg-monad-pink/10 hover:border-monad-pink/30 font-mono font-bold transition-all active:scale-95\"\n                disabled={event.resolved}\n                data-testid={`button-bet-no-${event.id}`}\n              >\n                BET NO\n              </Button>\n            </div>\n          </CardFooter>\n          \n          <div className=\"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none\" />\n        </Card>\n      </Link>\n    </motion.div>\n  );\n}\n","path":null,"size_bytes":5349,"size_tokens":null},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","path":null,"size_bytes":1723,"size_tokens":null},"client/src/pages/Portfolio.tsx":{"content":"import { Navbar } from \"@/components/layout/Navbar\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Wallet, TrendingUp, History, DollarSign, ArrowUpRight, ArrowDownRight, Trophy, Loader2, Coins, ExternalLink } from \"lucide-react\";\nimport { useContract } from \"@/hooks/useContract\";\nimport { useConnectModal } from \"@rainbow-me/rainbowkit\";\nimport { useState, useEffect } from \"react\";\nimport { Link } from \"wouter\";\nimport { formatDistanceToNow } from \"date-fns\";\nimport { getAllMarkets, getPosition, Market, MarketStatus, formatUsdc, Position } from \"@/lib/contract\";\nimport { toast } from \"sonner\";\n\ninterface PositionWithMarket {\n  market: Market;\n  position: Position;\n}\n\nexport default function Portfolio() {\n  const { isConnected, address, getContractBalance, claimWinnings, loading } = useContract();\n  const { openConnectModal } = useConnectModal();\n  \n  const [contractBalance, setContractBalance] = useState(\"0\");\n  const [positions, setPositions] = useState<PositionWithMarket[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const loadPortfolio = async () => {\n    if (!address) {\n      setIsLoading(false);\n      return;\n    }\n    \n    try {\n      const balance = await getContractBalance();\n      setContractBalance(balance);\n      \n      const markets = await getAllMarkets();\n      const positionsWithMarkets: PositionWithMarket[] = [];\n      \n      for (const market of markets) {\n        const pos = await getPosition(Number(market.id), address);\n        if (pos && (pos.yesShares > BigInt(0) || pos.noShares > BigInt(0))) {\n          positionsWithMarkets.push({ market, position: pos });\n        }\n      }\n      \n      setPositions(positionsWithMarkets);\n    } catch (e) {\n      console.error(\"Failed to load portfolio:\", e);\n    }\n    setIsLoading(false);\n  };\n\n  useEffect(() => {\n    loadPortfolio();\n    const interval = setInterval(loadPortfolio, 15000);\n    return () => clearInterval(interval);\n  }, [address]);\n\n  const handleClaim = async (marketId: number) => {\n    const toastId = toast.loading(\"Claiming winnings...\");\n    const success = await claimWinnings(marketId);\n    toast.dismiss(toastId);\n    if (success) {\n      toast.success(\"Winnings claimed!\");\n      loadPortfolio();\n    }\n  };\n\n  if (!isConnected) {\n    return (\n      <div className=\"min-h-screen bg-background bg-grid-pattern font-sans selection:bg-primary/30\">\n        <Navbar />\n        <main className=\"container mx-auto px-4 py-8\">\n          <div className=\"flex flex-col items-center justify-center py-20 text-center\">\n            <div className=\"rounded-full bg-secondary/50 p-6 mb-6\">\n              <Wallet className=\"h-12 w-12 text-muted-foreground\" />\n            </div>\n            <h2 className=\"text-2xl font-bold mb-2\">Connect Your Wallet</h2>\n            <p className=\"text-muted-foreground mb-6 max-w-md\">\n              Connect your wallet to view your on-chain portfolio and positions.\n            </p>\n            <Button onClick={() => openConnectModal?.()} className=\"font-bold\" data-testid=\"button-connect-wallet\">\n              <Wallet className=\"mr-2 h-4 w-4\" /> Connect Wallet\n            </Button>\n          </div>\n        </main>\n      </div>\n    );\n  }\n\n  const shortAddress = address \n    ? `${address.slice(0, 6)}...${address.slice(-4)}`\n    : \"\";\n\n  const activePositions = positions.filter(p => p.market.status === MarketStatus.OPEN || p.market.status === MarketStatus.PENDING_RESOLUTION);\n  const resolvedPositions = positions.filter(p => p.market.status === MarketStatus.RESOLVED);\n  const claimablePositions = resolvedPositions.filter(p => !p.position.claimed);\n\n  const totalPositionValue = positions.reduce((sum, p) => {\n    const total = p.market.yesPool + p.market.noPool;\n    if (total === BigInt(0)) return sum;\n    const yesPrice = Number((p.market.noPool * BigInt(10000)) / total) / 10000;\n    const noPrice = 1 - yesPrice;\n    const yesValue = Number(p.position.yesShares) / 1e6 * yesPrice;\n    const noValue = Number(p.position.noShares) / 1e6 * noPrice;\n    return sum + yesValue + noValue;\n  }, 0);\n\n  return (\n    <div className=\"min-h-screen bg-background bg-grid-pattern font-sans selection:bg-primary/30\">\n      <Navbar />\n      \n      <main className=\"container mx-auto px-4 py-8 space-y-8\">\n        <div className=\"flex flex-col space-y-4 md:flex-row md:items-center md:justify-between md:space-y-0\">\n          <div>\n            <h1 className=\"text-3xl font-bold tracking-tight flex items-center gap-2\" data-testid=\"text-portfolio-title\">\n              <Wallet className=\"h-8 w-8 text-primary\" />\n              My Portfolio\n            </h1>\n            <p className=\"text-muted-foreground\">All data directly from the blockchain</p>\n          </div>\n          <Button className=\"font-bold shadow-[0_0_15px_rgba(131,110,249,0.3)]\" data-testid=\"button-wallet-address\">\n            <Wallet className=\"mr-2 h-4 w-4\" /> {shortAddress}\n          </Button>\n        </div>\n\n        <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n          <Card className=\"bg-card/50 backdrop-blur-sm border-border/50\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Contract Balance</CardTitle>\n              <Coins className=\"h-4 w-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold font-mono\" data-testid=\"text-total-balance\">${parseFloat(contractBalance).toFixed(2)}</div>\n              <p className=\"text-xs text-muted-foreground mt-1\">\n                Available USDC\n              </p>\n            </CardContent>\n          </Card>\n          <Card className=\"bg-card/50 backdrop-blur-sm border-border/50\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Active Positions</CardTitle>\n              <TrendingUp className=\"h-4 w-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\" data-testid=\"text-active-bets\">{activePositions.length}</div>\n              <p className=\"text-xs text-muted-foreground mt-1\">\n                Open markets\n              </p>\n            </CardContent>\n          </Card>\n          <Card className=\"bg-card/50 backdrop-blur-sm border-border/50\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Position Value</CardTitle>\n              <DollarSign className=\"h-4 w-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold text-primary\" data-testid=\"text-total-profit\">\n                ${totalPositionValue.toFixed(2)}\n              </div>\n              <p className=\"text-xs text-muted-foreground mt-1\">\n                Estimated value\n              </p>\n            </CardContent>\n          </Card>\n          <Card className=\"bg-card/50 backdrop-blur-sm border-border/50\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Claimable</CardTitle>\n              <Trophy className=\"h-4 w-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold text-monad-green\" data-testid=\"text-win-rate\">\n                {claimablePositions.length}\n              </div>\n              <p className=\"text-xs text-muted-foreground mt-1\">\n                Ready to claim\n              </p>\n            </CardContent>\n          </Card>\n        </div>\n\n        <Tabs defaultValue=\"active\" className=\"space-y-4\">\n          <TabsList className=\"bg-secondary/50 p-1\">\n            <TabsTrigger value=\"active\" className=\"data-[state=active]:bg-background\" data-testid=\"tab-active\">Active ({activePositions.length})</TabsTrigger>\n            <TabsTrigger value=\"resolved\" className=\"data-[state=active]:bg-background\" data-testid=\"tab-history\">Resolved ({resolvedPositions.length})</TabsTrigger>\n          </TabsList>\n          \n          <TabsContent value=\"active\" className=\"space-y-4\">\n            {isLoading ? (\n              <div className=\"flex items-center justify-center py-20\">\n                <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n              </div>\n            ) : activePositions.length > 0 ? (\n              <div className=\"space-y-4\">\n                {activePositions.map(({ market, position }) => {\n                  const total = market.yesPool + market.noPool;\n                  const yesPrice = total > BigInt(0) ? Number((market.noPool * BigInt(10000)) / total) / 100 : 50;\n                  \n                  return (\n                    <Card key={Number(market.id)} className=\"bg-card/30 backdrop-blur-sm border-border/50\" data-testid={`card-position-${market.id}`}>\n                      <CardContent className=\"p-4\">\n                        <div className=\"flex items-center justify-between\">\n                          <div className=\"flex-1\">\n                            <Link href={`/event/${market.id}`}>\n                              <h3 className=\"font-medium hover:text-primary transition-colors cursor-pointer flex items-center gap-2\">\n                                {market.question}\n                                <ExternalLink className=\"h-3 w-3\" />\n                              </h3>\n                            </Link>\n                            <p className=\"text-xs text-muted-foreground mt-1\">\n                              {market.status === MarketStatus.OPEN ? \"Open\" : \"Pending Resolution\"}  Ends {formatDistanceToNow(new Date(Number(market.deadline) * 1000), { addSuffix: true })}\n                            </p>\n                          </div>\n                          <div className=\"text-right space-y-1\">\n                            {position.yesShares > BigInt(0) && (\n                              <div className=\"inline-flex items-center px-3 py-1 rounded-full text-sm font-bold bg-monad-green/20 text-monad-green\">\n                                {formatUsdc(position.yesShares)} YES\n                              </div>\n                            )}\n                            {position.noShares > BigInt(0) && (\n                              <div className=\"inline-flex items-center px-3 py-1 rounded-full text-sm font-bold bg-monad-pink/20 text-monad-pink\">\n                                {formatUsdc(position.noShares)} NO\n                              </div>\n                            )}\n                            <div className=\"text-xs text-muted-foreground\">\n                              Current: {yesPrice.toFixed(0)}% YES\n                            </div>\n                          </div>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  );\n                })}\n              </div>\n            ) : (\n              <Card className=\"flex flex-col items-center justify-center p-8 border-dashed border-2 border-border/50 bg-transparent min-h-[300px]\">\n                <div className=\"rounded-full bg-secondary/50 p-4 mb-4\">\n                  <TrendingUp className=\"h-8 w-8 text-muted-foreground\" />\n                </div>\n                <h3 className=\"text-lg font-bold\">No Active Positions</h3>\n                <p className=\"text-sm text-muted-foreground text-center mb-4\">\n                  Browse markets to place your first prediction.\n                </p>\n                <Link href=\"/markets\">\n                  <Button variant=\"outline\" data-testid=\"button-browse-markets\">Browse Markets</Button>\n                </Link>\n              </Card>\n            )}\n          </TabsContent>\n          \n          <TabsContent value=\"resolved\">\n            <Card className=\"border-border/50 bg-card/30 backdrop-blur-sm\">\n              <CardHeader>\n                <CardTitle>Resolved Markets</CardTitle>\n                <CardDescription>Markets where you had positions</CardDescription>\n              </CardHeader>\n              <CardContent>\n                {resolvedPositions.length > 0 ? (\n                  <div className=\"space-y-4\">\n                    {resolvedPositions.map(({ market, position }) => {\n                      const won = (market.outcome && position.yesShares > BigInt(0)) || \n                                  (!market.outcome && position.noShares > BigInt(0));\n                      \n                      return (\n                        <div key={Number(market.id)} className=\"flex items-center justify-between p-4 rounded-lg bg-secondary/20 border border-border/50\">\n                          <div className=\"flex items-start gap-4\">\n                            <div className={`p-2 rounded-full ${won ? 'bg-green-500/10 text-green-500' : 'bg-red-500/10 text-red-500'}`}>\n                              {won ? <ArrowUpRight className=\"h-5 w-5\" /> : <ArrowDownRight className=\"h-5 w-5\" />}\n                            </div>\n                            <div>\n                              <p className=\"font-medium\">{market.question}</p>\n                              <p className=\"text-xs text-muted-foreground\">\n                                Resolved: {market.outcome ? \"YES\" : \"NO\"}\n                              </p>\n                            </div>\n                          </div>\n                          <div className=\"text-right\">\n                            {position.claimed ? (\n                              <div className=\"text-sm text-muted-foreground\">Claimed</div>\n                            ) : won ? (\n                              <Button \n                                size=\"sm\" \n                                onClick={() => handleClaim(Number(market.id))}\n                                disabled={loading}\n                                className=\"bg-monad-green hover:bg-monad-green/90 text-black\"\n                              >\n                                Claim Winnings\n                              </Button>\n                            ) : (\n                              <div className=\"text-sm text-red-400\">Lost</div>\n                            )}\n                          </div>\n                        </div>\n                      );\n                    })}\n                  </div>\n                ) : (\n                  <div className=\"text-center py-8 text-muted-foreground\">\n                    No resolved markets yet.\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </TabsContent>\n        </Tabs>\n      </main>\n    </div>\n  );\n}\n","path":null,"size_bytes":14887,"size_tokens":null},"server/storage.ts":{"content":"import { \n  type User, type InsertUser, \n  type Event, type InsertEvent,\n  type Bet, type InsertBet, type PlaceBetInput,\n  users, events, bets\n} from \"@shared/schema\";\nimport { db } from \"./db.js\";\nimport { eq, desc, sql } from \"drizzle-orm\";\n\nexport interface IStorage {\n  // Users\n  getUser(id: number): Promise<User | undefined>;\n  getUserByWallet(walletAddress: string): Promise<User | undefined>;\n  createUser(walletAddress: string): Promise<User>;\n  updateUserBalance(id: number, balance: string): Promise<User | undefined>;\n  getLeaderboard(limit?: number): Promise<User[]>;\n  \n  // Events\n  getAllEvents(): Promise<Event[]>;\n  getEvent(id: number): Promise<Event | undefined>;\n  createEvent(event: InsertEvent): Promise<Event>;\n  updateEventPrices(id: number, yesPrice: string, noPrice: string, volume: string, poolSize: string): Promise<Event | undefined>;\n  resolveEvent(id: number, outcome: \"YES\" | \"NO\"): Promise<Event | undefined>;\n  \n  // Bets\n  placeBet(userId: number, eventId: number, option: string, amount: string, shares: string, avgPrice: string): Promise<Bet>;\n  getUserBets(userId: number): Promise<(Bet & { event: Event })[]>;\n  getBetsByEvent(eventId: number): Promise<Bet[]>;\n  settleBet(betId: number, payout: string): Promise<Bet | undefined>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  // Users\n  async getUser(id: number): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.id, id));\n    return user;\n  }\n\n  async getUserByWallet(walletAddress: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.walletAddress, walletAddress));\n    return user;\n  }\n\n  async createUser(walletAddress: string): Promise<User> {\n    const [user] = await db.insert(users).values({ walletAddress }).returning();\n    return user;\n  }\n\n  async updateUserBalance(id: number, balance: string): Promise<User | undefined> {\n    const [user] = await db.update(users).set({ balance }).where(eq(users.id, id)).returning();\n    return user;\n  }\n\n  async getLeaderboard(limit: number = 10): Promise<User[]> {\n    return db.select().from(users).orderBy(desc(users.totalProfit)).limit(limit);\n  }\n\n  // Events\n  async getAllEvents(): Promise<Event[]> {\n    return db.select().from(events).orderBy(desc(events.createdAt));\n  }\n\n  async getEvent(id: number): Promise<Event | undefined> {\n    const [event] = await db.select().from(events).where(eq(events.id, id));\n    return event;\n  }\n\n  async createEvent(event: InsertEvent): Promise<Event> {\n    const [created] = await db.insert(events).values(event).returning();\n    return created;\n  }\n\n  async updateEventPrices(id: number, yesPrice: string, noPrice: string, volume: string, poolSize: string): Promise<Event | undefined> {\n    const [event] = await db.update(events)\n      .set({ yesPrice, noPrice, volume, poolSize })\n      .where(eq(events.id, id))\n      .returning();\n    return event;\n  }\n\n  async resolveEvent(id: number, outcome: \"YES\" | \"NO\"): Promise<Event | undefined> {\n    const [event] = await db.update(events)\n      .set({ resolved: true, outcome })\n      .where(eq(events.id, id))\n      .returning();\n    return event;\n  }\n\n  // Bets\n  async placeBet(userId: number, eventId: number, option: string, amount: string, shares: string, avgPrice: string): Promise<Bet> {\n    const [bet] = await db.insert(bets).values({\n      userId,\n      eventId,\n      option,\n      amount,\n      shares,\n      avgPrice\n    }).returning();\n    return bet;\n  }\n\n  async getUserBets(userId: number): Promise<(Bet & { event: Event })[]> {\n    const result = await db\n      .select()\n      .from(bets)\n      .innerJoin(events, eq(bets.eventId, events.id))\n      .where(eq(bets.userId, userId))\n      .orderBy(desc(bets.createdAt));\n    \n    return result.map((r: { bets: Bet; events: Event }) => ({ ...r.bets, event: r.events }));\n  }\n\n  async getBetsByEvent(eventId: number): Promise<Bet[]> {\n    return db.select().from(bets).where(eq(bets.eventId, eventId));\n  }\n\n  async settleBet(betId: number, payout: string): Promise<Bet | undefined> {\n    const [bet] = await db.update(bets)\n      .set({ settled: true, payout })\n      .where(eq(bets.id, betId))\n      .returning();\n    return bet;\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","path":null,"size_bytes":4291,"size_tokens":null},"client/src/components/ui/menubar.tsx":{"content":"import * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-9 items-center space-x-1 rounded-md border bg-background p-1 shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-4 w-4 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","path":null,"size_bytes":8608,"size_tokens":null},"client/src/components/ui/command.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","path":null,"size_bytes":4887,"size_tokens":null},"client/src/hooks/useWallet.tsx":{"content":"import { useAccount, useBalance } from \"wagmi\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { connectWallet as apiConnectWallet, type User } from \"@/lib/api\";\nimport { useEffect, useState, useCallback } from \"react\";\n\nconst USDC_CONTRACT = \"0x754704Bc059F8C67012fEd69BC8A327a5aafb603\" as const;\n\nexport function useWallet() {\n  const account = useAccount();\n  const { address, isConnected } = account;\n  \n  const balanceQuery = useBalance({ \n    address: address,\n    token: USDC_CONTRACT,\n  });\n  \n  const [user, setUser] = useState<User | null>(null);\n\n  const { data: userData, refetch } = useQuery({\n    queryKey: [\"user\", address],\n    queryFn: async () => {\n      if (!address) return null;\n      return apiConnectWallet(address);\n    },\n    enabled: !!address && isConnected,\n  });\n\n  useEffect(() => {\n    if (userData) {\n      setUser(userData);\n    } else if (!isConnected) {\n      setUser(null);\n    }\n  }, [userData, isConnected]);\n\n  const refreshUser = useCallback(async () => {\n    if (address) {\n      await refetch();\n    }\n  }, [address, refetch]);\n\n  return {\n    isConnected: isConnected ?? false,\n    walletAddress: address ?? null,\n    user,\n    balance: balanceQuery.data?.formatted ?? \"0\",\n    symbol: balanceQuery.data?.symbol ?? \"MON\",\n    refreshUser,\n  };\n}\n","path":null,"size_bytes":1299,"size_tokens":null},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"px-2 py-1.5 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute right-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","path":null,"size_bytes":5745,"size_tokens":null},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-primary/10\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","path":null,"size_bytes":266,"size_tokens":null},"client/src/pages/Home.tsx":{"content":"import { Navbar } from \"@/components/layout/Navbar\";\nimport { EventCard } from \"@/components/market/EventCard\";\nimport { Button } from \"@/components/ui/button\";\nimport { Activity, Zap, ShieldCheck, Trophy, ArrowRight, TrendingUp, Users, Globe, Loader2 } from \"lucide-react\";\nimport { motion } from \"framer-motion\";\nimport { Link } from \"wouter\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { fetchEvents, type Event } from \"@/lib/api\";\nimport heroBg from \"@assets/generated_images/abstract_monad_purple_fluid_background.png\";\n\nexport default function Home() {\n  const { data: events = [], isLoading } = useQuery({\n    queryKey: [\"events\"],\n    queryFn: fetchEvents,\n    refetchInterval: 15000,\n  });\n\n  const featuredEvent = events[0];\n  \n  // Calculate real stats from events\n  const totalVolume = events.reduce((sum, e) => sum + parseFloat(e.volume || \"0\"), 0);\n  const totalMarkets = events.length;\n\n  return (\n    <div className=\"min-h-screen bg-background font-sans selection:bg-primary/30 overflow-x-hidden\">\n      <Navbar />\n      \n      <section className=\"relative pt-32 pb-40 overflow-hidden min-h-[90vh] flex flex-col justify-center\">\n        <div className=\"absolute inset-0 z-0\">\n            <img src={heroBg} alt=\"\" className=\"absolute inset-0 w-full h-full object-cover opacity-40\" />\n            <div className=\"absolute inset-0 bg-gradient-to-b from-background via-background/80 to-background\" />\n        </div>\n\n        <div className=\"container relative z-10 mx-auto px-4 flex flex-col items-center text-center\">\n            <motion.div\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ duration: 0.6 }}\n                className=\"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/5 border border-white/10 text-sm font-medium text-primary mb-8 backdrop-blur-sm\"\n            >\n                <span className=\"relative flex h-2 w-2\">\n                  <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75\"></span>\n                  <span className=\"relative inline-flex rounded-full h-2 w-2 bg-primary\"></span>\n                </span>\n                Live on Monad Mainnet\n            </motion.div>\n\n            <motion.h1\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ duration: 0.6, delay: 0.1 }}\n                className=\"text-5xl md:text-7xl lg:text-8xl font-extrabold tracking-tighter text-transparent bg-clip-text bg-gradient-to-b from-foreground via-foreground to-foreground/50 mb-6 max-w-5xl leading-[1.1]\"\n                data-testid=\"text-hero-title\"\n            >\n                THE FUTURE OF <br />\n                <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-monad-purple via-primary to-monad-green text-glow\">PREDICTION</span>\n            </motion.h1>\n\n            <motion.p\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ duration: 0.6, delay: 0.2 }}\n                className=\"text-lg md:text-xl text-muted-foreground max-w-2xl mb-10 leading-relaxed\"\n            >\n                Trade on the outcome of real-world events with lightning-fast execution. \n                Powered by Monad for instant settlement and ERC-8004 oracles for trustless resolution.\n            </motion.p>\n\n            <motion.div\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ duration: 0.6, delay: 0.3 }}\n                className=\"flex flex-col sm:flex-row gap-4 w-full sm:w-auto\"\n            >\n                <Link href=\"/markets\">\n                    <Button size=\"lg\" className=\"h-14 px-8 text-lg rounded-full bg-primary text-primary-foreground hover:bg-primary/90 shadow-[0_0_30px_rgba(131,110,249,0.4)] transition-transform hover:scale-105\" data-testid=\"button-start-trading\">\n                        Start Trading <ArrowRight className=\"ml-2 h-5 w-5\" />\n                    </Button>\n                </Link>\n                <div className=\"flex gap-3 justify-center w-full sm:w-auto\">\n                    <a href=\"https://docs.monadmarkets.xyz\" target=\"_blank\" rel=\"noopener noreferrer\">\n                        <Button size=\"lg\" variant=\"outline\" className=\"h-14 w-14 rounded-full border-white/10 bg-white/5 hover:bg-white/10 backdrop-blur-sm p-0 flex items-center justify-center\" data-testid=\"button-docs\">\n                            <svg className=\"h-6 w-6\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M19 2H6c-1.206 0-3 .799-3 3v14c0 2.201 1.794 3 3 3h15v-2H6.012C5.55 19.988 5 19.806 5 19c0-.101.009-.191.024-.273.112-.576.584-.717.988-.727H21V4a2 2 0 0 0-2-2zm0 9-2-1-2 1V4h4v7z\"/></svg>\n                        </Button>\n                    </a>\n                    <a href=\"https://x.com/monadmarkets\" target=\"_blank\" rel=\"noopener noreferrer\">\n                        <Button size=\"lg\" variant=\"outline\" className=\"h-14 w-14 rounded-full border-white/10 bg-white/5 hover:bg-white/10 backdrop-blur-sm p-0 flex items-center justify-center\" data-testid=\"button-twitter\">\n                            <svg className=\"h-5 w-5\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z\"/></svg>\n                        </Button>\n                    </a>\n                    <a href=\"https://t.me/monadmarkets\" target=\"_blank\" rel=\"noopener noreferrer\">\n                        <Button size=\"lg\" variant=\"outline\" className=\"h-14 w-14 rounded-full border-white/10 bg-white/5 hover:bg-white/10 backdrop-blur-sm p-0 flex items-center justify-center\" data-testid=\"button-telegram\">\n                            <svg className=\"h-6 w-6\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z\"/></svg>\n                        </Button>\n                    </a>\n                </div>\n            </motion.div>\n        </div>\n      </section>\n\n      <section className=\"border-y border-white/5 bg-white/5 backdrop-blur-sm\">\n        <div className=\"container mx-auto px-4 py-12\">\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-8\">\n                <div className=\"text-center\">\n                    <div className=\"text-4xl font-bold font-mono text-foreground mb-1\" data-testid=\"stat-volume\">\n                      ${totalVolume > 0 ? (totalVolume / 1000).toFixed(1) + 'k' : '0'}\n                    </div>\n                    <div className=\"text-sm text-muted-foreground uppercase tracking-widest\">Total Volume</div>\n                </div>\n                <div className=\"text-center\">\n                    <div className=\"text-4xl font-bold font-mono text-monad-green mb-1\" data-testid=\"stat-markets\">{totalMarkets}</div>\n                    <div className=\"text-sm text-muted-foreground uppercase tracking-widest\">Active Markets</div>\n                </div>\n                <div className=\"text-center\">\n                    <div className=\"text-4xl font-bold font-mono text-primary mb-1\">0.5s</div>\n                    <div className=\"text-sm text-muted-foreground uppercase tracking-widest\">Settlement Time</div>\n                </div>\n                <div className=\"text-center\">\n                    <div className=\"text-4xl font-bold font-mono text-monad-pink mb-1\">Zero</div>\n                    <div className=\"text-sm text-muted-foreground uppercase tracking-widest\">Gas Fees</div>\n                </div>\n            </div>\n        </div>\n      </section>\n\n      <section className=\"py-24 relative\">\n        <div className=\"container mx-auto px-4\">\n            <div className=\"text-center mb-16\">\n                <h2 className=\"text-3xl md:text-5xl font-bold mb-4\">Built for Speed & Trust</h2>\n                <p className=\"text-muted-foreground max-w-2xl mx-auto text-lg\">\n                    We redesigned prediction markets from the ground up to leverage Monad's high throughput architecture.\n                </p>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n                {[\n                    {\n                        icon: Zap,\n                        color: \"text-yellow-400\",\n                        title: \"Instant Settlement\",\n                        desc: \"No more waiting. Payouts land in your wallet the second the oracle confirms the outcome.\"\n                    },\n                    {\n                        icon: ShieldCheck,\n                        color: \"text-monad-green\",\n                        title: \"Trustless Oracles\",\n                        desc: \"Powered by ERC-8004 agents that verify real-world data without centralized intermediaries.\"\n                    },\n                    {\n                        icon: Activity,\n                        color: \"text-monad-pink\",\n                        title: \"Deep Liquidity\",\n                        desc: \"Our AMM model ensures you can always enter and exit positions with minimal slippage.\"\n                    }\n                ].map((feature, i) => (\n                    <div key={i} className=\"group p-8 rounded-2xl bg-white/5 border border-white/5 hover:border-primary/20 hover:bg-white/10 transition-all duration-300\">\n                        <div className={`h-14 w-14 rounded-xl bg-white/5 flex items-center justify-center mb-6 ${feature.color} group-hover:scale-110 transition-transform`}>\n                            <feature.icon className=\"h-7 w-7\" />\n                        </div>\n                        <h3 className=\"text-xl font-bold mb-3\">{feature.title}</h3>\n                        <p className=\"text-muted-foreground leading-relaxed\">\n                            {feature.desc}\n                        </p>\n                    </div>\n                ))}\n            </div>\n        </div>\n      </section>\n\n      <section className=\"py-24 bg-gradient-to-b from-transparent to-black/40\">\n        <div className=\"container mx-auto px-4\">\n            <div className=\"flex flex-col md:flex-row items-center justify-between mb-12\">\n                <div className=\"mb-6 md:mb-0 text-center md:text-left\">\n                    <h2 className=\"text-3xl md:text-4xl font-bold mb-2\">Trending Right Now</h2>\n                    <p className=\"text-muted-foreground\">The hottest market on the protocol.</p>\n                </div>\n                <Link href=\"/markets\">\n                    <Button variant=\"outline\" className=\"rounded-full border-white/10 hover:bg-white/10\" data-testid=\"button-view-all\">\n                        View All Markets\n                    </Button>\n                </Link>\n            </div>\n\n            <div className=\"relative max-w-4xl mx-auto\">\n                <div className=\"absolute -inset-4 bg-gradient-to-r from-monad-purple to-monad-green opacity-20 blur-2xl rounded-3xl\" />\n                \n                <div className=\"relative\">\n                    {isLoading ? (\n                      <div className=\"flex items-center justify-center py-20\">\n                        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n                      </div>\n                    ) : featuredEvent ? (\n                      <EventCard event={featuredEvent} featured={true} />\n                    ) : (\n                      <div className=\"text-center py-20 text-muted-foreground\">\n                        No markets available yet\n                      </div>\n                    )}\n                </div>\n            </div>\n        </div>\n      </section>\n\n      <section className=\"py-32 relative overflow-hidden\">\n         <div className=\"absolute inset-0 bg-primary/5\"></div>\n         <div className=\"container relative z-10 mx-auto px-4 text-center\">\n            <h2 className=\"text-4xl md:text-6xl font-bold mb-8 tracking-tight\">Ready to Predict the Future?</h2>\n            <p className=\"text-xl text-muted-foreground max-w-2xl mx-auto mb-10\">\n                Join thousands of traders on the fastest prediction market in DeFi.\n            </p>\n            <Link href=\"/markets\">\n                <Button size=\"lg\" className=\"h-16 px-10 text-xl rounded-full bg-foreground text-background hover:bg-foreground/90 shadow-2xl hover:scale-105 transition-all\" data-testid=\"button-cta\">\n                    Start Trading Now <ArrowRight className=\"ml-2 h-6 w-6\" />\n                </Button>\n            </Link>\n         </div>\n      </section>\n\n      <footer className=\"border-t border-white/10 bg-black py-12\">\n        <div className=\"container mx-auto px-4\">\n            <div className=\"flex flex-col md:flex-row justify-between items-center\">\n                <div className=\"mb-4 md:mb-0\">\n                    <span className=\"font-mono text-xl font-bold tracking-tighter text-foreground\">\n                        MONAD<span className=\"text-primary\">MARKETS</span>\n                    </span>\n                </div>\n                <div className=\"flex gap-8 text-sm text-muted-foreground\">\n                    <a href=\"#\" className=\"hover:text-white transition-colors\">Privacy</a>\n                    <a href=\"#\" className=\"hover:text-white transition-colors\">Terms</a>\n                    <a href=\"#\" className=\"hover:text-white transition-colors\">Twitter</a>\n                    <a href=\"#\" className=\"hover:text-white transition-colors\">Discord</a>\n                </div>\n            </div>\n            <div className=\"mt-8 text-center text-xs text-muted-foreground/50\">\n                 2025 Monad Markets Protocol.\n            </div>\n        </div>\n      </footer>\n    </div>\n  );\n}\n","path":null,"size_bytes":14288,"size_tokens":null},"client/src/components/market/EventVoteChart.tsx":{"content":"import { Bar } from \"react-chartjs-2\";\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend,\n  ChartData,\n  ChartOptions\n} from \"chart.js\";\nimport { useMemo } from \"react\";\n\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend\n);\n\ninterface EventVoteChartProps {\n  yesVotes: number;\n  noVotes: number;\n  outcome?: \"YES\" | \"NO\";\n  userBet?: \"YES\" | \"NO\";\n}\n\nexport function EventVoteChart({ yesVotes, noVotes, outcome, userBet }: EventVoteChartProps) {\n  const total = yesVotes + noVotes;\n  const yesPercentage = total > 0 ? Math.round((yesVotes / total) * 100) : 0;\n  const noPercentage = total > 0 ? Math.round((noVotes / total) * 100) : 0;\n\n  const data: ChartData<\"bar\"> = useMemo(() => {\n    // Determine colors based on outcome and user bet\n    const yesBaseColor = \"rgba(16, 185, 129, 0.6)\"; // Green\n    const noBaseColor = \"rgba(239, 68, 68, 0.6)\";   // Red\n    const userBetBorder = \"rgba(59, 130, 246, 1)\";  // Blue border for user bet\n\n    let yesColor = yesBaseColor;\n    let noColor = noBaseColor;\n    let yesBorder = \"transparent\";\n    let noBorder = \"transparent\";\n\n    // Highlight winner if outcome exists\n    if (outcome === \"YES\") {\n      yesColor = \"rgba(16, 185, 129, 1)\";\n      noColor = \"rgba(239, 68, 68, 0.3)\";\n    } else if (outcome === \"NO\") {\n      yesColor = \"rgba(16, 185, 129, 0.3)\";\n      noColor = \"rgba(239, 68, 68, 1)\";\n    }\n\n    // Highlight user bet\n    if (userBet === \"YES\") yesBorder = userBetBorder;\n    if (userBet === \"NO\") noBorder = userBetBorder;\n\n    return {\n      labels: [\"YES\", \"NO\"],\n      datasets: [\n        {\n          label: \"Votes\",\n          data: [yesVotes, noVotes],\n          backgroundColor: [yesColor, noColor],\n          borderColor: [yesBorder, noBorder],\n          borderWidth: userBet ? 3 : 0,\n          borderRadius: 4,\n          barThickness: 40,\n        },\n      ],\n    };\n  }, [yesVotes, noVotes, outcome, userBet]);\n\n  const options: ChartOptions<\"bar\"> = {\n    indexAxis: 'y', // Horizontal bar chart for better mobile fit\n    responsive: true,\n    maintainAspectRatio: false,\n    plugins: {\n      legend: {\n        display: false,\n      },\n      tooltip: {\n        enabled: true,\n        backgroundColor: \"rgba(0,0,0,0.8)\",\n        titleColor: \"#fff\",\n        bodyColor: \"#fff\",\n        callbacks: {\n            label: (context) => {\n                const value = context.raw as number;\n                const p = total > 0 ? Math.round((value / total) * 100) : 0;\n                return `${value.toLocaleString()} Votes (${p}%)`;\n            }\n        }\n      },\n    },\n    scales: {\n      x: {\n        display: false, // Hide X axis labels\n        grid: {\n          display: false,\n        },\n      },\n      y: {\n        grid: {\n          display: false, // Hide Y axis grid lines\n        },\n        ticks: {\n          color: \"#9ca3af\",\n          font: {\n            family: \"'JetBrains Mono', monospace\",\n            weight: \"bold\",\n          },\n        },\n      },\n    },\n    animation: {\n      duration: 1000,\n      easing: \"easeOutQuart\",\n    },\n  };\n\n  return (\n    <div className=\"w-full h-24 relative\">\n        {/* Overlay percentages */}\n        <div className=\"absolute inset-0 pointer-events-none flex flex-col justify-around pl-12 pr-2 text-xs font-mono font-bold text-white mix-blend-difference z-10\">\n            <div className=\"flex justify-between w-full\">\n                <span></span>\n                <span>{yesPercentage}%</span>\n            </div>\n            <div className=\"flex justify-between w-full\">\n                <span></span>\n                <span>{noPercentage}%</span>\n            </div>\n        </div>\n      <Bar data={data} options={options} />\n    </div>\n  );\n}\n","path":null,"size_bytes":3763,"size_tokens":null},"client/src/components/ui/form.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue | null>(null)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  if (!itemContext) {\n    throw new Error(\"useFormField should be used within <FormItem>\")\n  }\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue | null>(null)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-[0.8rem] text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-[0.8rem] font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","path":null,"size_bytes":4175,"size_tokens":null},"client/src/index.css":{"content":"@import \"tailwindcss\";\n@import \"tw-animate-css\";\n\n@custom-variant dark (&:is(.dark *));\n\n@theme inline {\n  --color-background: hsl(var(--background));\n  --color-foreground: hsl(var(--foreground));\n  --color-card: hsl(var(--card));\n  --color-card-foreground: hsl(var(--card-foreground));\n  --color-popover: hsl(var(--popover));\n  --color-popover-foreground: hsl(var(--popover-foreground));\n  --color-primary: hsl(var(--primary));\n  --color-primary-foreground: hsl(var(--primary-foreground));\n  --color-secondary: hsl(var(--secondary));\n  --color-secondary-foreground: hsl(var(--secondary-foreground));\n  --color-muted: hsl(var(--muted));\n  --color-muted-foreground: hsl(var(--muted-foreground));\n  --color-accent: hsl(var(--accent));\n  --color-accent-foreground: hsl(var(--accent-foreground));\n  --color-destructive: hsl(var(--destructive));\n  --color-destructive-foreground: hsl(var(--destructive-foreground));\n  --color-border: hsl(var(--border));\n  --color-input: hsl(var(--input));\n  --color-ring: hsl(var(--ring));\n  --color-monad-purple: hsl(255, 85%, 65%);\n  --color-monad-green: hsl(160, 85%, 45%);\n  --color-monad-pink: hsl(330, 85%, 60%);\n  \n  --radius-sm: calc(var(--radius) - 4px);\n  --radius-md: calc(var(--radius) - 2px);\n  --radius-lg: var(--radius);\n  \n  --font-sans: 'Plus Jakarta Sans', sans-serif;\n  --font-mono: 'JetBrains Mono', monospace;\n}\n\n/* Light Theme */\n:root {\n  --background: 0 0% 100%;\n  --foreground: 260 30% 10%;\n\n  --card: 0 0% 98%;\n  --card-foreground: 260 30% 10%;\n\n  --popover: 0 0% 100%;\n  --popover-foreground: 260 30% 10%;\n\n  --primary: 255 90% 60%;\n  --primary-foreground: 0 0% 100%;\n\n  --secondary: 260 10% 92%;\n  --secondary-foreground: 260 30% 20%;\n\n  --muted: 260 10% 92%;\n  --muted-foreground: 260 10% 45%;\n\n  --accent: 255 90% 60%;\n  --accent-foreground: 0 0% 100%;\n\n  --destructive: 340 85% 50%;\n  --destructive-foreground: 0 0% 100%;\n\n  --border: 260 10% 85%;\n  --input: 260 10% 85%;\n  --ring: 255 90% 60%;\n\n  --radius: 0.75rem;\n}\n\n/* Dark Theme */\n.dark {\n  --background: 260 30% 8%;\n  --foreground: 260 10% 95%;\n\n  --card: 260 25% 10%;\n  --card-foreground: 260 10% 95%;\n\n  --popover: 260 25% 10%;\n  --popover-foreground: 260 10% 95%;\n\n  --primary: 255 90% 68%;\n  --primary-foreground: 0 0% 100%;\n\n  --secondary: 260 20% 16%;\n  --secondary-foreground: 260 10% 90%;\n\n  --muted: 260 20% 16%;\n  --muted-foreground: 260 10% 60%;\n\n  --accent: 255 90% 68%;\n  --accent-foreground: 0 0% 100%;\n\n  --destructive: 340 85% 60%;\n  --destructive-foreground: 0 0% 100%;\n\n  --border: 260 20% 16%;\n  --input: 260 20% 16%;\n  --ring: 255 90% 68%;\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n  body {\n    @apply font-sans antialiased bg-background text-foreground selection:bg-monad-purple/30 selection:text-monad-purple;\n  }\n  .dark body {\n    background-image: radial-gradient(circle at top center, hsla(255, 85%, 65%, 0.03), transparent 40%);\n  }\n  h1, h2, h3, h4, h5, h6 {\n    @apply tracking-tight font-bold;\n  }\n}\n\n@layer utilities {\n  .text-glow {\n    text-shadow: 0 0 10px currentColor;\n  }\n  .border-glow {\n    box-shadow: 0 0 10px var(--color-primary);\n  }\n  .glass {\n    @apply bg-white/5 backdrop-blur-lg border border-white/10;\n  }\n  .dark .glass {\n    @apply bg-white/5;\n  }\n  .glass:not(.dark *) {\n    @apply bg-black/5 border-black/10;\n  }\n}\n\n/* Date input styling */\ninput[type=\"date\"] {\n  min-height: 48px;\n}\n\ninput[type=\"date\"]::-webkit-calendar-picker-indicator {\n  filter: invert(0.5);\n  cursor: pointer;\n  padding: 4px;\n}\n\n.dark input[type=\"date\"]::-webkit-calendar-picker-indicator {\n  filter: invert(1) brightness(0.8);\n}\n\ninput[type=\"date\"]::-webkit-datetime-edit {\n  padding: 0;\n}\n\ninput[type=\"date\"]::-webkit-datetime-edit-fields-wrapper {\n  padding: 0;\n}\n\n/* Ensure date input text is visible */\ninput[type=\"date\"]::-webkit-datetime-edit-text,\ninput[type=\"date\"]::-webkit-datetime-edit-month-field,\ninput[type=\"date\"]::-webkit-datetime-edit-day-field,\ninput[type=\"date\"]::-webkit-datetime-edit-year-field {\n  color: hsl(var(--foreground));\n}\n","path":null,"size_bytes":4008,"size_tokens":null},"server/vite.ts":{"content":"import { type Express } from \"express\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport async function setupVite(server: Server, app: Express) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server, path: \"/vite-hmr\" },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n","path":null,"size_bytes":1534,"size_tokens":null},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","path":null,"size_bytes":756,"size_tokens":null},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","path":null,"size_bytes":1419,"size_tokens":null},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-2 w-full overflow-hidden rounded-full bg-primary/20\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","path":null,"size_bytes":792,"size_tokens":null},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n\" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n           // @replit: no hover, and add primary border\n           \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground shadow-sm border-destructive-border\",\n        outline:\n          // @replit Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color. Uses shadow-xs. no shadow on active\n          // No hover state\n          \" border [border-color:var(--button-outline)] shadow-xs active:shadow-none \",\n        secondary:\n          // @replit border, no hover, no shadow, secondary border.\n          \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // @replit no hover, transparent border\n        ghost: \"border border-transparent\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        // @replit changed sizes\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","path":null,"size_bytes":2356,"size_tokens":null},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-9 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-300 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","path":null,"size_bytes":5124,"size_tokens":null},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Minus } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-9 w-9 items-center justify-center border-y border-r border-input text-sm shadow-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-1 ring-ring\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Minus />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","path":null,"size_bytes":2143,"size_tokens":null},"client/src/components/ui/spinner.tsx":{"content":"import { Loader2Icon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Spinner({ className, ...props }: React.ComponentProps<\"svg\">) {\n  return (\n    <Loader2Icon\n      role=\"status\"\n      aria-label=\"Loading\"\n      className={cn(\"size-4 animate-spin\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Spinner }\n","path":null,"size_bytes":331,"size_tokens":null},"client/src/components/ui/kbd.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Kbd({ className, ...props }: React.ComponentProps<\"kbd\">) {\n  return (\n    <kbd\n      data-slot=\"kbd\"\n      className={cn(\n        \"bg-muted text-muted-foreground pointer-events-none inline-flex h-5 w-fit min-w-5 select-none items-center justify-center gap-1 rounded-sm px-1 font-sans text-xs font-medium\",\n        \"[&_svg:not([class*='size-'])]:size-3\",\n        \"[[data-slot=tooltip-content]_&]:bg-background/20 [[data-slot=tooltip-content]_&]:text-background dark:[[data-slot=tooltip-content]_&]:bg-background/10\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction KbdGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <kbd\n      data-slot=\"kbd-group\"\n      className={cn(\"inline-flex items-center gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Kbd, KbdGroup }\n","path":null,"size_bytes":862,"size_tokens":null},"client/src/components/ui/chart.tsx":{"content":"import * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload\n            .filter((item) => item.type !== \"none\")\n            .map((item, index) => {\n              const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n              const itemConfig = getPayloadConfigFromPayload(config, item, key)\n              const indicatorColor = color || item.payload.fill || item.color\n\n              return (\n                <div\n                  key={item.dataKey}\n                  className={cn(\n                    \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                    indicator === \"dot\" && \"items-center\"\n                  )}\n                >\n                  {formatter && item?.value !== undefined && item.name ? (\n                    formatter(item.value, item.name, item, index, item.payload)\n                  ) : (\n                    <>\n                      {itemConfig?.icon ? (\n                        <itemConfig.icon />\n                      ) : (\n                        !hideIndicator && (\n                          <div\n                            className={cn(\n                              \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                              {\n                                \"h-2.5 w-2.5\": indicator === \"dot\",\n                                \"w-1\": indicator === \"line\",\n                                \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                  indicator === \"dashed\",\n                                \"my-0.5\": nestLabel && indicator === \"dashed\",\n                              }\n                            )}\n                            style={\n                              {\n                                \"--color-bg\": indicatorColor,\n                                \"--color-border\": indicatorColor,\n                              } as React.CSSProperties\n                            }\n                          />\n                        )\n                      )}\n                      <div\n                        className={cn(\n                          \"flex flex-1 justify-between leading-none\",\n                          nestLabel ? \"items-end\" : \"items-center\"\n                        )}\n                      >\n                        <div className=\"grid gap-1.5\">\n                          {nestLabel ? tooltipLabel : null}\n                          <span className=\"text-muted-foreground\">\n                            {itemConfig?.label || item.name}\n                          </span>\n                        </div>\n                        {item.value && (\n                          <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                            {item.value.toLocaleString()}\n                          </span>\n                        )}\n                      </div>\n                    </>\n                  )}\n                </div>\n              )\n            })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload\n          .filter((item) => item.type !== \"none\")\n          .map((item) => {\n            const key = `${nameKey || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n            return (\n              <div\n                key={item.value}\n                className={cn(\n                  \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n                )}\n              >\n                {itemConfig?.icon && !hideIcon ? (\n                  <itemConfig.icon />\n                ) : (\n                  <div\n                    className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                    style={{\n                      backgroundColor: item.color,\n                    }}\n                  />\n                )}\n                {itemConfig?.label}\n              </div>\n            )\n          })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","path":null,"size_bytes":10763,"size_tokens":null},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","path":null,"size_bytes":1598,"size_tokens":null},"client/src/components/ui/dropdown-menu.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md\",\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","path":null,"size_bytes":7606,"size_tokens":null},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","path":null,"size_bytes":325,"size_tokens":null},"client/src/components/ui/calendar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport {\n  ChevronDownIcon,\n  ChevronLeftIcon,\n  ChevronRightIcon,\n} from \"lucide-react\"\nimport { DayButton, DayPicker, getDefaultClassNames } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button, buttonVariants } from \"@/components/ui/button\"\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  captionLayout = \"label\",\n  buttonVariant = \"ghost\",\n  formatters,\n  components,\n  ...props\n}: React.ComponentProps<typeof DayPicker> & {\n  buttonVariant?: React.ComponentProps<typeof Button>[\"variant\"]\n}) {\n  const defaultClassNames = getDefaultClassNames()\n\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\n        \"bg-background group/calendar p-3 [--cell-size:2rem] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent\",\n        String.raw`rtl:**:[.rdp-button\\_next>svg]:rotate-180`,\n        String.raw`rtl:**:[.rdp-button\\_previous>svg]:rotate-180`,\n        className\n      )}\n      captionLayout={captionLayout}\n      formatters={{\n        formatMonthDropdown: (date) =>\n          date.toLocaleString(\"default\", { month: \"short\" }),\n        ...formatters,\n      }}\n      classNames={{\n        root: cn(\"w-fit\", defaultClassNames.root),\n        months: cn(\n          \"relative flex flex-col gap-4 md:flex-row\",\n          defaultClassNames.months\n        ),\n        month: cn(\"flex w-full flex-col gap-4\", defaultClassNames.month),\n        nav: cn(\n          \"absolute inset-x-0 top-0 flex w-full items-center justify-between gap-1\",\n          defaultClassNames.nav\n        ),\n        button_previous: cn(\n          buttonVariants({ variant: buttonVariant }),\n          \"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50\",\n          defaultClassNames.button_previous\n        ),\n        button_next: cn(\n          buttonVariants({ variant: buttonVariant }),\n          \"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50\",\n          defaultClassNames.button_next\n        ),\n        month_caption: cn(\n          \"flex h-[--cell-size] w-full items-center justify-center px-[--cell-size]\",\n          defaultClassNames.month_caption\n        ),\n        dropdowns: cn(\n          \"flex h-[--cell-size] w-full items-center justify-center gap-1.5 text-sm font-medium\",\n          defaultClassNames.dropdowns\n        ),\n        dropdown_root: cn(\n          \"has-focus:border-ring border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] relative rounded-md border\",\n          defaultClassNames.dropdown_root\n        ),\n        dropdown: cn(\n          \"bg-popover absolute inset-0 opacity-0\",\n          defaultClassNames.dropdown\n        ),\n        caption_label: cn(\n          \"select-none font-medium\",\n          captionLayout === \"label\"\n            ? \"text-sm\"\n            : \"[&>svg]:text-muted-foreground flex h-8 items-center gap-1 rounded-md pl-2 pr-1 text-sm [&>svg]:size-3.5\",\n          defaultClassNames.caption_label\n        ),\n        table: \"w-full border-collapse\",\n        weekdays: cn(\"flex\", defaultClassNames.weekdays),\n        weekday: cn(\n          \"text-muted-foreground flex-1 select-none rounded-md text-[0.8rem] font-normal\",\n          defaultClassNames.weekday\n        ),\n        week: cn(\"mt-2 flex w-full\", defaultClassNames.week),\n        week_number_header: cn(\n          \"w-[--cell-size] select-none\",\n          defaultClassNames.week_number_header\n        ),\n        week_number: cn(\n          \"text-muted-foreground select-none text-[0.8rem]\",\n          defaultClassNames.week_number\n        ),\n        day: cn(\n          \"group/day relative aspect-square h-full w-full select-none p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md\",\n          defaultClassNames.day\n        ),\n        range_start: cn(\n          \"bg-accent rounded-l-md\",\n          defaultClassNames.range_start\n        ),\n        range_middle: cn(\"rounded-none\", defaultClassNames.range_middle),\n        range_end: cn(\"bg-accent rounded-r-md\", defaultClassNames.range_end),\n        today: cn(\n          \"bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none\",\n          defaultClassNames.today\n        ),\n        outside: cn(\n          \"text-muted-foreground aria-selected:text-muted-foreground\",\n          defaultClassNames.outside\n        ),\n        disabled: cn(\n          \"text-muted-foreground opacity-50\",\n          defaultClassNames.disabled\n        ),\n        hidden: cn(\"invisible\", defaultClassNames.hidden),\n        ...classNames,\n      }}\n      components={{\n        Root: ({ className, rootRef, ...props }) => {\n          return (\n            <div\n              data-slot=\"calendar\"\n              ref={rootRef}\n              className={cn(className)}\n              {...props}\n            />\n          )\n        },\n        Chevron: ({ className, orientation, ...props }) => {\n          if (orientation === \"left\") {\n            return (\n              <ChevronLeftIcon className={cn(\"size-4\", className)} {...props} />\n            )\n          }\n\n          if (orientation === \"right\") {\n            return (\n              <ChevronRightIcon\n                className={cn(\"size-4\", className)}\n                {...props}\n              />\n            )\n          }\n\n          return (\n            <ChevronDownIcon className={cn(\"size-4\", className)} {...props} />\n          )\n        },\n        DayButton: CalendarDayButton,\n        WeekNumber: ({ children, ...props }) => {\n          return (\n            <td {...props}>\n              <div className=\"flex size-[--cell-size] items-center justify-center text-center\">\n                {children}\n              </div>\n            </td>\n          )\n        },\n        ...components,\n      }}\n      {...props}\n    />\n  )\n}\n\nfunction CalendarDayButton({\n  className,\n  day,\n  modifiers,\n  ...props\n}: React.ComponentProps<typeof DayButton>) {\n  const defaultClassNames = getDefaultClassNames()\n\n  const ref = React.useRef<HTMLButtonElement>(null)\n  React.useEffect(() => {\n    if (modifiers.focused) ref.current?.focus()\n  }, [modifiers.focused])\n\n  return (\n    <Button\n      ref={ref}\n      variant=\"ghost\"\n      size=\"icon\"\n      data-day={day.date.toLocaleDateString()}\n      data-selected-single={\n        modifiers.selected &&\n        !modifiers.range_start &&\n        !modifiers.range_end &&\n        !modifiers.range_middle\n      }\n      data-range-start={modifiers.range_start}\n      data-range-end={modifiers.range_end}\n      data-range-middle={modifiers.range_middle}\n      className={cn(\n        \"data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 flex aspect-square h-auto w-full min-w-[--cell-size] flex-col gap-1 font-normal leading-none data-[range-end=true]:rounded-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] [&>span]:text-xs [&>span]:opacity-70\",\n        defaultClassNames.day,\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Calendar, CalendarDayButton }\n","path":null,"size_bytes":7569,"size_tokens":null},"client/src/components/ui/empty.tsx":{"content":"import { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Empty({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"empty\"\n      className={cn(\n        \"flex min-w-0 flex-1 flex-col items-center justify-center gap-6 text-balance rounded-lg border-dashed p-6 text-center md:p-12\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction EmptyHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"empty-header\"\n      className={cn(\n        \"flex max-w-sm flex-col items-center gap-2 text-center\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nconst emptyMediaVariants = cva(\n  \"mb-2 flex shrink-0 items-center justify-center [&_svg]:pointer-events-none [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        icon: \"bg-muted text-foreground flex size-10 shrink-0 items-center justify-center rounded-lg [&_svg:not([class*='size-'])]:size-6\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction EmptyMedia({\n  className,\n  variant = \"default\",\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof emptyMediaVariants>) {\n  return (\n    <div\n      data-slot=\"empty-icon\"\n      data-variant={variant}\n      className={cn(emptyMediaVariants({ variant, className }))}\n      {...props}\n    />\n  )\n}\n\nfunction EmptyTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"empty-title\"\n      className={cn(\"text-lg font-medium tracking-tight\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction EmptyDescription({ className, ...props }: React.ComponentProps<\"p\">) {\n  return (\n    <div\n      data-slot=\"empty-description\"\n      className={cn(\n        \"text-muted-foreground [&>a:hover]:text-primary text-sm/relaxed [&>a]:underline [&>a]:underline-offset-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction EmptyContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"empty-content\"\n      className={cn(\n        \"flex w-full min-w-0 max-w-sm flex-col items-center gap-4 text-balance text-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Empty,\n  EmptyHeader,\n  EmptyTitle,\n  EmptyDescription,\n  EmptyContent,\n  EmptyMedia,\n}\n","path":null,"size_bytes":2396,"size_tokens":null},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","path":null,"size_bytes":2001,"size_tokens":null},"client/src/components/layout/Navbar.tsx":{"content":"import { Link, useLocation } from \"wouter\";\nimport { Bell, Search, Menu, Home as HomeIcon, Trophy, Briefcase, ChevronRight, TrendingUp, Moon, Sun, Plus, Wallet } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { useState, useEffect } from \"react\";\nimport { ConnectButton } from \"@rainbow-me/rainbowkit\";\nimport logoImage from \"@assets/generated_images/monad_crypto_prediction_market_logo_abstract.png\";\nimport {\n  Sheet,\n  SheetContent,\n  SheetHeader,\n  SheetTitle,\n  SheetTrigger,\n} from \"@/components/ui/sheet\";\nimport { Separator } from \"@/components/ui/separator\";\n\nexport function Navbar() {\n  const [scrolled, setScrolled] = useState(false);\n  const [location] = useLocation();\n  const [isDark, setIsDark] = useState(true);\n\n  useEffect(() => {\n    const handleScroll = () => {\n      setScrolled(window.scrollY > 20);\n    };\n    window.addEventListener(\"scroll\", handleScroll);\n    return () => window.removeEventListener(\"scroll\", handleScroll);\n  }, []);\n\n  useEffect(() => {\n    const stored = localStorage.getItem(\"theme\");\n    if (stored === \"light\") {\n      setIsDark(false);\n      document.documentElement.classList.remove(\"dark\");\n    } else {\n      setIsDark(true);\n      document.documentElement.classList.add(\"dark\");\n    }\n  }, []);\n\n  const toggleTheme = () => {\n    if (isDark) {\n      document.documentElement.classList.remove(\"dark\");\n      localStorage.setItem(\"theme\", \"light\");\n      setIsDark(false);\n    } else {\n      document.documentElement.classList.add(\"dark\");\n      localStorage.setItem(\"theme\", \"dark\");\n      setIsDark(true);\n    }\n  };\n\n  const navLinks = [\n    { href: \"/markets\", label: \"Markets\", icon: TrendingUp },\n    { href: \"/leaderboard\", label: \"Leaderboard\", icon: Trophy },\n    { href: \"/portfolio\", label: \"Portfolio\", icon: Briefcase },\n    { href: \"/wallet\", label: \"Wallet\", icon: Wallet },\n  ];\n\n  return (\n    <nav className={`sticky top-0 z-50 w-full transition-all duration-300 ${scrolled ? \"border-b border-white/10 bg-background/90 backdrop-blur-xl shadow-lg\" : \"bg-background/50 backdrop-blur-sm border-b border-white/5\"}`}>\n      <div className=\"container mx-auto flex h-16 items-center justify-between px-4\">\n        <Link href=\"/\" className=\"flex items-center gap-2 transition-opacity hover:opacity-90 shrink-0\" data-testid=\"link-home\">\n            <img \n              src={logoImage} \n              alt=\"Monad Markets\" \n              className=\"h-8 w-8 rounded-sm shadow-md\"\n            />\n            <span className=\"font-mono text-lg font-bold tracking-tighter text-foreground\">\n              <span className=\"hidden xs:inline\">MONAD</span>\n              <span className=\"text-primary hidden sm:inline\">MARKETS</span>\n            </span>\n        </Link>\n\n        <div className=\"hidden md:flex items-center gap-1 mx-4 bg-white/5 p-1 rounded-full border border-white/5 backdrop-blur-sm\">\n          {navLinks.map(link => (\n             <Link \n               key={link.href} \n               href={link.href}\n               className={`px-4 py-1.5 rounded-full text-sm font-medium transition-all duration-200 ${location === link.href ? 'bg-primary/20 text-primary shadow-sm' : 'text-muted-foreground hover:text-foreground hover:bg-white/5'}`}\n               data-testid={`link-${link.label.toLowerCase()}`}\n             >\n                 {link.label}\n             </Link>\n          ))}\n        </div>\n\n        <div className=\"hidden md:flex items-center relative w-64 mr-4\">\n            <Search className=\"absolute left-3 top-2.5 h-4 w-4 text-muted-foreground\" />\n            <Input \n              placeholder=\"Search markets...\" \n              className=\"pl-9 bg-white/5 border-transparent focus-visible:ring-primary/50 h-9 font-mono text-sm rounded-full transition-all focus:bg-white/10 focus:w-full\"\n              data-testid=\"input-search-nav\"\n            />\n        </div>\n\n        <div className=\"flex items-center gap-2 sm:gap-3\">\n          <Link href=\"/create\">\n            <Button \n              variant=\"ghost\" \n              size=\"icon\" \n              className=\"text-muted-foreground hover:text-foreground hidden sm:flex hover:bg-white/10 rounded-full\"\n              data-testid=\"button-create-prediction\"\n            >\n              <Plus className=\"h-5 w-5\" />\n            </Button>\n          </Link>\n\n          <Button variant=\"ghost\" size=\"icon\" className=\"relative text-muted-foreground hover:text-foreground hidden sm:flex hover:bg-white/10 rounded-full\" data-testid=\"button-notifications\">\n            <Bell className=\"h-5 w-5\" />\n            <span className=\"absolute top-2 right-2 h-2 w-2 rounded-full bg-primary animate-pulse\"></span>\n          </Button>\n\n          <ConnectButton.Custom>\n            {({\n              account,\n              chain,\n              openAccountModal,\n              openChainModal,\n              openConnectModal,\n              mounted,\n            }) => {\n              const ready = mounted;\n              const connected = ready && account && chain;\n\n              return (\n                <div\n                  {...(!ready && {\n                    'aria-hidden': true,\n                    'style': {\n                      opacity: 0,\n                      pointerEvents: 'none',\n                      userSelect: 'none',\n                    },\n                  })}\n                >\n                  {(() => {\n                    if (!connected) {\n                      return (\n                        <Button\n                          onClick={openConnectModal}\n                          className=\"font-mono font-bold h-9 rounded-full bg-primary text-primary-foreground hover:bg-primary/90 shadow-[0_0_15px_rgba(131,110,249,0.4)] hover:shadow-[0_0_25px_rgba(131,110,249,0.6)] hover:scale-105 transition-all duration-300\"\n                          data-testid=\"button-wallet\"\n                        >\n                          <span className=\"hidden sm:inline\">Connect Wallet</span>\n                          <span className=\"sm:hidden\">Connect</span>\n                        </Button>\n                      );\n                    }\n\n                    if (chain.unsupported) {\n                      return (\n                        <Button\n                          onClick={openChainModal}\n                          variant=\"destructive\"\n                          className=\"font-mono font-bold h-9 rounded-full\"\n                          data-testid=\"button-wrong-network\"\n                        >\n                          Wrong Network\n                        </Button>\n                      );\n                    }\n\n                    return (\n                      <Button\n                        onClick={openAccountModal}\n                        variant=\"outline\"\n                        className=\"font-mono font-bold h-9 rounded-full border-primary/30 text-primary hover:bg-primary/10 transition-all duration-300\"\n                        data-testid=\"button-wallet\"\n                      >\n                        <span className=\"hidden sm:inline\">{account.displayName}</span>\n                        <span className=\"sm:hidden\">{account.displayName?.slice(0, 8)}</span>\n                      </Button>\n                    );\n                  })()}\n                </div>\n              );\n            }}\n          </ConnectButton.Custom>\n          \n          <Sheet>\n            <SheetTrigger asChild>\n              <Button variant=\"ghost\" size=\"icon\" className=\"md:hidden shrink-0 -mr-2 hover:bg-white/10 rounded-full\" data-testid=\"button-mobile-menu\">\n                <Menu className=\"h-5 w-5\" />\n              </Button>\n            </SheetTrigger>\n            <SheetContent side=\"right\" className=\"w-[300px] sm:w-[400px] border-l border-white/10 bg-background/95 backdrop-blur-xl p-6\">\n              <SheetHeader className=\"text-left\">\n                <div className=\"flex items-center gap-2 mb-6\">\n                  <img \n                    src={logoImage} \n                    alt=\"Monad Markets\" \n                    className=\"h-8 w-8 rounded-sm\"\n                  />\n                  <SheetTitle className=\"font-mono text-lg font-bold tracking-tighter\">\n                    MONAD<span className=\"text-primary\">MARKETS</span>\n                  </SheetTitle>\n                </div>\n              </SheetHeader>\n              \n              <div className=\"flex flex-col gap-6 mt-4\">\n                <div className=\"relative w-full\">\n                    <Search className=\"absolute left-3 top-2.5 h-4 w-4 text-muted-foreground\" />\n                    <Input \n                    placeholder=\"Search markets...\" \n                    className=\"pl-9 bg-white/5 border-transparent focus-visible:ring-primary/50 h-10 font-mono text-sm w-full rounded-full\"\n                    />\n                </div>\n\n                <nav className=\"flex flex-col space-y-2\">\n                    <Link href=\"/\" className={`flex items-center justify-between px-4 py-3 rounded-xl transition-colors group ${location === '/' ? 'bg-white/10 text-foreground' : 'hover:bg-white/5'}`}>\n                        <div className=\"flex items-center gap-3\">\n                            <HomeIcon className={`h-5 w-5 transition-colors ${location === '/' ? 'text-primary' : 'text-muted-foreground group-hover:text-primary'}`} />\n                            <span className=\"font-medium\">Home</span>\n                        </div>\n                        <ChevronRight className=\"h-4 w-4 text-muted-foreground/50\" />\n                    </Link>\n                    {navLinks.map(link => (\n                        <Link key={link.href} href={link.href} className={`flex items-center justify-between px-4 py-3 rounded-xl transition-colors group ${location === link.href ? 'bg-white/10 text-foreground' : 'hover:bg-white/5'}`}>\n                            <div className=\"flex items-center gap-3\">\n                                <link.icon className={`h-5 w-5 transition-colors ${location === link.href ? 'text-primary' : 'text-muted-foreground group-hover:text-primary'}`} />\n                                <span className=\"font-medium\">{link.label}</span>\n                            </div>\n                            <ChevronRight className=\"h-4 w-4 text-muted-foreground/50\" />\n                        </Link>\n                    ))}\n                    <Link href=\"/create\" className={`flex items-center justify-between px-4 py-3 rounded-xl transition-colors group ${location === '/create' ? 'bg-white/10 text-foreground' : 'hover:bg-white/5'}`}>\n                        <div className=\"flex items-center gap-3\">\n                            <Plus className={`h-5 w-5 transition-colors ${location === '/create' ? 'text-primary' : 'text-muted-foreground group-hover:text-primary'}`} />\n                            <span className=\"font-medium\">Create Prediction</span>\n                        </div>\n                        <ChevronRight className=\"h-4 w-4 text-muted-foreground/50\" />\n                    </Link>\n                </nav>\n\n                <Separator className=\"bg-white/10\" />\n\n                <div className=\"flex items-center justify-between px-4\">\n                    <span className=\"text-sm font-medium\">Theme</span>\n                    <Button \n                      variant=\"outline\" \n                      size=\"sm\" \n                      onClick={toggleTheme}\n                      className=\"border-white/10 bg-white/5\"\n                      data-testid=\"button-theme-toggle-mobile\"\n                    >\n                      {isDark ? <Sun className=\"h-4 w-4 mr-2\" /> : <Moon className=\"h-4 w-4 mr-2\" />}\n                      {isDark ? \"Light\" : \"Dark\"}\n                    </Button>\n                </div>\n\n                <div className=\"px-4\">\n                    <h4 className=\"text-xs font-bold text-muted-foreground uppercase tracking-wider mb-4\">Community</h4>\n                    <div className=\"flex gap-3\">\n                        <a href=\"https://docs.monadmarkets.xyz\" target=\"_blank\" rel=\"noopener noreferrer\">\n                            <Button variant=\"outline\" size=\"icon\" className=\"h-12 w-12 rounded-full border-white/10 bg-white/5 hover:bg-white/10\">\n                                <svg className=\"h-5 w-5\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M19 2H6c-1.206 0-3 .799-3 3v14c0 2.201 1.794 3 3 3h15v-2H6.012C5.55 19.988 5 19.806 5 19c0-.101.009-.191.024-.273.112-.576.584-.717.988-.727H21V4a2 2 0 0 0-2-2zm0 9-2-1-2 1V4h4v7z\"/></svg>\n                            </Button>\n                        </a>\n                        <a href=\"https://x.com/monadmarkets\" target=\"_blank\" rel=\"noopener noreferrer\">\n                            <Button variant=\"outline\" size=\"icon\" className=\"h-12 w-12 rounded-full border-white/10 bg-white/5 hover:bg-white/10\">\n                                <svg className=\"h-5 w-5\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z\"/></svg>\n                            </Button>\n                        </a>\n                        <a href=\"https://t.me/monadmarkets\" target=\"_blank\" rel=\"noopener noreferrer\">\n                            <Button variant=\"outline\" size=\"icon\" className=\"h-12 w-12 rounded-full border-white/10 bg-white/5 hover:bg-white/10\">\n                                <svg className=\"h-5 w-5\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z\"/></svg>\n                            </Button>\n                        </a>\n                    </div>\n                </div>\n              </div>\n            </SheetContent>\n          </Sheet>\n        </div>\n      </div>\n    </nav>\n  );\n}\n","path":null,"size_bytes":14370,"size_tokens":null},"client/src/components/ui/item.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Separator } from \"@/components/ui/separator\"\n\nfunction ItemGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      role=\"list\"\n      data-slot=\"item-group\"\n      className={cn(\"group/item-group flex flex-col\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction ItemSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"item-separator\"\n      orientation=\"horizontal\"\n      className={cn(\"my-0\", className)}\n      {...props}\n    />\n  )\n}\n\nconst itemVariants = cva(\n  \"group/item [a]:hover:bg-accent/50 focus-visible:border-ring focus-visible:ring-ring/50 [a]:transition-colors flex flex-wrap items-center rounded-md border border-transparent text-sm outline-none transition-colors duration-100 focus-visible:ring-[3px]\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline: \"border-border\",\n        muted: \"bg-muted/50\",\n      },\n      size: {\n        default: \"gap-4 p-4 \",\n        sm: \"gap-2.5 px-4 py-3\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Item({\n  className,\n  variant = \"default\",\n  size = \"default\",\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> &\n  VariantProps<typeof itemVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n  return (\n    <Comp\n      data-slot=\"item\"\n      data-variant={variant}\n      data-size={size}\n      className={cn(itemVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nconst itemMediaVariants = cva(\n  \"flex shrink-0 items-center justify-center gap-2 group-has-[[data-slot=item-description]]/item:translate-y-0.5 group-has-[[data-slot=item-description]]/item:self-start [&_svg]:pointer-events-none\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        icon: \"bg-muted size-8 rounded-sm border [&_svg:not([class*='size-'])]:size-4\",\n        image:\n          \"size-10 overflow-hidden rounded-sm [&_img]:size-full [&_img]:object-cover\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction ItemMedia({\n  className,\n  variant = \"default\",\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof itemMediaVariants>) {\n  return (\n    <div\n      data-slot=\"item-media\"\n      data-variant={variant}\n      className={cn(itemMediaVariants({ variant, className }))}\n      {...props}\n    />\n  )\n}\n\nfunction ItemContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-content\"\n      className={cn(\n        \"flex flex-1 flex-col gap-1 [&+[data-slot=item-content]]:flex-none\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ItemTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-title\"\n      className={cn(\n        \"flex w-fit items-center gap-2 text-sm font-medium leading-snug\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ItemDescription({ className, ...props }: React.ComponentProps<\"p\">) {\n  return (\n    <p\n      data-slot=\"item-description\"\n      className={cn(\n        \"text-muted-foreground line-clamp-2 text-balance text-sm font-normal leading-normal\",\n        \"[&>a:hover]:text-primary [&>a]:underline [&>a]:underline-offset-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ItemActions({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-actions\"\n      className={cn(\"flex items-center gap-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction ItemHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-header\"\n      className={cn(\n        \"flex basis-full items-center justify-between gap-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ItemFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-footer\"\n      className={cn(\n        \"flex basis-full items-center justify-between gap-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Item,\n  ItemMedia,\n  ItemContent,\n  ItemActions,\n  ItemGroup,\n  ItemSeparator,\n  ItemTitle,\n  ItemDescription,\n  ItemHeader,\n  ItemFooter,\n}\n","path":null,"size_bytes":4494,"size_tokens":null},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","path":null,"size_bytes":1148,"size_tokens":null},"client/src/lib/api.ts":{"content":"import { queryClient } from \"./queryClient\";\n\nconst API_BASE = \"/api\";\n\nexport interface Event {\n  id: number;\n  question: string;\n  category: string;\n  deadline: string;\n  resolved: boolean;\n  outcome: string | null;\n  yesPrice: string;\n  noPrice: string;\n  volume: string;\n  poolSize: string;\n  createdAt: string;\n  creatorAddress: string | null;\n  creatorFee: string | null;\n  resolutionSource: string | null;\n  resolutionProof: string | null;\n  resolvedBy: string | null;\n  resolvedAt: string | null;\n  targetAsset: string | null;\n  targetPrice: string | null;\n  priceCondition: string | null;\n  sportType: string | null;\n  teamA: string | null;\n  teamB: string | null;\n  gameId: string | null;\n}\n\nexport interface User {\n  id: number;\n  walletAddress: string;\n  balance: string;\n  totalProfit: string;\n  totalVolume: string;\n  winRate: string;\n  createdAt: string;\n}\n\nexport interface Bet {\n  id: number;\n  userId: number;\n  eventId: number;\n  option: string;\n  amount: string;\n  shares: string;\n  avgPrice: string;\n  settled: boolean;\n  payout: string | null;\n  createdAt: string;\n  event?: Event;\n}\n\n// Events\nexport async function fetchEvents(): Promise<Event[]> {\n  const res = await fetch(`${API_BASE}/events`);\n  if (!res.ok) throw new Error(\"Failed to fetch events\");\n  return res.json();\n}\n\nexport async function fetchEvent(id: number): Promise<Event> {\n  const res = await fetch(`${API_BASE}/events/${id}`);\n  if (!res.ok) throw new Error(\"Failed to fetch event\");\n  return res.json();\n}\n\n// Users\nexport async function connectWallet(walletAddress: string): Promise<User> {\n  const res = await fetch(`${API_BASE}/users/connect`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ walletAddress }),\n  });\n  if (!res.ok) throw new Error(\"Failed to connect wallet\");\n  return res.json();\n}\n\nexport async function fetchUser(walletAddress: string): Promise<User> {\n  const res = await fetch(`${API_BASE}/users/${walletAddress}`);\n  if (!res.ok) throw new Error(\"Failed to fetch user\");\n  return res.json();\n}\n\n// Bets\nexport async function placeBet(\n  walletAddress: string,\n  eventId: number,\n  option: \"YES\" | \"NO\",\n  amount: number\n): Promise<{ bet: Bet; newBalance: string }> {\n  const res = await fetch(`${API_BASE}/bets`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ walletAddress, eventId, option, amount }),\n  });\n  if (!res.ok) {\n    const error = await res.json();\n    throw new Error(error.error || \"Failed to place bet\");\n  }\n  // Invalidate queries after placing bet\n  queryClient.invalidateQueries({ queryKey: [\"events\"] });\n  queryClient.invalidateQueries({ queryKey: [\"user\"] });\n  queryClient.invalidateQueries({ queryKey: [\"userBets\"] });\n  return res.json();\n}\n\nexport async function fetchUserBets(walletAddress: string): Promise<Bet[]> {\n  const res = await fetch(`${API_BASE}/bets/user/${walletAddress}`);\n  if (!res.ok) throw new Error(\"Failed to fetch bets\");\n  return res.json();\n}\n\n// Leaderboard\nexport async function fetchLeaderboard(limit: number = 10): Promise<User[]> {\n  const res = await fetch(`${API_BASE}/leaderboard?limit=${limit}`);\n  if (!res.ok) throw new Error(\"Failed to fetch leaderboard\");\n  return res.json();\n}\n","path":null,"size_bytes":3272,"size_tokens":null},"client/src/pages/EventDetails.tsx":{"content":"import { Navbar } from \"@/components/layout/Navbar\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Input } from \"@/components/ui/input\";\nimport { ArrowLeft, Clock, TrendingUp, Users, Info, Share2, AlertCircle, Loader2, Zap, ChevronUp, ChevronDown, Gavel, CheckCircle, XCircle } from \"lucide-react\";\nimport { Link, useRoute } from \"wouter\";\nimport { formatDistanceToNow } from \"date-fns\";\nimport { Area, AreaChart, ResponsiveContainer, Tooltip, XAxis, YAxis } from \"recharts\";\nimport { useState, useEffect } from \"react\";\nimport { useContract } from \"@/hooks/useContract\";\nimport { useConnectModal } from \"@rainbow-me/rainbowkit\";\nimport { toast } from \"sonner\";\nimport { getMarket, getPosition, Market, MarketStatus, formatUsdc, Position } from \"@/lib/contract\";\n\nfunction generatePriceHistory(currentYesPrice: number) {\n  const history = [];\n  let price = currentYesPrice - 0.15 + Math.random() * 0.1;\n  \n  for (let i = 0; i < 24; i++) {\n    const change = (Math.random() - 0.45) * 0.04;\n    price = Math.max(0.05, Math.min(0.95, price + change));\n    history.push({\n      time: `${String(i).padStart(2, '0')}:00`,\n      price: price,\n    });\n  }\n  \n  history.push({ time: \"Now\", price: currentYesPrice });\n  return history;\n}\n\nexport default function EventDetails() {\n  const [, params] = useRoute(\"/event/:id\");\n  const marketId = parseInt(params?.id || \"0\");\n  \n  const [amount, setAmount] = useState(\"10\");\n  const [selectedOption, setSelectedOption] = useState<\"YES\" | \"NO\">(\"YES\");\n  const [timeframe, setTimeframe] = useState(\"1D\");\n  const [market, setMarket] = useState<Market | null>(null);\n  const [position, setPosition] = useState<Position | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [contractBalance, setContractBalance] = useState(\"0\");\n\n  const { isConnected, address, buyShares, proposeOutcome, finalizeResolution, claimWinnings, loading, error, getContractBalance } = useContract();\n  const { openConnectModal } = useConnectModal();\n\n  const loadMarket = async () => {\n    try {\n      const data = await getMarket(marketId);\n      setMarket(data);\n      if (address) {\n        const pos = await getPosition(marketId, address);\n        setPosition(pos);\n        const bal = await getContractBalance();\n        setContractBalance(bal);\n      }\n    } catch (e: any) {\n      console.error(\"Failed to load market:\", e);\n    }\n    setIsLoading(false);\n  };\n\n  useEffect(() => {\n    loadMarket();\n    const interval = setInterval(loadMarket, 10000);\n    return () => clearInterval(interval);\n  }, [marketId, address]);\n\n  const handleBuy = async () => {\n    if (!isConnected) {\n      openConnectModal?.();\n      return;\n    }\n    \n    const balanceNum = parseFloat(contractBalance);\n    const amountNum = parseFloat(amount);\n    if (amountNum > balanceNum) {\n      toast.error(\"Insufficient balance. Please deposit USDC first.\");\n      return;\n    }\n    \n    const toastId = toast.loading(`Buying ${selectedOption} shares...`);\n    const success = await buyShares(marketId, selectedOption === \"YES\", amount);\n    toast.dismiss(toastId);\n    if (success) {\n      toast.success(`Successfully bought ${selectedOption} shares!`);\n      loadMarket();\n    } else if (error) {\n      toast.error(error);\n    }\n  };\n\n  const handleProposeOutcome = async () => {\n    if (!market) return;\n    const toastId = toast.loading(\"Proposing outcome...\");\n    const success = await proposeOutcome(marketId, \"0\");\n    toast.dismiss(toastId);\n    if (success) {\n      toast.success(\"Outcome proposed! Bond posted.\");\n      loadMarket();\n    } else if (error) {\n      toast.error(error);\n    }\n  };\n\n  const handleFinalize = async () => {\n    const toastId = toast.loading(\"Finalizing resolution...\");\n    const success = await finalizeResolution(marketId);\n    toast.dismiss(toastId);\n    if (success) {\n      toast.success(\"Market finalized!\");\n      loadMarket();\n    } else if (error) {\n      toast.error(error);\n    }\n  };\n\n  const handleClaim = async () => {\n    const toastId = toast.loading(\"Claiming winnings...\");\n    const success = await claimWinnings(marketId);\n    toast.dismiss(toastId);\n    if (success) {\n      toast.success(\"Winnings claimed!\");\n      loadMarket();\n    } else if (error) {\n      toast.error(error);\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-background bg-grid-pattern font-sans flex items-center justify-center\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n      </div>\n    );\n  }\n\n  if (!market) {\n    return (\n      <div className=\"min-h-screen bg-background bg-grid-pattern font-sans\">\n        <Navbar />\n        <main className=\"container mx-auto px-4 py-8\">\n          <div className=\"text-center py-20\">\n            <p className=\"text-muted-foreground\">Market not found</p>\n            <Link href=\"/markets\">\n              <Button variant=\"link\">Back to Markets</Button>\n            </Link>\n          </div>\n        </main>\n      </div>\n    );\n  }\n\n  const total = market.yesPool + market.noPool;\n  const yesPrice = total > BigInt(0) ? Number((market.noPool * BigInt(10000)) / total) / 10000 : 0.5;\n  const noPrice = 1 - yesPrice;\n  const currentPrice = selectedOption === \"YES\" ? yesPrice : noPrice;\n  const shares = parseFloat(amount) / currentPrice;\n  const potentialPayout = shares;\n  const profit = potentialPayout - parseFloat(amount);\n  const returnPercentage = parseFloat(amount) > 0 ? ((profit / parseFloat(amount)) * 100).toFixed(0) : \"0\";\n  const volume = formatUsdc(market.totalVolume);\n  const deadline = new Date(Number(market.deadline) * 1000);\n  const isExpired = deadline < new Date();\n  const isOpen = market.status === MarketStatus.OPEN;\n  const isPending = market.status === MarketStatus.PENDING_RESOLUTION;\n  const isResolved = market.status === MarketStatus.RESOLVED;\n\n  const priceHistory = generatePriceHistory(yesPrice);\n\n  const CustomTooltip = ({ active, payload }: any) => {\n    if (active && payload && payload.length) {\n      return (\n        <div className=\"bg-background/95 backdrop-blur-xl border border-primary/30 rounded-xl px-4 py-3 shadow-2xl\">\n          <p className=\"text-xs text-muted-foreground mb-1\">{payload[0].payload.time}</p>\n          <p className=\"text-lg font-bold text-primary font-mono\">\n            {(payload[0].value * 100).toFixed(0)}%\n          </p>\n        </div>\n      );\n    }\n    return null;\n  };\n\n  const userHasPosition = position && (position.yesShares > BigInt(0) || position.noShares > BigInt(0));\n\n  return (\n    <div className=\"min-h-screen bg-background bg-grid-pattern font-sans selection:bg-primary/30\">\n      <Navbar />\n      \n      <main className=\"container mx-auto px-4 py-6 md:py-8\">\n        <div className=\"mb-4\">\n          <Link href=\"/markets\">\n            <Button variant=\"ghost\" className=\"pl-0 hover:bg-transparent hover:text-primary gap-2\" data-testid=\"button-back\">\n              <ArrowLeft className=\"h-4 w-4\" /> Back\n            </Button>\n          </Link>\n        </div>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-6 lg:gap-8\">\n          <div className=\"lg:col-span-7 space-y-5\">\n            <div>\n              <div className=\"flex flex-wrap gap-2 mb-3\">\n                <Badge className=\"bg-primary/20 text-primary border-primary/30\" data-testid=\"badge-category\">Crypto</Badge>\n                <Badge variant=\"outline\" className={`${isOpen ? \"bg-monad-green/10 text-monad-green border-monad-green/30\" : isPending ? \"bg-yellow-500/10 text-yellow-500 border-yellow-500/30\" : \"bg-muted text-muted-foreground\"}`}>\n                  {isOpen ? \"Open\" : isPending ? \"Pending Resolution\" : isResolved ? \"Resolved\" : \"Voided\"}\n                </Badge>\n                <Badge variant=\"outline\" className=\"bg-white/5 border-white/10 text-muted-foreground\">\n                  <Clock className=\"h-3 w-3 mr-1\" /> {isExpired ? \"Expired\" : formatDistanceToNow(deadline, { addSuffix: true })}\n                </Badge>\n              </div>\n              <h1 className=\"text-xl md:text-3xl font-bold leading-tight\" data-testid=\"text-event-question\">\n                {market.question}\n              </h1>\n            </div>\n\n            <Card className=\"bg-gradient-to-br from-card/80 to-card/40 backdrop-blur-xl border-white/10 overflow-hidden shadow-2xl\">\n              <div className=\"p-4 md:p-5 border-b border-white/5\">\n                <div className=\"flex flex-col md:flex-row md:justify-between md:items-center gap-4\">\n                  <div className=\"flex items-center gap-6\">\n                    <div>\n                      <div className=\"text-[10px] text-muted-foreground uppercase tracking-widest mb-1\">Probability</div>\n                      <div className=\"flex items-baseline gap-2\">\n                        <span className=\"text-3xl font-bold font-mono text-monad-green\" data-testid=\"text-probability\">{(yesPrice * 100).toFixed(0)}%</span>\n                        <span className=\"text-sm text-monad-green font-medium\">YES</span>\n                      </div>\n                    </div>\n                    <div className=\"w-px h-12 bg-gradient-to-b from-transparent via-white/20 to-transparent\"></div>\n                    <div>\n                      <div className=\"text-[10px] text-muted-foreground uppercase tracking-widest mb-1\">Volume</div>\n                      <div className=\"text-2xl font-bold font-mono\" data-testid=\"text-volume\">\n                        ${parseFloat(volume).toLocaleString()}\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"flex gap-1 bg-white/5 p-1 rounded-lg\">\n                    {['1H', '1D', '1W', 'ALL'].map(t => (\n                      <Button \n                        key={t} \n                        variant=\"ghost\" \n                        size=\"sm\" \n                        className={`text-xs h-8 px-3 rounded-md transition-all ${t === timeframe ? 'bg-primary text-primary-foreground shadow-lg' : 'text-muted-foreground hover:text-foreground hover:bg-white/5'}`}\n                        onClick={() => setTimeframe(t)}\n                      >\n                        {t}\n                      </Button>\n                    ))}\n                  </div>\n                </div>\n              </div>\n              <div className=\"h-[280px] md:h-[320px] w-full p-2 md:p-4\">\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\n                  <AreaChart data={priceHistory} margin={{ top: 20, right: 10, left: 10, bottom: 10 }}>\n                    <defs>\n                      <linearGradient id=\"priceGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                        <stop offset=\"0%\" stopColor=\"hsl(var(--primary))\" stopOpacity={0.4}/>\n                        <stop offset=\"50%\" stopColor=\"hsl(var(--primary))\" stopOpacity={0.15}/>\n                        <stop offset=\"100%\" stopColor=\"hsl(var(--primary))\" stopOpacity={0}/>\n                      </linearGradient>\n                      <linearGradient id=\"lineGradient\" x1=\"0\" y1=\"0\" x2=\"1\" y2=\"0\">\n                        <stop offset=\"0%\" stopColor=\"hsl(160, 85%, 40%)\" />\n                        <stop offset=\"50%\" stopColor=\"hsl(var(--primary))\" />\n                        <stop offset=\"100%\" stopColor=\"hsl(270, 85%, 60%)\" />\n                      </linearGradient>\n                    </defs>\n                    <XAxis \n                      dataKey=\"time\" \n                      axisLine={false} \n                      tickLine={false} \n                      tick={{ fill: 'rgba(255,255,255,0.35)', fontSize: 10 }} \n                      dy={10}\n                      interval=\"preserveStartEnd\"\n                      tickCount={6}\n                    />\n                    <YAxis \n                      domain={[0.3, 0.9]} \n                      hide \n                    />\n                    <Tooltip content={<CustomTooltip />} cursor={{ stroke: 'hsl(var(--primary))', strokeWidth: 1, strokeDasharray: '4 4' }} />\n                    <Area \n                      type=\"monotone\" \n                      dataKey=\"price\" \n                      stroke=\"url(#lineGradient)\"\n                      strokeWidth={3} \n                      fill=\"url(#priceGradient)\"\n                      dot={false}\n                      activeDot={{ \n                        r: 6, \n                        fill: \"hsl(var(--primary))\", \n                        stroke: \"white\",\n                        strokeWidth: 2,\n                        className: \"drop-shadow-lg\"\n                      }}\n                    />\n                  </AreaChart>\n                </ResponsiveContainer>\n              </div>\n            </Card>\n\n            {/* Resolution Info Card */}\n            <Card className=\"bg-card/30 backdrop-blur-sm border-white/5\">\n              <CardHeader className=\"pb-2\">\n                <CardTitle className=\"text-base flex items-center gap-2\">\n                  <Gavel className=\"h-4 w-4 text-primary\" />\n                  Resolution Info\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"text-sm text-muted-foreground space-y-3\">\n                {isResolved ? (\n                  <div className=\"p-3 rounded-lg bg-monad-green/10 border border-monad-green/30\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <Badge className=\"bg-monad-green text-black\">RESOLVED</Badge>\n                      <span className=\"font-bold text-monad-green\">{market.outcome ? \"YES\" : \"NO\"}</span>\n                    </div>\n                    <p className=\"text-xs\">Target: {market.targetAsset.toUpperCase()} {market.priceAbove ? \"above\" : \"below\"} ${formatUsdc(market.targetPrice)}</p>\n                  </div>\n                ) : isPending ? (\n                  <div className=\"p-3 rounded-lg bg-yellow-500/10 border border-yellow-500/30 space-y-3\">\n                    <div className=\"flex items-center gap-2\">\n                      <Badge className=\"bg-yellow-500 text-black\">PENDING RESOLUTION</Badge>\n                    </div>\n                    <p className=\"text-xs\">\n                      {market.resolutionProposedBy !== \"0x0000000000000000000000000000000000000000\" \n                        ? `Outcome proposed. Challenge period ends ${formatDistanceToNow(new Date(Number(market.resolutionDeadline) * 1000), { addSuffix: true })}`\n                        : \"Anyone can propose the outcome by posting a bond\"\n                      }\n                    </p>\n                    {market.resolutionProposedBy !== \"0x0000000000000000000000000000000000000000\" && (\n                      <Button size=\"sm\" onClick={handleFinalize} disabled={loading} className=\"w-full\">\n                        Finalize Resolution\n                      </Button>\n                    )}\n                    {market.resolutionProposedBy === \"0x0000000000000000000000000000000000000000\" && (\n                      <Button size=\"sm\" onClick={handleProposeOutcome} disabled={loading} className=\"w-full\">\n                        Propose Outcome (Bond: ${formatUsdc(market.bondAmount)})\n                      </Button>\n                    )}\n                  </div>\n                ) : (\n                  <div className=\"p-3 rounded-lg bg-primary/10 border border-primary/20\">\n                    <div className=\"flex items-center gap-2 mb-1\">\n                      <Badge variant=\"outline\" className=\"border-primary/50 text-primary\">PERMISSIONLESS ORACLE</Badge>\n                    </div>\n                    <p className=\"text-xs\">\n                      Target: <span className=\"text-primary font-medium\">{market.targetAsset.toUpperCase()}</span> {market.priceAbove ? \"above\" : \"below\"} <span className=\"text-primary font-medium\">${formatUsdc(market.targetPrice)}</span>\n                    </p>\n                    <p className=\"text-xs mt-2\">\n                      After deadline, anyone can propose an outcome by posting a ${formatUsdc(market.bondAmount)} USDC bond.\n                      Wrong proposals can be challenged and bonds slashed.\n                    </p>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n\n            {/* User Position Card */}\n            {userHasPosition && (\n              <Card className=\"bg-gradient-to-br from-primary/10 to-monad-purple/10 border-primary/30\">\n                <CardHeader className=\"pb-2\">\n                  <CardTitle className=\"text-base flex items-center gap-2\">\n                    <Users className=\"h-4 w-4 text-primary\" />\n                    Your Position\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-3\">\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    {position!.yesShares > BigInt(0) && (\n                      <div className=\"p-3 rounded-lg bg-monad-green/10 border border-monad-green/30\">\n                        <div className=\"text-xs text-muted-foreground\">YES Shares</div>\n                        <div className=\"text-lg font-bold text-monad-green\">{formatUsdc(position!.yesShares)}</div>\n                      </div>\n                    )}\n                    {position!.noShares > BigInt(0) && (\n                      <div className=\"p-3 rounded-lg bg-monad-pink/10 border border-monad-pink/30\">\n                        <div className=\"text-xs text-muted-foreground\">NO Shares</div>\n                        <div className=\"text-lg font-bold text-monad-pink\">{formatUsdc(position!.noShares)}</div>\n                      </div>\n                    )}\n                  </div>\n                  {isResolved && !position!.claimed && (\n                    <Button onClick={handleClaim} disabled={loading} className=\"w-full bg-monad-green hover:bg-monad-green/90 text-black\">\n                      Claim Winnings\n                    </Button>\n                  )}\n                </CardContent>\n              </Card>\n            )}\n          </div>\n\n          <div className=\"lg:col-span-5 space-y-6\">\n            <Card className=\"bg-gradient-to-br from-card/90 via-card/70 to-card/50 backdrop-blur-xl border-primary/20 shadow-[0_0_60px_-15px_hsl(var(--primary)/0.3)] sticky top-20 overflow-hidden\">\n              <div className=\"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-monad-purple/5 pointer-events-none\"></div>\n              \n              {!isOpen ? (\n                <div className=\"p-6 text-center\">\n                  <div className={`inline-flex items-center gap-2 px-4 py-2 rounded-full ${isResolved ? \"bg-monad-green/20 text-monad-green\" : \"bg-yellow-500/20 text-yellow-500\"}`}>\n                    {isResolved ? <CheckCircle className=\"h-5 w-5\" /> : <Clock className=\"h-5 w-5\" />}\n                    <span className=\"font-bold\">{isResolved ? \"Market Resolved\" : \"Awaiting Resolution\"}</span>\n                  </div>\n                  {isResolved && (\n                    <p className=\"mt-4 text-lg font-bold\">\n                      Outcome: <span className={market.outcome ? \"text-monad-green\" : \"text-monad-pink\"}>{market.outcome ? \"YES\" : \"NO\"}</span>\n                    </p>\n                  )}\n                </div>\n              ) : (\n                <Tabs defaultValue=\"buy\" className=\"w-full relative\">\n                  <div className=\"px-4 pt-4\">\n                    <TabsList className=\"w-full bg-white/5 border border-white/10 h-12 p-1 rounded-xl\">\n                      <TabsTrigger \n                        value=\"buy\" \n                        className=\"flex-1 h-full rounded-lg font-semibold data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:shadow-lg transition-all\"\n                        data-testid=\"tab-buy\"\n                      >\n                        <ChevronUp className=\"h-4 w-4 mr-1\" />\n                        Buy\n                      </TabsTrigger>\n                      <TabsTrigger \n                        value=\"sell\" \n                        className=\"flex-1 h-full rounded-lg font-semibold data-[state=active]:bg-monad-pink data-[state=active]:text-white data-[state=active]:shadow-lg transition-all\"\n                        data-testid=\"tab-sell\"\n                        disabled\n                      >\n                        <ChevronDown className=\"h-4 w-4 mr-1\" />\n                        Sell\n                      </TabsTrigger>\n                    </TabsList>\n                  </div>\n                  \n                  <div className=\"p-4 md:p-5 space-y-5\">\n                    <div className=\"grid grid-cols-2 gap-3\">\n                      <button \n                        className={`relative h-16 md:h-20 rounded-2xl font-bold text-xl border-2 transition-all duration-300 overflow-hidden group ${\n                          selectedOption === \"YES\" \n                            ? 'bg-gradient-to-br from-monad-green/30 to-monad-green/10 border-monad-green text-monad-green shadow-[0_0_30px_-5px_hsl(160,85%,45%/0.5)]' \n                            : 'bg-white/5 border-white/10 text-muted-foreground hover:border-monad-green/50 hover:bg-monad-green/10'\n                        }`}\n                        onClick={() => setSelectedOption(\"YES\")}\n                        data-testid=\"button-yes\"\n                      >\n                        <div className=\"absolute inset-0 bg-gradient-to-t from-monad-green/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity\"></div>\n                        <div className=\"relative flex flex-col items-center justify-center\">\n                          <span className=\"text-2xl md:text-3xl font-bold\">{Math.round(yesPrice * 100)}</span>\n                          <span className=\"text-xs uppercase tracking-wider opacity-70\">Yes</span>\n                        </div>\n                      </button>\n                      <button \n                        className={`relative h-16 md:h-20 rounded-2xl font-bold text-xl border-2 transition-all duration-300 overflow-hidden group ${\n                          selectedOption === \"NO\" \n                            ? 'bg-gradient-to-br from-monad-pink/30 to-monad-pink/10 border-monad-pink text-monad-pink shadow-[0_0_30px_-5px_hsl(330,85%,55%/0.5)]' \n                            : 'bg-white/5 border-white/10 text-muted-foreground hover:border-monad-pink/50 hover:bg-monad-pink/10'\n                        }`}\n                        onClick={() => setSelectedOption(\"NO\")}\n                        data-testid=\"button-no\"\n                      >\n                        <div className=\"absolute inset-0 bg-gradient-to-t from-monad-pink/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity\"></div>\n                        <div className=\"relative flex flex-col items-center justify-center\">\n                          <span className=\"text-2xl md:text-3xl font-bold\">{Math.round(noPrice * 100)}</span>\n                          <span className=\"text-xs uppercase tracking-wider opacity-70\">No</span>\n                        </div>\n                      </button>\n                    </div>\n\n                    <div className=\"space-y-2\">\n                      <div className=\"flex justify-between text-xs\">\n                        <span className=\"text-muted-foreground\">Amount (USDC)</span>\n                        <span className=\"text-primary font-medium\" data-testid=\"text-balance\">\n                          Balance: {parseFloat(contractBalance).toFixed(2)} USDC\n                        </span>\n                      </div>\n                      <div className=\"relative\">\n                        <span className=\"absolute left-4 top-1/2 -translate-y-1/2 text-xl text-muted-foreground font-bold\">$</span>\n                        <Input \n                          type=\"number\" \n                          value={amount} \n                          onChange={(e) => setAmount(e.target.value)}\n                          className=\"pl-9 h-14 text-2xl font-mono font-bold bg-white/5 border-white/10 rounded-xl focus:border-primary/50 focus:ring-primary/20\"\n                          data-testid=\"input-amount\"\n                        />\n                      </div>\n                      <div className=\"flex gap-2\">\n                        {[10, 50, 100, 500].map((val) => (\n                          <Button\n                            key={val}\n                            variant=\"outline\"\n                            size=\"sm\"\n                            className=\"flex-1 h-8 text-xs bg-white/5 border-white/10 hover:bg-primary/20 hover:border-primary/30 hover:text-primary\"\n                            onClick={() => setAmount(val.toString())}\n                          >\n                            ${val}\n                          </Button>\n                        ))}\n                      </div>\n                    </div>\n\n                    <div className=\"p-4 rounded-xl bg-gradient-to-br from-white/5 to-white/[0.02] border border-white/5 space-y-3\">\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-sm text-muted-foreground\">Avg. Price</span>\n                        <span className=\"font-mono font-bold text-lg\" data-testid=\"text-avg-price\">\n                          {(currentPrice * 100).toFixed(0)}\n                        </span>\n                      </div>\n                      <div className=\"h-px bg-gradient-to-r from-transparent via-white/10 to-transparent\"></div>\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-sm text-muted-foreground\">Est. Shares</span>\n                        <span className=\"font-mono font-bold text-lg\" data-testid=\"text-shares\">\n                          {potentialPayout.toFixed(2)}\n                        </span>\n                      </div>\n                      <div className=\"h-px bg-gradient-to-r from-transparent via-white/10 to-transparent\"></div>\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-sm text-muted-foreground\">Potential Profit</span>\n                        <div className=\"flex items-center gap-2\">\n                          <span className=\"font-mono font-bold text-lg text-monad-green\" data-testid=\"text-potential-return\">\n                            +${profit.toFixed(2)}\n                          </span>\n                          <Badge className={`${selectedOption === \"YES\" ? 'bg-monad-green/20 text-monad-green' : 'bg-monad-pink/20 text-monad-pink'} font-mono`}>\n                            {returnPercentage}%\n                          </Badge>\n                        </div>\n                      </div>\n                    </div>\n\n                    <Button \n                      className={`w-full h-14 text-lg font-bold rounded-xl transition-all duration-300 shadow-lg ${\n                        selectedOption === \"YES\" \n                          ? 'bg-gradient-to-r from-monad-green to-emerald-500 hover:from-monad-green/90 hover:to-emerald-500/90 text-black shadow-monad-green/25' \n                          : 'bg-gradient-to-r from-monad-pink to-rose-500 hover:from-monad-pink/90 hover:to-rose-500/90 text-white shadow-monad-pink/25'\n                      } hover:scale-[1.02] active:scale-[0.98]`}\n                      onClick={handleBuy}\n                      disabled={loading}\n                      data-testid=\"button-place-bet\"\n                    >\n                      {loading ? (\n                        <Loader2 className=\"h-5 w-5 animate-spin\" />\n                      ) : !isConnected ? (\n                        <>\n                          <Zap className=\"mr-2 h-5 w-5\" /> Connect Wallet\n                        </>\n                      ) : (\n                        <>\n                          <Zap className=\"mr-2 h-5 w-5\" /> Buy {selectedOption}\n                        </>\n                      )}\n                    </Button>\n\n                    {!isConnected && (\n                      <p className=\"text-xs text-center text-muted-foreground\">\n                        Connect wallet and deposit USDC to trade\n                      </p>\n                    )}\n                  </div>\n                </Tabs>\n              )}\n            </Card>\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n}\n","path":null,"size_bytes":28489,"size_tokens":null},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","path":null,"size_bytes":1383,"size_tokens":null},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","path":null,"size_bytes":768,"size_tokens":null},"client/src/components/ui/hover-card.tsx":{"content":"import * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","path":null,"size_bytes":1237,"size_tokens":null},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationLink,\n  PaginationItem,\n  PaginationPrevious,\n  PaginationNext,\n  PaginationEllipsis,\n}\n","path":null,"size_bytes":2751,"size_tokens":null},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport { placeBetSchema, insertEventSchema } from \"@shared/schema\";\nimport { resolveEvent, checkAndResolveExpiredEvents, getCryptoPrice, startResolutionCron } from \"./resolution\";\n\nexport async function registerRoutes(\n  httpServer: Server,\n  app: Express\n): Promise<Server> {\n\n  // ============ EVENTS ============\n  \n  // Get all events\n  app.get(\"/api/events\", async (req, res) => {\n    try {\n      const events = await storage.getAllEvents();\n      res.json(events);\n    } catch (error) {\n      console.error(\"Error fetching events:\", error);\n      res.status(500).json({ error: \"Failed to fetch events\" });\n    }\n  });\n\n  // Get single event\n  app.get(\"/api/events/:id\", async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const event = await storage.getEvent(id);\n      if (!event) {\n        return res.status(404).json({ error: \"Event not found\" });\n      }\n      res.json(event);\n    } catch (error) {\n      console.error(\"Error fetching event:\", error);\n      res.status(500).json({ error: \"Failed to fetch event\" });\n    }\n  });\n\n  // Create event\n  app.post(\"/api/events\", async (req, res) => {\n    try {\n      const parsed = insertEventSchema.safeParse(req.body);\n      if (!parsed.success) {\n        return res.status(400).json({ error: parsed.error.errors });\n      }\n      \n      const data = parsed.data;\n      \n      // Validate crypto events have required resolution fields\n      if (data.category === \"Crypto\") {\n        if (!data.targetAsset || !data.targetPrice || !data.priceCondition) {\n          return res.status(400).json({ \n            error: \"Crypto events require targetAsset, targetPrice, and priceCondition for auto-resolution\" \n          });\n        }\n        // Ensure resolution source is set\n        data.resolutionSource = \"coingecko\";\n      }\n      \n      const event = await storage.createEvent(data);\n      res.status(201).json(event);\n    } catch (error) {\n      console.error(\"Error creating event:\", error);\n      res.status(500).json({ error: \"Failed to create event\" });\n    }\n  });\n\n  // ============ USERS ============\n\n  // Get or create user by wallet\n  app.post(\"/api/users/connect\", async (req, res) => {\n    try {\n      const { walletAddress } = req.body;\n      if (!walletAddress) {\n        return res.status(400).json({ error: \"Wallet address required\" });\n      }\n      \n      let user = await storage.getUserByWallet(walletAddress);\n      if (!user) {\n        user = await storage.createUser(walletAddress);\n      }\n      res.json(user);\n    } catch (error) {\n      console.error(\"Error connecting user:\", error);\n      res.status(500).json({ error: \"Failed to connect user\" });\n    }\n  });\n\n  // Get user by wallet\n  app.get(\"/api/users/:walletAddress\", async (req, res) => {\n    try {\n      const user = await storage.getUserByWallet(req.params.walletAddress);\n      if (!user) {\n        return res.status(404).json({ error: \"User not found\" });\n      }\n      res.json(user);\n    } catch (error) {\n      console.error(\"Error fetching user:\", error);\n      res.status(500).json({ error: \"Failed to fetch user\" });\n    }\n  });\n\n  // ============ BETS ============\n\n  // Place a bet\n  app.post(\"/api/bets\", async (req, res) => {\n    try {\n      const parsed = placeBetSchema.safeParse(req.body);\n      if (!parsed.success) {\n        return res.status(400).json({ error: parsed.error.errors });\n      }\n\n      const { walletAddress, eventId, option, amount } = parsed.data;\n\n      // Get or create user\n      let user = await storage.getUserByWallet(walletAddress);\n      if (!user) {\n        user = await storage.createUser(walletAddress);\n      }\n\n      // Check balance\n      const userBalance = parseFloat(user.balance);\n      if (userBalance < amount) {\n        return res.status(400).json({ error: \"Insufficient balance\" });\n      }\n\n      // Get event\n      const event = await storage.getEvent(eventId);\n      if (!event) {\n        return res.status(404).json({ error: \"Event not found\" });\n      }\n      if (event.resolved) {\n        return res.status(400).json({ error: \"Event already resolved\" });\n      }\n\n      // Calculate shares and price\n      const price = option === \"YES\" ? parseFloat(event.yesPrice) : parseFloat(event.noPrice);\n      const shares = amount / price;\n\n      // Update user balance\n      const newBalance = (userBalance - amount).toFixed(2);\n      await storage.updateUserBalance(user.id, newBalance);\n\n      // Place bet\n      const bet = await storage.placeBet(\n        user.id,\n        eventId,\n        option,\n        amount.toFixed(2),\n        shares.toFixed(4),\n        price.toFixed(4)\n      );\n\n      // Update event volume and prices (simple AMM simulation)\n      const newVolume = (parseFloat(event.volume) + amount).toFixed(2);\n      const newPoolSize = (parseFloat(event.poolSize) + amount).toFixed(2);\n      \n      // Adjust prices based on betting (simplified)\n      const totalPool = parseFloat(newPoolSize);\n      const yesAdjustment = option === \"YES\" ? 0.01 : -0.01;\n      const newYesPrice = Math.max(0.05, Math.min(0.95, parseFloat(event.yesPrice) + yesAdjustment)).toFixed(4);\n      const newNoPrice = (1 - parseFloat(newYesPrice)).toFixed(4);\n\n      await storage.updateEventPrices(eventId, newYesPrice, newNoPrice, newVolume, newPoolSize);\n\n      res.status(201).json({ bet, newBalance });\n    } catch (error) {\n      console.error(\"Error placing bet:\", error);\n      res.status(500).json({ error: \"Failed to place bet\" });\n    }\n  });\n\n  // Get user's bets\n  app.get(\"/api/bets/user/:walletAddress\", async (req, res) => {\n    try {\n      const user = await storage.getUserByWallet(req.params.walletAddress);\n      if (!user) {\n        return res.status(404).json({ error: \"User not found\" });\n      }\n      const bets = await storage.getUserBets(user.id);\n      res.json(bets);\n    } catch (error) {\n      console.error(\"Error fetching user bets:\", error);\n      res.status(500).json({ error: \"Failed to fetch bets\" });\n    }\n  });\n\n  // ============ LEADERBOARD ============\n\n  app.get(\"/api/leaderboard\", async (req, res) => {\n    try {\n      const limit = parseInt(req.query.limit as string) || 10;\n      const leaderboard = await storage.getLeaderboard(limit);\n      res.json(leaderboard);\n    } catch (error) {\n      console.error(\"Error fetching leaderboard:\", error);\n      res.status(500).json({ error: \"Failed to fetch leaderboard\" });\n    }\n  });\n\n  // ============ RESOLUTION ============\n\n  // Get current crypto prices\n  app.get(\"/api/prices/:asset\", async (req, res) => {\n    try {\n      const price = await getCryptoPrice(req.params.asset);\n      if (price === null) {\n        return res.status(404).json({ error: \"Asset not found or API error\" });\n      }\n      res.json({ asset: req.params.asset, price, timestamp: new Date().toISOString() });\n    } catch (error) {\n      console.error(\"Error fetching price:\", error);\n      res.status(500).json({ error: \"Failed to fetch price\" });\n    }\n  });\n\n  // Manually trigger resolution check\n  app.post(\"/api/resolution/check\", async (req, res) => {\n    try {\n      const count = await checkAndResolveExpiredEvents();\n      res.json({ message: `Checked and resolved ${count} events`, resolved: count });\n    } catch (error) {\n      console.error(\"Error checking resolution:\", error);\n      res.status(500).json({ error: \"Failed to check resolution\" });\n    }\n  });\n\n  // Resolve a specific event\n  app.post(\"/api/events/:id/resolve\", async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const success = await resolveEvent(id);\n      if (success) {\n        const event = await storage.getEvent(id);\n        res.json({ message: \"Event resolved\", event });\n      } else {\n        res.status(400).json({ error: \"Could not resolve event (may need manual data or already resolved)\" });\n      }\n    } catch (error) {\n      console.error(\"Error resolving event:\", error);\n      res.status(500).json({ error: \"Failed to resolve event\" });\n    }\n  });\n\n  // Start the resolution cron job (checks every 5 minutes)\n  startResolutionCron(5);\n\n  return httpServer;\n}\n","path":null,"size_bytes":8206,"size_tokens":null},"client/src/pages/CreateEvent.tsx":{"content":"import { Navbar } from \"@/components/layout/Navbar\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Input } from \"@/components/ui/input\";\nimport { ArrowLeft, Loader2, AlertCircle, Coins } from \"lucide-react\";\nimport logoImage from \"@assets/generated_images/monad_crypto_prediction_market_logo_abstract.png\";\nimport { Link, useLocation } from \"wouter\";\nimport { useState, useEffect } from \"react\";\nimport { useContract } from \"@/hooks/useContract\";\nimport { useConnectModal } from \"@rainbow-me/rainbowkit\";\nimport { toast } from \"sonner\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\n\nconst CATEGORIES = [\"Crypto\", \"Sports\", \"Politics\", \"Pop Culture\", \"Science\", \"Other\"];\n\nconst CRYPTO_ASSETS = [\n  { id: \"bitcoin\", name: \"Bitcoin\", symbol: \"BTC\" },\n  { id: \"ethereum\", name: \"Ethereum\", symbol: \"ETH\" },\n  { id: \"solana\", name: \"Solana\", symbol: \"SOL\" },\n  { id: \"monad\", name: \"Monad\", symbol: \"MON\" },\n  { id: \"dogecoin\", name: \"Dogecoin\", symbol: \"DOGE\" },\n  { id: \"cardano\", name: \"Cardano\", symbol: \"ADA\" },\n  { id: \"ripple\", name: \"XRP\", symbol: \"XRP\" },\n  { id: \"polkadot\", name: \"Polkadot\", symbol: \"DOT\" },\n  { id: \"avalanche-2\", name: \"Avalanche\", symbol: \"AVAX\" },\n  { id: \"chainlink\", name: \"Chainlink\", symbol: \"LINK\" },\n];\n\nexport default function CreateEvent() {\n  const [, navigate] = useLocation();\n  const { isConnected, address, createMarket, getContractBalance, loading, error } = useContract();\n  const { openConnectModal } = useConnectModal();\n\n  const [category, setCategory] = useState(\"Crypto\");\n  const [question, setQuestion] = useState(\"\");\n  const [deadline, setDeadline] = useState(\"\");\n  const [targetAsset, setTargetAsset] = useState(\"\");\n  const [targetPrice, setTargetPrice] = useState(\"\");\n  const [priceCondition, setPriceCondition] = useState(\"above\");\n  const [contractBalance, setContractBalance] = useState(\"0\");\n\n  useEffect(() => {\n    const loadBalance = async () => {\n      if (address) {\n        const bal = await getContractBalance();\n        setContractBalance(bal);\n      }\n    };\n    loadBalance();\n  }, [address]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!isConnected) {\n      openConnectModal?.();\n      return;\n    }\n\n    if (!question || !deadline) {\n      toast.error(\"Please fill in all required fields\");\n      return;\n    }\n\n    if (category === \"Crypto\" && (!targetAsset || !targetPrice)) {\n      toast.error(\"Please select an asset and target price for crypto markets\");\n      return;\n    }\n\n    const deadlineTimestamp = Math.floor(new Date(deadline).getTime() / 1000);\n    const now = Math.floor(Date.now() / 1000);\n    \n    if (deadlineTimestamp <= now) {\n      toast.error(\"Deadline must be in the future\");\n      return;\n    }\n\n    const toastId = toast.loading(\"Creating market on-chain...\");\n    \n    const marketId = await createMarket(\n      question,\n      category,\n      deadlineTimestamp,\n      category === \"Crypto\" ? targetAsset : \"\",\n      category === \"Crypto\" ? targetPrice : \"0\",\n      priceCondition === \"above\"\n    );\n\n    toast.dismiss(toastId);\n\n    if (marketId !== null) {\n      toast.success(\"Market created on-chain!\");\n      navigate(`/event/${marketId}`);\n    } else if (error) {\n      toast.error(error);\n    }\n  };\n\n  const minDate = new Date();\n  minDate.setDate(minDate.getDate() + 1);\n  const minDateStr = minDate.toISOString().split(\"T\")[0];\n\n  const selectedAsset = CRYPTO_ASSETS.find(a => a.id === targetAsset);\n\n  return (\n    <div className=\"min-h-screen bg-background bg-grid-pattern font-sans selection:bg-primary/30\">\n      <Navbar />\n\n      <main className=\"container mx-auto px-4 py-8 max-w-2xl\">\n        <div className=\"mb-6\">\n          <Link href=\"/markets\">\n            <Button variant=\"ghost\" className=\"pl-0 hover:bg-transparent hover:text-primary\" data-testid=\"button-back\">\n              <ArrowLeft className=\"mr-2 h-4 w-4\" /> Back to Markets\n            </Button>\n          </Link>\n        </div>\n\n        <Card className=\"bg-card/50 backdrop-blur-md border-primary/20 shadow-xl\">\n          <CardHeader className=\"text-center pb-2\">\n            <div className=\"mx-auto w-20 h-20 rounded-2xl bg-gradient-to-br from-monad-purple/20 to-primary/20 p-1 mb-4 shadow-lg shadow-primary/20\">\n              <img \n                src={logoImage} \n                alt=\"Create Market\" \n                className=\"w-full h-full rounded-xl object-cover\"\n              />\n            </div>\n            <CardTitle className=\"text-2xl font-bold\">Create Prediction Market</CardTitle>\n            <CardDescription className=\"text-muted-foreground\">\n              Launch a fully on-chain market with permissionless resolution\n            </CardDescription>\n          </CardHeader>\n\n          <CardContent className=\"pt-6\">\n            {isConnected && (\n              <div className=\"mb-6 p-3 rounded-lg bg-primary/10 border border-primary/20 flex items-center justify-between\">\n                <div className=\"flex items-center gap-2\">\n                  <Coins className=\"h-4 w-4 text-primary\" />\n                  <span className=\"text-sm\">Contract Balance</span>\n                </div>\n                <span className=\"font-mono font-bold\">${parseFloat(contractBalance).toFixed(2)} USDC</span>\n              </div>\n            )}\n\n            <form onSubmit={handleSubmit} className=\"space-y-6\">\n              <div className=\"space-y-2\">\n                <Label>Category</Label>\n                <Select value={category} onValueChange={setCategory}>\n                  <SelectTrigger className=\"bg-secondary/30 border-border h-12\" data-testid=\"select-category\">\n                    <SelectValue placeholder=\"Select category\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {CATEGORIES.map((cat) => (\n                      <SelectItem key={cat} value={cat}>\n                        {cat}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"question\">Prediction Question</Label>\n                <Textarea\n                  id=\"question\"\n                  placeholder={category === \"Crypto\" \n                    ? \"Will Bitcoin reach $100k before the deadline?\" \n                    : category === \"Sports\" \n                    ? \"Will the Lakers win the NBA Championship?\"\n                    : category === \"Politics\"\n                    ? \"Will candidate X win the election?\"\n                    : \"Will this event happen by the deadline?\"}\n                  value={question}\n                  onChange={(e) => setQuestion(e.target.value)}\n                  className=\"min-h-[100px] bg-secondary/30 border-border resize-none\"\n                  data-testid=\"input-question\"\n                />\n                <p className=\"text-xs text-muted-foreground\">\n                  {category === \"Crypto\" \n                    ? \"Clear YES/NO question. Resolution based on price at deadline.\" \n                    : \"Clear YES/NO question. Resolved via permissionless oracle after deadline.\"}\n                </p>\n              </div>\n\n              {category === \"Crypto\" && (\n                <div className=\"space-y-4 p-4 rounded-lg bg-primary/5 border border-primary/20\">\n                  <p className=\"text-sm text-primary font-medium\">Price Target Settings</p>\n                  \n                  <div className=\"space-y-2\">\n                    <Label>Asset</Label>\n                    <Select value={targetAsset} onValueChange={setTargetAsset}>\n                      <SelectTrigger className=\"bg-secondary/30 border-border h-12\" data-testid=\"select-asset\">\n                        <SelectValue placeholder=\"Select cryptocurrency\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        {CRYPTO_ASSETS.map((asset) => (\n                          <SelectItem key={asset.id} value={asset.id}>\n                            {asset.name} ({asset.symbol})\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  </div>\n\n                  <div className=\"grid grid-cols-2 gap-3\">\n                    <div className=\"space-y-2\">\n                      <Label>Condition</Label>\n                      <Select value={priceCondition} onValueChange={setPriceCondition}>\n                        <SelectTrigger className=\"bg-secondary/30 border-border h-12\" data-testid=\"select-condition\">\n                          <SelectValue />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"above\">Above</SelectItem>\n                          <SelectItem value=\"below\">Below</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label>Target Price ($)</Label>\n                      <Input\n                        type=\"number\"\n                        placeholder=\"100000\"\n                        value={targetPrice}\n                        onChange={(e) => setTargetPrice(e.target.value)}\n                        className=\"bg-secondary/30 border-border h-12\"\n                        data-testid=\"input-target-price\"\n                      />\n                    </div>\n                  </div>\n                  \n                  {targetAsset && targetPrice && (\n                    <div className=\"p-3 rounded-lg bg-monad-green/10 border border-monad-green/30\">\n                      <p className=\"text-xs text-monad-green font-medium\">\n                        Resolves YES if {selectedAsset?.symbol || targetAsset.toUpperCase()} is {priceCondition} ${parseFloat(targetPrice).toLocaleString()} at deadline\n                      </p>\n                    </div>\n                  )}\n                </div>\n              )}\n\n              {category !== \"Crypto\" && (\n                <div className=\"p-4 rounded-lg bg-monad-purple/10 border border-monad-purple/30\">\n                  <p className=\"text-sm text-monad-purple font-medium mb-2\">Permissionless Resolution</p>\n                  <p className=\"text-xs text-muted-foreground\">\n                    After the deadline, anyone can propose the outcome by posting a bond. \n                    Others can challenge incorrect proposals. Final outcome is determined by consensus.\n                  </p>\n                </div>\n              )}\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"deadline\">Resolution Deadline</Label>\n                <input\n                  id=\"deadline\"\n                  type=\"date\"\n                  min={minDateStr}\n                  value={deadline}\n                  onChange={(e) => setDeadline(e.target.value)}\n                  className=\"flex w-full rounded-md border border-border bg-secondary/30 px-3 py-3 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 text-foreground appearance-none\"\n                  style={{ colorScheme: 'dark' }}\n                  data-testid=\"input-deadline\"\n                />\n                <p className=\"text-xs text-muted-foreground\">\n                  After this date, anyone can propose the outcome\n                </p>\n              </div>\n\n              <Button\n                type=\"submit\"\n                className=\"w-full h-12 text-lg font-bold bg-gradient-to-r from-monad-purple to-primary hover:opacity-90\"\n                disabled={loading}\n                data-testid=\"button-create\"\n              >\n                {loading ? (\n                  <Loader2 className=\"h-5 w-5 animate-spin\" />\n                ) : !isConnected ? (\n                  \"Connect Wallet to Create\"\n                ) : (\n                  \"Create Market On-Chain\"\n                )}\n              </Button>\n\n              <div className=\"text-xs text-center text-muted-foreground space-y-1\">\n                <div className=\"flex items-center justify-center gap-1\">\n                  <AlertCircle className=\"h-3 w-3\" />\n                  Markets are fully trustless with permissionless resolution\n                </div>\n                <p>Anyone can propose outcomes by posting a bond. Wrong proposals get slashed.</p>\n              </div>\n            </form>\n          </CardContent>\n        </Card>\n      </main>\n    </div>\n  );\n}\n","path":null,"size_bytes":12947,"size_tokens":null},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","path":null,"size_bytes":329,"size_tokens":null},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Portal>\n    <TooltipPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </TooltipPrimitive.Portal>\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","path":null,"size_bytes":1267,"size_tokens":null},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverAnchor = PopoverPrimitive.Anchor\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent, PopoverAnchor }\n","path":null,"size_bytes":1342,"size_tokens":null},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":711,"size_tokens":null},"shared/schema.ts":{"content":"import { sql } from \"drizzle-orm\";\nimport { pgTable, text, integer, timestamp, boolean, decimal, serial, varchar } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\nexport const users = pgTable(\"users\", {\n  id: serial(\"id\").primaryKey(),\n  walletAddress: text(\"wallet_address\").notNull().unique(),\n  balance: decimal(\"balance\", { precision: 18, scale: 2 }).notNull().default(\"0.00\"),\n  totalProfit: decimal(\"total_profit\", { precision: 18, scale: 2 }).notNull().default(\"0.00\"),\n  totalVolume: decimal(\"total_volume\", { precision: 18, scale: 2 }).notNull().default(\"0.00\"),\n  winRate: decimal(\"win_rate\", { precision: 5, scale: 2 }).notNull().default(\"0.00\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\nexport const events = pgTable(\"events\", {\n  id: serial(\"id\").primaryKey(),\n  question: text(\"question\").notNull(),\n  category: text(\"category\").notNull(),\n  deadline: timestamp(\"deadline\").notNull(),\n  resolved: boolean(\"resolved\").notNull().default(false),\n  outcome: text(\"outcome\"),\n  yesPrice: decimal(\"yes_price\", { precision: 5, scale: 4 }).notNull().default(\"0.5000\"),\n  noPrice: decimal(\"no_price\", { precision: 5, scale: 4 }).notNull().default(\"0.5000\"),\n  volume: decimal(\"volume\", { precision: 18, scale: 2 }).notNull().default(\"0.00\"),\n  poolSize: decimal(\"pool_size\", { precision: 18, scale: 2 }).notNull().default(\"0.00\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  // Creator info\n  creatorAddress: text(\"creator_address\"),\n  creatorFee: decimal(\"creator_fee\", { precision: 5, scale: 2 }).notNull().default(\"2.00\"), // 2% default\n  // Resolution metadata\n  resolutionSource: text(\"resolution_source\"), // \"coingecko\", \"sports_api\", \"news_api\", \"ai_verified\"\n  resolutionProof: text(\"resolution_proof\"), // JSON with API response/proof data\n  resolvedBy: text(\"resolved_by\"), // \"system\" for automated\n  resolvedAt: timestamp(\"resolved_at\"),\n  // For crypto price events\n  targetAsset: text(\"target_asset\"), // \"bitcoin\", \"ethereum\", \"solana\", \"monad\"\n  targetPrice: decimal(\"target_price\", { precision: 18, scale: 2 }),\n  priceCondition: text(\"price_condition\"), // \"above\", \"below\"\n  // For sports events\n  sportType: text(\"sport_type\"), // \"basketball\", \"football\", \"soccer\"\n  teamA: text(\"team_a\"),\n  teamB: text(\"team_b\"),\n  gameId: text(\"game_id\"), // external API game ID\n});\n\nexport const bets = pgTable(\"bets\", {\n  id: serial(\"id\").primaryKey(),\n  userId: integer(\"user_id\").notNull().references(() => users.id),\n  eventId: integer(\"event_id\").notNull().references(() => events.id),\n  option: text(\"option\").notNull(),\n  amount: decimal(\"amount\", { precision: 18, scale: 2 }).notNull(),\n  shares: decimal(\"shares\", { precision: 18, scale: 4 }).notNull(),\n  avgPrice: decimal(\"avg_price\", { precision: 5, scale: 4 }).notNull(),\n  settled: boolean(\"settled\").notNull().default(false),\n  payout: decimal(\"payout\", { precision: 18, scale: 2 }),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\nexport const insertUserSchema = createInsertSchema(users).omit({\n  id: true,\n  createdAt: true,\n  balance: true,\n  totalProfit: true,\n  totalVolume: true,\n  winRate: true,\n});\n\nexport const insertEventSchema = createInsertSchema(events).omit({\n  id: true,\n  createdAt: true,\n  resolved: true,\n  outcome: true,\n  volume: true,\n  poolSize: true,\n});\n\nexport const insertBetSchema = createInsertSchema(bets).omit({\n  id: true,\n  createdAt: true,\n  settled: true,\n  payout: true,\n});\n\nexport const placeBetSchema = z.object({\n  walletAddress: z.string().min(1),\n  eventId: z.number(),\n  option: z.enum([\"YES\", \"NO\"]),\n  amount: z.number().positive(),\n});\n\nexport type User = typeof users.$inferSelect;\nexport type InsertUser = z.infer<typeof insertUserSchema>;\n\nexport type Event = typeof events.$inferSelect;\nexport type InsertEvent = z.infer<typeof insertEventSchema>;\n\nexport type Bet = typeof bets.$inferSelect;\nexport type InsertBet = z.infer<typeof insertBetSchema>;\nexport type PlaceBetInput = z.infer<typeof placeBetSchema>;\n","path":null,"size_bytes":4059,"size_tokens":null},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","path":null,"size_bytes":6210,"size_tokens":null},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","path":null,"size_bytes":772,"size_tokens":null},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"grid place-content-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","path":null,"size_bytes":1031,"size_tokens":null},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","path":null,"size_bytes":166,"size_tokens":null},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","path":null,"size_bytes":649,"size_tokens":null},"client/src/components/ui/input-group.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Textarea } from \"@/components/ui/textarea\"\n\nfunction InputGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"input-group\"\n      role=\"group\"\n      className={cn(\n        \"group/input-group border-input dark:bg-input/30 shadow-xs relative flex w-full items-center rounded-md border outline-none transition-[color,box-shadow]\",\n        \"h-9 has-[>textarea]:h-auto\",\n\n        // Variants based on alignment.\n        \"has-[>[data-align=inline-start]]:[&>input]:pl-2\",\n        \"has-[>[data-align=inline-end]]:[&>input]:pr-2\",\n        \"has-[>[data-align=block-start]]:h-auto has-[>[data-align=block-start]]:flex-col has-[>[data-align=block-start]]:[&>input]:pb-3\",\n        \"has-[>[data-align=block-end]]:h-auto has-[>[data-align=block-end]]:flex-col has-[>[data-align=block-end]]:[&>input]:pt-3\",\n\n        // Focus state.\n        \"has-[[data-slot=input-group-control]:focus-visible]:ring-ring has-[[data-slot=input-group-control]:focus-visible]:ring-1\",\n\n        // Error state.\n        \"has-[[data-slot][aria-invalid=true]]:ring-destructive/20 has-[[data-slot][aria-invalid=true]]:border-destructive dark:has-[[data-slot][aria-invalid=true]]:ring-destructive/40\",\n\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nconst inputGroupAddonVariants = cva(\n  \"text-muted-foreground flex h-auto cursor-text select-none items-center justify-center gap-2 py-1.5 text-sm font-medium group-data-[disabled=true]/input-group:opacity-50 [&>kbd]:rounded-[calc(var(--radius)-5px)] [&>svg:not([class*='size-'])]:size-4\",\n  {\n    variants: {\n      align: {\n        \"inline-start\":\n          \"order-first pl-3 has-[>button]:ml-[-0.45rem] has-[>kbd]:ml-[-0.35rem]\",\n        \"inline-end\":\n          \"order-last pr-3 has-[>button]:mr-[-0.4rem] has-[>kbd]:mr-[-0.35rem]\",\n        \"block-start\":\n          \"[.border-b]:pb-3 order-first w-full justify-start px-3 pt-3 group-has-[>input]/input-group:pt-2.5\",\n        \"block-end\":\n          \"[.border-t]:pt-3 order-last w-full justify-start px-3 pb-3 group-has-[>input]/input-group:pb-2.5\",\n      },\n    },\n    defaultVariants: {\n      align: \"inline-start\",\n    },\n  }\n)\n\nfunction InputGroupAddon({\n  className,\n  align = \"inline-start\",\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof inputGroupAddonVariants>) {\n  return (\n    <div\n      role=\"group\"\n      data-slot=\"input-group-addon\"\n      data-align={align}\n      className={cn(inputGroupAddonVariants({ align }), className)}\n      onClick={(e) => {\n        if ((e.target as HTMLElement).closest(\"button\")) {\n          return\n        }\n        e.currentTarget.parentElement?.querySelector(\"input\")?.focus()\n      }}\n      {...props}\n    />\n  )\n}\n\nconst inputGroupButtonVariants = cva(\n  \"flex items-center gap-2 text-sm shadow-none\",\n  {\n    variants: {\n      size: {\n        xs: \"h-6 gap-1 rounded-[calc(var(--radius)-5px)] px-2 has-[>svg]:px-2 [&>svg:not([class*='size-'])]:size-3.5\",\n        sm: \"h-8 gap-1.5 rounded-md px-2.5 has-[>svg]:px-2.5\",\n        \"icon-xs\":\n          \"size-6 rounded-[calc(var(--radius)-5px)] p-0 has-[>svg]:p-0\",\n        \"icon-sm\": \"size-8 p-0 has-[>svg]:p-0\",\n      },\n    },\n    defaultVariants: {\n      size: \"xs\",\n    },\n  }\n)\n\nfunction InputGroupButton({\n  className,\n  type = \"button\",\n  variant = \"ghost\",\n  size = \"xs\",\n  ...props\n}: Omit<React.ComponentProps<typeof Button>, \"size\"> &\n  VariantProps<typeof inputGroupButtonVariants>) {\n  return (\n    <Button\n      type={type}\n      data-size={size}\n      variant={variant}\n      className={cn(inputGroupButtonVariants({ size }), className)}\n      {...props}\n    />\n  )\n}\n\nfunction InputGroupText({ className, ...props }: React.ComponentProps<\"span\">) {\n  return (\n    <span\n      className={cn(\n        \"text-muted-foreground flex items-center gap-2 text-sm [&_svg:not([class*='size-'])]:size-4 [&_svg]:pointer-events-none\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction InputGroupInput({\n  className,\n  ...props\n}: React.ComponentProps<\"input\">) {\n  return (\n    <Input\n      data-slot=\"input-group-control\"\n      className={cn(\n        \"flex-1 rounded-none border-0 bg-transparent shadow-none focus-visible:ring-0 dark:bg-transparent\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction InputGroupTextarea({\n  className,\n  ...props\n}: React.ComponentProps<\"textarea\">) {\n  return (\n    <Textarea\n      data-slot=\"input-group-control\"\n      className={cn(\n        \"flex-1 resize-none rounded-none border-0 bg-transparent py-3 shadow-none focus-visible:ring-0 dark:bg-transparent\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  InputGroup,\n  InputGroupAddon,\n  InputGroupButton,\n  InputGroupText,\n  InputGroupInput,\n  InputGroupTextarea,\n}\n","path":null,"size_bytes":4971,"size_tokens":null},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","path":null,"size_bytes":140,"size_tokens":null},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-4 w-4 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","path":null,"size_bytes":7406,"size_tokens":null},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\n      \"p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n      className\n    )}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","path":null,"size_bytes":2859,"size_tokens":null},"client/src/components/ui/drawer.tsx":{"content":"import * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","path":null,"size_bytes":3007,"size_tokens":null},"client/src/components/ui/dialog.tsx":{"content":"import * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogTrigger,\n  DialogClose,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","path":null,"size_bytes":3835,"size_tokens":null},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-3.5 w-3.5 fill-primary\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","path":null,"size_bytes":1410,"size_tokens":null},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","path":null,"size_bytes":1753,"size_tokens":null},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","path":null,"size_bytes":21846,"size_tokens":null},"client/src/pages/Leaderboard.tsx":{"content":"import { Navbar } from \"@/components/layout/Navbar\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Trophy, Medal, TrendingUp, ArrowUpRight, Loader2, User as UserIcon } from \"lucide-react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { fetchLeaderboard, type User } from \"@/lib/api\";\nimport { useState } from \"react\";\n\ntype TimeFilter = \"weekly\" | \"monthly\" | \"alltime\";\n\nexport default function Leaderboard() {\n  const [timeFilter, setTimeFilter] = useState<TimeFilter>(\"weekly\");\n\n  const { data: leaderboard = [], isLoading } = useQuery({\n    queryKey: [\"leaderboard\", timeFilter],\n    queryFn: () => fetchLeaderboard(20),\n    refetchInterval: 30000,\n  });\n\n  const getInitials = (address: string) => {\n    return address.slice(2, 4).toUpperCase();\n  };\n\n  const getShortAddress = (address: string) => {\n    return `${address.slice(0, 6)}...${address.slice(-4)}`;\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background bg-grid-pattern font-sans selection:bg-primary/30\">\n      <Navbar />\n      \n      <main className=\"container mx-auto px-4 py-8 space-y-8\">\n        <div className=\"flex flex-col space-y-4 md:flex-row md:items-center md:justify-between md:space-y-0\">\n            <div>\n                <h1 className=\"text-3xl font-bold tracking-tight flex items-center gap-2\" data-testid=\"text-leaderboard-title\">\n                    <Trophy className=\"h-8 w-8 text-yellow-500\" />\n                    Leaderboard\n                </h1>\n                <p className=\"text-muted-foreground\">Top performing predictors on Monad Markets</p>\n            </div>\n            <div className=\"flex gap-2\">\n                 <Button \n                   variant={timeFilter === \"weekly\" ? \"outline\" : \"ghost\"} \n                   className={timeFilter === \"weekly\" ? \"bg-secondary\" : \"\"}\n                   onClick={() => setTimeFilter(\"weekly\")}\n                   data-testid=\"button-weekly\"\n                 >\n                   Weekly\n                 </Button>\n                 <Button \n                   variant={timeFilter === \"monthly\" ? \"outline\" : \"ghost\"}\n                   className={timeFilter === \"monthly\" ? \"bg-secondary\" : \"\"}\n                   onClick={() => setTimeFilter(\"monthly\")}\n                   data-testid=\"button-monthly\"\n                 >\n                   Monthly\n                 </Button>\n                 <Button \n                   variant={timeFilter === \"alltime\" ? \"outline\" : \"ghost\"}\n                   className={timeFilter === \"alltime\" ? \"bg-secondary\" : \"\"}\n                   onClick={() => setTimeFilter(\"alltime\")}\n                   data-testid=\"button-alltime\"\n                 >\n                   All Time\n                 </Button>\n            </div>\n        </div>\n\n        {isLoading ? (\n          <div className=\"flex items-center justify-center py-20\">\n            <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n          </div>\n        ) : leaderboard.length === 0 ? (\n          <Card className=\"flex flex-col items-center justify-center p-12 border-border/50 bg-card/30\">\n            <Trophy className=\"h-16 w-16 text-muted-foreground/30 mb-4\" />\n            <h3 className=\"text-xl font-bold mb-2\">No Leaders Yet</h3>\n            <p className=\"text-muted-foreground text-center\">\n              Be the first to make predictions and claim the top spot!\n            </p>\n          </Card>\n        ) : (\n          <>\n            <div className=\"grid gap-6 md:grid-cols-3\">\n                {leaderboard.slice(0, 3).map((user: User, i: number) => (\n                    <Card \n                      key={user.id} \n                      className={`relative overflow-hidden border-border/50 bg-card/50 backdrop-blur-sm ${i === 0 ? 'border-yellow-500/50 shadow-[0_0_30px_rgba(234,179,8,0.2)]' : ''}`}\n                      data-testid={`card-top-${i + 1}`}\n                    >\n                        <div className={`absolute top-0 right-0 p-4 opacity-10`}>\n                             <Trophy className=\"h-24 w-24\" />\n                        </div>\n                        <CardHeader className=\"pb-2\">\n                            <div className=\"flex justify-between items-start\">\n                                 <Badge variant=\"outline\" className={`${i === 0 ? 'bg-yellow-500/20 text-yellow-500 border-yellow-500/50' : i === 1 ? 'bg-slate-300/20 text-slate-300 border-slate-300/50' : 'bg-amber-700/20 text-amber-700 border-amber-700/50'}`}>\n                                    Rank #{i + 1}\n                                 </Badge>\n                                 {i === 0 && <Medal className=\"h-6 w-6 text-yellow-500\" />}\n                            </div>\n                        </CardHeader>\n                        <CardContent className=\"flex flex-col items-center text-center space-y-4 pt-4\">\n                            <Avatar className=\"h-20 w-20 border-2 border-background ring-2 ring-border\">\n                                <AvatarFallback className=\"bg-gradient-to-br from-primary/30 to-monad-purple/30 text-xl font-bold\">\n                                  <UserIcon className=\"h-10 w-10 text-primary\" />\n                                </AvatarFallback>\n                            </Avatar>\n                            <div>\n                                <div className=\"font-bold text-lg font-mono\">{getShortAddress(user.walletAddress)}</div>\n                                <div className=\"text-sm text-muted-foreground\">Trader</div>\n                            </div>\n                            <div className=\"grid grid-cols-2 gap-8 w-full pt-4 border-t border-border/50\">\n                                <div>\n                                    <div className=\"text-xs text-muted-foreground uppercase tracking-wider\">Profit</div>\n                                    <div className=\"font-mono font-bold text-green-400 text-lg\">\n                                      +${parseFloat(user.totalProfit).toLocaleString()}\n                                    </div>\n                                </div>\n                                <div>\n                                    <div className=\"text-xs text-muted-foreground uppercase tracking-wider\">Win Rate</div>\n                                    <div className=\"font-mono font-bold text-primary text-lg\">\n                                      {parseFloat(user.winRate).toFixed(0)}%\n                                    </div>\n                                </div>\n                            </div>\n                        </CardContent>\n                    </Card>\n                ))}\n            </div>\n\n            {leaderboard.length > 3 && (\n              <Card className=\"border-border/50 bg-card/30 backdrop-blur-sm\">\n                  <CardContent className=\"p-0\">\n                      <div className=\"relative w-full overflow-auto\">\n                          <table className=\"w-full caption-bottom text-sm\">\n                              <thead className=\"[&_tr]:border-b\">\n                                  <tr className=\"border-b border-border/50 transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\">\n                                      <th className=\"h-12 px-4 text-left align-middle font-medium text-muted-foreground\">Rank</th>\n                                      <th className=\"h-12 px-4 text-left align-middle font-medium text-muted-foreground\">Trader</th>\n                                      <th className=\"h-12 px-4 text-right align-middle font-medium text-muted-foreground\">Total Profit</th>\n                                      <th className=\"h-12 px-4 text-right align-middle font-medium text-muted-foreground\">Win Rate</th>\n                                      <th className=\"h-12 px-4 text-right align-middle font-medium text-muted-foreground\">Volume</th>\n                                  </tr>\n                              </thead>\n                              <tbody className=\"[&_tr:last-child]:border-0\">\n                                  {leaderboard.slice(3).map((user: User, i: number) => (\n                                      <tr key={user.id} className=\"border-b border-border/50 transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\" data-testid={`row-rank-${i + 4}`}>\n                                          <td className=\"p-4 align-middle font-mono font-bold text-muted-foreground\">#{i + 4}</td>\n                                          <td className=\"p-4 align-middle\">\n                                              <div className=\"flex items-center gap-3\">\n                                                  <Avatar className=\"h-8 w-8\">\n                                                      <AvatarFallback className=\"bg-gradient-to-br from-primary/20 to-monad-purple/20\">\n                                                        <UserIcon className=\"h-4 w-4 text-primary\" />\n                                                      </AvatarFallback>\n                                                  </Avatar>\n                                                  <div className=\"font-medium font-mono\">{getShortAddress(user.walletAddress)}</div>\n                                              </div>\n                                          </td>\n                                          <td className=\"p-4 align-middle text-right font-mono text-green-400\">+${parseFloat(user.totalProfit).toLocaleString()}</td>\n                                          <td className=\"p-4 align-middle text-right font-mono\">{parseFloat(user.winRate).toFixed(0)}%</td>\n                                          <td className=\"p-4 align-middle text-right font-mono text-muted-foreground\">${parseFloat(user.totalVolume).toLocaleString()}</td>\n                                      </tr>\n                                  ))}\n                              </tbody>\n                          </table>\n                      </div>\n                  </CardContent>\n              </Card>\n            )}\n          </>\n        )}\n      </main>\n    </div>\n  );\n}\n","path":null,"size_bytes":10188,"size_tokens":null},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","path":null,"size_bytes":157,"size_tokens":null},"client/src/pages/Wallet.tsx":{"content":"import { Navbar } from \"@/components/layout/Navbar\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { \n  ArrowDownToLine, \n  ArrowUpFromLine, \n  Wallet as WalletIcon, \n  Loader2,\n  Zap\n} from \"lucide-react\";\nimport { useState, useEffect } from \"react\";\nimport { useContract } from \"@/hooks/useContract\";\nimport { useConnectModal } from \"@rainbow-me/rainbowkit\";\nimport { toast } from \"sonner\";\n\nexport default function Wallet() {\n  const { \n    address, \n    isConnected, \n    loading, \n    error,\n    approveUsdc,\n    deposit,\n    withdraw,\n    getContractBalance,\n    getUsdcBalance,\n    getUsdcAllowance\n  } = useContract();\n  \n  const { openConnectModal } = useConnectModal();\n  const [depositAmount, setDepositAmount] = useState(\"\");\n  const [withdrawAmount, setWithdrawAmount] = useState(\"\");\n  const [contractBalance, setContractBalance] = useState(\"0\");\n  const [usdcBalance, setUsdcBalance] = useState(\"0\");\n  const [allowance, setAllowance] = useState(\"0\");\n  const [refreshing, setRefreshing] = useState(false);\n\n  const refreshBalances = async () => {\n    if (!isConnected) return;\n    setRefreshing(true);\n    try {\n      const [cb, ub, al] = await Promise.all([\n        getContractBalance(),\n        getUsdcBalance(),\n        getUsdcAllowance()\n      ]);\n      setContractBalance(cb);\n      setUsdcBalance(ub);\n      setAllowance(al);\n    } catch (e) {\n      console.error(\"Failed to refresh balances:\", e);\n    }\n    setRefreshing(false);\n  };\n\n  useEffect(() => {\n    refreshBalances();\n  }, [isConnected, address]);\n\n  const handleDeposit = async () => {\n    if (!isConnected) {\n      toast.error(\"Please connect your wallet first\");\n      openConnectModal?.();\n      return;\n    }\n\n    if (!depositAmount || parseFloat(depositAmount) <= 0) {\n      toast.error(\"Enter a valid amount\");\n      return;\n    }\n\n    const depositNum = parseFloat(depositAmount);\n    const walletNum = parseFloat(usdcBalance);\n    \n    if (walletNum < depositNum) {\n      toast.error(`Insufficient USDC in wallet. You have ${walletNum.toFixed(2)} USDC but tried to deposit ${depositNum.toFixed(2)} USDC.`);\n      return;\n    }\n\n    const needsApprovalNow = parseFloat(allowance) < depositNum;\n    \n    if (needsApprovalNow) {\n      const toastId = toast.loading(\"Approving USDC... Please confirm in your wallet\");\n      const approveSuccess = await approveUsdc(depositAmount);\n      toast.dismiss(toastId);\n      if (!approveSuccess) {\n        if (error) {\n          toast.error(error);\n        } else {\n          toast.error(\"Approval failed. Make sure you have USDC on Monad network.\");\n        }\n        return;\n      }\n      toast.success(\"USDC approved!\");\n      await refreshBalances();\n    }\n\n    const toastId = toast.loading(\"Depositing USDC... Please confirm in your wallet\");\n    const success = await deposit(depositAmount);\n    toast.dismiss(toastId);\n    if (success) {\n      toast.success(\"Deposit successful!\");\n      setDepositAmount(\"\");\n      await refreshBalances();\n    } else {\n      if (error) {\n        toast.error(error);\n      } else {\n        toast.error(\"Deposit failed - please try again\");\n      }\n    }\n  };\n\n  const handleWithdraw = async () => {\n    if (!isConnected) {\n      toast.error(\"Please connect your wallet first\");\n      openConnectModal?.();\n      return;\n    }\n\n    if (!withdrawAmount || parseFloat(withdrawAmount) <= 0) {\n      toast.error(\"Enter a valid amount\");\n      return;\n    }\n\n    if (parseFloat(withdrawAmount) > parseFloat(contractBalance)) {\n      toast.error(\"Insufficient platform balance\");\n      return;\n    }\n\n    const toastId = toast.loading(\"Withdrawing USDC...\");\n    const success = await withdraw(withdrawAmount);\n    toast.dismiss(toastId);\n    if (success) {\n      toast.success(\"Withdrawal successful!\");\n      setWithdrawAmount(\"\");\n      await refreshBalances();\n    } else {\n      toast.error(\"Withdrawal failed - please try again\");\n    }\n  };\n\n  const formatBalance = (bal: string) => {\n    const num = parseFloat(bal);\n    if (num >= 1000000) return `${(num / 1000000).toFixed(2)}M`;\n    if (num >= 1000) return `${(num / 1000).toFixed(2)}K`;\n    return num.toFixed(2);\n  };\n\n  const needsApproval = parseFloat(allowance) < parseFloat(depositAmount || \"0\");\n\n  if (!isConnected) {\n    return (\n      <div className=\"min-h-screen bg-background bg-grid-pattern font-sans\">\n        <Navbar />\n        <main className=\"container mx-auto px-4 py-8\">\n          <Card className=\"max-w-md mx-auto bg-card/50 backdrop-blur-xl border-primary/20 shadow-2xl\">\n            <CardContent className=\"flex flex-col items-center justify-center py-16 space-y-6\">\n              <div className=\"w-20 h-20 rounded-full bg-primary/10 flex items-center justify-center\">\n                <WalletIcon className=\"h-10 w-10 text-primary\" />\n              </div>\n              <div className=\"text-center space-y-2\">\n                <h2 className=\"text-2xl font-bold\">Connect Your Wallet</h2>\n                <p className=\"text-muted-foreground\">\n                  Connect your wallet to deposit USDC and start trading\n                </p>\n              </div>\n              <Button \n                onClick={() => openConnectModal?.()}\n                size=\"lg\"\n                className=\"bg-primary hover:bg-primary/90 font-bold shadow-lg\"\n                data-testid=\"button-connect-wallet\"\n              >\n                <WalletIcon className=\"h-5 w-5 mr-2\" />\n                Connect Wallet\n              </Button>\n            </CardContent>\n          </Card>\n        </main>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background bg-grid-pattern font-sans selection:bg-primary/30\">\n      <Navbar />\n      \n      <main className=\"container mx-auto px-4 py-8 space-y-8\">\n        <div>\n          <h1 className=\"text-3xl font-bold tracking-tight flex items-center gap-2\" data-testid=\"text-wallet-title\">\n            <WalletIcon className=\"h-8 w-8 text-primary\" />\n            Wallet\n          </h1>\n          <p className=\"text-muted-foreground\">Manage your USDC deposits and withdrawals</p>\n        </div>\n\n        <div className=\"grid gap-6 md:grid-cols-2\">\n          <Card className=\"bg-gradient-to-br from-primary/20 via-card/50 to-card/30 backdrop-blur-xl border-primary/20 shadow-2xl\">\n            <CardHeader className=\"pb-2\">\n              <CardDescription className=\"text-xs uppercase tracking-widest text-muted-foreground\">\n                Wallet USDC Balance\n              </CardDescription>\n              <CardTitle className=\"flex items-baseline gap-2\">\n                <span className=\"text-4xl font-mono font-bold\" data-testid=\"text-usdc-balance\">\n                  {formatBalance(usdcBalance)}\n                </span>\n                <span className=\"text-xl text-muted-foreground\">USDC</span>\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-xs text-muted-foreground\">\n                Available in your connected wallet\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card className=\"bg-gradient-to-br from-monad-green/20 via-card/50 to-card/30 backdrop-blur-xl border-monad-green/20 shadow-2xl\">\n            <CardHeader className=\"pb-2\">\n              <CardDescription className=\"text-xs uppercase tracking-widest text-muted-foreground\">\n                Platform Balance\n              </CardDescription>\n              <CardTitle className=\"flex items-baseline gap-2\">\n                <span className=\"text-4xl font-mono font-bold text-monad-green\" data-testid=\"text-platform-balance\">\n                  {formatBalance(contractBalance)}\n                </span>\n                <span className=\"text-xl text-muted-foreground\">USDC</span>\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-xs text-muted-foreground\">\n                Available for trading on Monad Markets\n              </p>\n            </CardContent>\n          </Card>\n        </div>\n\n        <Card className=\"bg-card/50 backdrop-blur-xl border-white/10 shadow-xl overflow-hidden\">\n          <Tabs defaultValue=\"deposit\" className=\"w-full\">\n            <div className=\"px-6 pt-6\">\n              <TabsList className=\"w-full max-w-md bg-white/5 border border-white/10 h-12 p-1 rounded-xl\">\n                <TabsTrigger \n                  value=\"deposit\" \n                  className=\"flex-1 h-full rounded-lg font-semibold data-[state=active]:bg-monad-green data-[state=active]:text-black transition-all\"\n                  data-testid=\"tab-deposit\"\n                >\n                  <ArrowDownToLine className=\"h-4 w-4 mr-2\" />\n                  Deposit\n                </TabsTrigger>\n                <TabsTrigger \n                  value=\"withdraw\" \n                  className=\"flex-1 h-full rounded-lg font-semibold data-[state=active]:bg-monad-pink data-[state=active]:text-white transition-all\"\n                  data-testid=\"tab-withdraw\"\n                >\n                  <ArrowUpFromLine className=\"h-4 w-4 mr-2\" />\n                  Withdraw\n                </TabsTrigger>\n              </TabsList>\n            </div>\n\n            <TabsContent value=\"deposit\" className=\"p-6 space-y-6\">\n              <div className=\"max-w-md space-y-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"deposit-amount\">Amount to Deposit</Label>\n                  <div className=\"relative\">\n                    <Input\n                      id=\"deposit-amount\"\n                      type=\"number\"\n                      placeholder=\"0.00\"\n                      value={depositAmount}\n                      onChange={(e) => setDepositAmount(e.target.value)}\n                      className=\"h-14 text-2xl font-mono bg-white/5 border-white/10 rounded-xl pr-20\"\n                      data-testid=\"input-deposit-amount\"\n                    />\n                    <span className=\"absolute right-4 top-1/2 -translate-y-1/2 text-muted-foreground font-bold\">\n                      USDC\n                    </span>\n                  </div>\n                  <div className=\"flex gap-2\">\n                    {[10, 50, 100, 500].map((val) => (\n                      <Button\n                        key={val}\n                        variant=\"outline\"\n                        size=\"sm\"\n                        className=\"flex-1 bg-white/5 border-white/10 hover:bg-primary/20 hover:border-primary/30\"\n                        onClick={() => setDepositAmount(val.toString())}\n                      >\n                        {val}\n                      </Button>\n                    ))}\n                  </div>\n                </div>\n\n                <Button\n                  onClick={handleDeposit}\n                  disabled={loading || !depositAmount}\n                  className=\"w-full h-14 text-lg font-bold bg-gradient-to-r from-monad-green to-emerald-500 hover:from-monad-green/90 hover:to-emerald-500/90 text-black rounded-xl shadow-lg\"\n                  data-testid=\"button-deposit\"\n                >\n                  {loading ? (\n                    <Loader2 className=\"h-5 w-5 animate-spin\" />\n                  ) : (\n                    <>\n                      <Zap className=\"h-5 w-5 mr-2\" />\n                      {needsApproval ? \"Approve & Deposit\" : \"Deposit USDC\"}\n                    </>\n                  )}\n                </Button>\n\n                <p className=\"text-xs text-center text-muted-foreground\">\n                  Deposits are instant. Your funds will be available for trading immediately.\n                </p>\n\n                {parseFloat(usdcBalance) === 0 && (\n                  <div className=\"p-4 rounded-xl bg-yellow-500/10 border border-yellow-500/30 text-center space-y-2\">\n                    <p className=\"text-sm text-yellow-500 font-medium\">No USDC in your wallet</p>\n                    <p className=\"text-xs text-muted-foreground\">\n                      You need USDC on Monad to deposit. Bridge USDC from another chain or get some from an exchange.\n                    </p>\n                    <p className=\"text-xs text-muted-foreground\">\n                      USDC Contract: <span className=\"font-mono text-primary\">0x754704...a603</span>\n                    </p>\n                  </div>\n                )}\n              </div>\n            </TabsContent>\n\n            <TabsContent value=\"withdraw\" className=\"p-6 space-y-6\">\n              <div className=\"max-w-md space-y-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"withdraw-amount\">Amount to Withdraw</Label>\n                  <div className=\"relative\">\n                    <Input\n                      id=\"withdraw-amount\"\n                      type=\"number\"\n                      placeholder=\"0.00\"\n                      value={withdrawAmount}\n                      onChange={(e) => setWithdrawAmount(e.target.value)}\n                      className=\"h-14 text-2xl font-mono bg-white/5 border-white/10 rounded-xl pr-24\"\n                      data-testid=\"input-withdraw-amount\"\n                    />\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      className=\"absolute right-2 top-1/2 -translate-y-1/2 text-primary hover:bg-primary/20 font-bold\"\n                      onClick={() => setWithdrawAmount(contractBalance)}\n                      data-testid=\"button-max-withdraw\"\n                    >\n                      MAX\n                    </Button>\n                  </div>\n                  <div className=\"flex justify-between text-xs\">\n                    <span className=\"text-muted-foreground\">Available:</span>\n                    <span className=\"text-foreground font-medium\">\n                      {formatBalance(contractBalance)} USDC\n                    </span>\n                  </div>\n                </div>\n\n                <Button\n                  onClick={handleWithdraw}\n                  disabled={loading || !withdrawAmount}\n                  className=\"w-full h-14 text-lg font-bold bg-gradient-to-r from-monad-pink to-rose-500 hover:from-monad-pink/90 hover:to-rose-500/90 text-white rounded-xl shadow-lg\"\n                  data-testid=\"button-withdraw\"\n                >\n                  {loading ? (\n                    <Loader2 className=\"h-5 w-5 animate-spin\" />\n                  ) : (\n                    <>\n                      <ArrowUpFromLine className=\"h-5 w-5 mr-2\" />\n                      Withdraw to Wallet\n                    </>\n                  )}\n                </Button>\n\n                <p className=\"text-xs text-center text-muted-foreground\">\n                  Withdrawals are instant. USDC will be sent directly to your wallet.\n                </p>\n              </div>\n            </TabsContent>\n          </Tabs>\n        </Card>\n      </main>\n    </div>\n  );\n}\n","path":null,"size_bytes":15128,"size_tokens":null},"client/src/lib/monad.ts":{"content":"import { ethers } from \"ethers\";\n\nexport const MONAD_TESTNET = {\n  chainId: 10143,\n  chainIdHex: \"0x27AF\",\n  name: \"Monad Testnet\",\n  rpcUrl: \"https://testnet-rpc.monad.xyz\",\n  blockExplorer: \"https://explorer.testnet.monad.xyz\",\n  nativeCurrency: {\n    name: \"MON\",\n    symbol: \"MON\",\n    decimals: 18,\n  },\n};\n\nexport const MONAD_MAINNET = {\n  chainId: 143,\n  chainIdHex: \"0x8F\",\n  name: \"Monad\",\n  rpcUrl: \"https://rpc.monad.xyz\",\n  blockExplorer: \"https://monadvision.com\",\n  nativeCurrency: {\n    name: \"MON\",\n    symbol: \"MON\",\n    decimals: 18,\n  },\n};\n\nexport const ACTIVE_NETWORK = MONAD_MAINNET;\n\ndeclare global {\n  interface Window {\n    ethereum?: any;\n  }\n}\n\nexport async function getProvider(): Promise<ethers.BrowserProvider | null> {\n  if (typeof window !== \"undefined\" && window.ethereum) {\n    return new ethers.BrowserProvider(window.ethereum);\n  }\n  return null;\n}\n\nexport async function getSigner(): Promise<ethers.Signer | null> {\n  const provider = await getProvider();\n  if (!provider) return null;\n  return provider.getSigner();\n}\n\nexport async function switchToMonad(): Promise<boolean> {\n  if (!window.ethereum) return false;\n\n  try {\n    await window.ethereum.request({\n      method: \"wallet_switchEthereumChain\",\n      params: [{ chainId: ACTIVE_NETWORK.chainIdHex }],\n    });\n    return true;\n  } catch (switchError: any) {\n    if (switchError.code === 4902) {\n      try {\n        await window.ethereum.request({\n          method: \"wallet_addEthereumChain\",\n          params: [\n            {\n              chainId: ACTIVE_NETWORK.chainIdHex,\n              chainName: ACTIVE_NETWORK.name,\n              nativeCurrency: ACTIVE_NETWORK.nativeCurrency,\n              rpcUrls: [ACTIVE_NETWORK.rpcUrl],\n              blockExplorerUrls: [ACTIVE_NETWORK.blockExplorer],\n            },\n          ],\n        });\n        return true;\n      } catch (addError) {\n        console.error(\"Failed to add Monad network:\", addError);\n        return false;\n      }\n    }\n    console.error(\"Failed to switch network:\", switchError);\n    return false;\n  }\n}\n\nexport async function getMonBalance(address: string): Promise<string> {\n  try {\n    const provider = new ethers.JsonRpcProvider(ACTIVE_NETWORK.rpcUrl);\n    const balance = await provider.getBalance(address);\n    return ethers.formatEther(balance);\n  } catch (error) {\n    console.error(\"Failed to get balance:\", error);\n    return \"0\";\n  }\n}\n\nexport async function sendDeposit(\n  amount: string\n): Promise<{ hash: string } | null> {\n  try {\n    const signer = await getSigner();\n    if (!signer) throw new Error(\"No signer available\");\n\n    const tx = await signer.sendTransaction({\n      to: \"0x0000000000000000000000000000000000000000\",\n      value: ethers.parseEther(amount),\n    });\n\n    await tx.wait();\n    return { hash: tx.hash };\n  } catch (error) {\n    console.error(\"Deposit failed:\", error);\n    return null;\n  }\n}\n\nexport function formatAddress(address: string): string {\n  return `${address.slice(0, 6)}...${address.slice(-4)}`;\n}\n\nexport function isMetaMaskInstalled(): boolean {\n  return typeof window !== \"undefined\" && Boolean(window.ethereum);\n}\n","path":null,"size_bytes":3132,"size_tokens":null},"client/src/lib/wagmi.ts":{"content":"import { getDefaultConfig } from \"@rainbow-me/rainbowkit\";\nimport { http } from \"wagmi\";\nimport { defineChain } from \"viem\";\n\nexport const monadMainnet = defineChain({\n  id: 143,\n  name: \"Monad\",\n  nativeCurrency: {\n    name: \"MON\",\n    symbol: \"MON\",\n    decimals: 18,\n  },\n  rpcUrls: {\n    default: {\n      http: [\"https://rpc.monad.xyz\"],\n    },\n  },\n  blockExplorers: {\n    default: {\n      name: \"MonadVision\",\n      url: \"https://monadvision.com\",\n    },\n  },\n});\n\nexport const config = getDefaultConfig({\n  appName: \"Monad Markets\",\n  projectId: \"5b1ae833abd22d348cbf5d53cf58b3b2\",\n  chains: [monadMainnet],\n  transports: {\n    [monadMainnet.id]: http(\"https://rpc.monad.xyz\"),\n  },\n});\n","path":null,"size_bytes":694,"size_tokens":null},"replit.md":{"content":"# Monad Markets - Prediction Market Platform\n\n## Overview\n\nMonad Markets is a full-stack prediction market platform built for the Monad blockchain. It enables users to create and participate in prediction markets across multiple categories including crypto prices, sports, politics, and pop culture. The platform features real-time price discovery, automated oracle resolution, and wallet integration through RainbowKit.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n\n**Framework**: React 18 with TypeScript using Vite as the build tool\n\n**Styling**: TailwindCSS v4 with shadcn/ui component library (New York style variant). Custom CSS variables enable dark/light theme support with purple/green/pink accent colors for Monad branding.\n\n**State Management**: \n- React Query (@tanstack/react-query) for server state with infinite stale time and disabled refetch on window focus\n- Local component state with React hooks\n- Real-time updates via polling (5-30 second intervals depending on page)\n\n**Routing**: Wouter for client-side routing with the following pages:\n- `/` - Landing page with hero, features, and preview cards\n- `/markets` - Browse and filter all prediction markets\n- `/event/:id` - Individual event details with betting interface\n- `/portfolio` - User's active bets and history\n- `/leaderboard` - Top performers ranking\n- `/wallet` - Deposit/withdraw funds\n- `/create` - Create new prediction events\n\n**Web3 Integration**:\n- RainbowKit for wallet connection UI\n- Wagmi for Ethereum interactions\n- Custom Monad mainnet configuration (Chain ID: 143)\n- Native MON token support\n\n**Charts**: Chart.js with react-chartjs-2 for vote visualization and price history\n\n**Animation**: Framer Motion for smooth page transitions and component animations\n\n### Backend Architecture\n\n**Runtime**: Node.js with Express.js server\n\n**Language**: TypeScript with ES modules\n\n**API Design**: RESTful endpoints under `/api` prefix:\n- `GET/POST /api/events` - Event management\n- `GET /api/events/:id` - Single event details\n- `POST /api/bets` - Place bets\n- `GET /api/bets/user/:walletAddress` - User bet history\n- `GET /api/leaderboard` - Top users\n\n**Build Process**: Custom esbuild configuration that bundles server code with selective dependencies (allowlist includes DB drivers, auth libraries, etc.) to reduce syscalls and improve cold start performance\n\n**Development**: \n- Vite dev server with HMR for client\n- tsx for server hot reload\n- Separate dev:client and dev scripts\n\n**Static File Serving**: Express serves built Vite assets from `dist/public` with SPA fallback to index.html\n\n**Logging**: Custom middleware logs all API requests with timing, method, path, and status code\n\n**Oracle Resolution System**:\n- Automated event resolution via CoinGecko API for crypto price events\n- Cron job checks for expired events and resolves them\n- Resolution metadata stored including source, proof, and resolver\n\n### Data Architecture\n\n**ORM**: Drizzle ORM with Neon serverless Postgres driver\n\n**Database**: PostgreSQL (configured for Neon serverless)\n\n**Schema Design**:\n\n1. **Users Table**:\n   - Wallet address (unique identifier)\n   - Balance (decimal 18,2)\n   - Statistics: totalProfit, totalVolume, winRate\n   - Timestamps\n\n2. **Events Table**:\n   - Question text and category\n   - Deadline timestamp\n   - Resolution status and outcome\n   - Dynamic pricing: yesPrice, noPrice (decimal 5,4)\n   - Volume and pool size tracking\n   - Creator information and fee structure\n   - Oracle metadata: resolutionSource, resolutionProof, resolvedBy, resolvedAt\n   - Event-specific fields: targetAsset, targetPrice, priceCondition (for crypto), sportType, teams, gameId (for sports)\n\n3. **Bets Table**:\n   - User and event foreign keys\n   - Option (YES/NO), amount, shares\n   - Average price and settlement status\n   - Payout tracking\n\n**Migrations**: Drizzle Kit handles schema migrations in `/migrations` directory\n\n**Connection Pooling**: Neon serverless connection pool with WebSocket support\n\n### Build and Deployment\n\n**Build Strategy**: \n- Client built with Vite to `dist/public`\n- Server bundled with esbuild to `dist/index.cjs`\n- Single production command: `node dist/index.cjs`\n\n**Environment Variables**:\n- `DATABASE_URL` - Required for Neon Postgres connection\n- `NODE_ENV` - Development/production mode\n- `REPL_ID` - Replit-specific identifier\n\n**Development Tools**:\n- Replit-specific Vite plugins for error overlay, cartographer, and dev banner\n- Custom meta images plugin for OpenGraph image URL updates\n- TypeScript strict mode with path aliases\n\n## External Dependencies\n\n### Database & ORM\n- **Neon Serverless Postgres** (@neondatabase/serverless) - Serverless Postgres database with WebSocket support\n- **Drizzle ORM** - Type-safe ORM with PostgreSQL dialect\n- **Drizzle Kit** - Schema management and migrations\n\n### Web3 & Blockchain\n- **RainbowKit** (@rainbow-me/rainbowkit) - Wallet connection UI components\n- **Wagmi** - React hooks for Ethereum\n- **Viem** - TypeScript Ethereum library\n- **Ethers.js** - Ethereum wallet and provider utilities\n\n### UI & Styling\n- **Radix UI** - Unstyled accessible component primitives (20+ components)\n- **TailwindCSS** - Utility-first CSS framework\n- **Lucide React** - Icon library\n- **Framer Motion** - Animation library\n- **Chart.js** - Charting library with react-chartjs-2 wrapper\n\n### Data Fetching & State\n- **React Query** (@tanstack/react-query) - Server state management\n- **React Hook Form** - Form state management\n- **Zod** - Schema validation\n\n### Development Tools\n- **Vite** - Frontend build tool and dev server\n- **esbuild** - Fast JavaScript bundler for server\n- **tsx** - TypeScript execution for Node.js\n- **Replit Vite Plugins** - Error modal, cartographer, dev banner\n\n### External APIs\n- **CoinGecko API** - Cryptocurrency price data for oracle resolution (free tier, no auth required)\n- Future: Sports APIs (TheSportsDB, API-Football) for sports event resolution\n- Future: News/AI APIs for pop culture event verification\n\n### Session & Security\n- **express-session** - Session middleware\n- **connect-pg-simple** - PostgreSQL session store\n- **cors** - Cross-origin resource sharing\n- **express-rate-limit** - API rate limiting\n\n### Utilities\n- **date-fns** - Date formatting and manipulation\n- **nanoid** - Unique ID generation\n- **wouter** - Lightweight routing library\n- **sonner** - Toast notifications","path":null,"size_bytes":6459,"size_tokens":null},"server/resolution.ts":{"content":"import { db } from \"./db\";\nimport { events, bets, users } from \"@shared/schema\";\nimport { eq, and, lte, isNull } from \"drizzle-orm\";\n\nconst COINGECKO_API = \"https://api.coingecko.com/api/v3\";\n\nconst CRYPTO_IDS: Record<string, string> = {\n  bitcoin: \"bitcoin\",\n  btc: \"bitcoin\",\n  ethereum: \"ethereum\",\n  eth: \"ethereum\",\n  solana: \"solana\",\n  sol: \"solana\",\n  monad: \"monad\",\n  mon: \"monad\",\n};\n\nexport interface ResolutionResult {\n  outcome: \"YES\" | \"NO\";\n  proof: object;\n  source: string;\n}\n\nexport async function getCryptoPrice(asset: string): Promise<number | null> {\n  try {\n    const coinId = CRYPTO_IDS[asset.toLowerCase()] || asset.toLowerCase();\n    const response = await fetch(\n      `${COINGECKO_API}/simple/price?ids=${coinId}&vs_currencies=usd`\n    );\n    \n    if (!response.ok) {\n      console.error(`CoinGecko API error: ${response.status}`);\n      return null;\n    }\n    \n    const data = await response.json();\n    return data[coinId]?.usd || null;\n  } catch (error) {\n    console.error(\"Error fetching crypto price:\", error);\n    return null;\n  }\n}\n\nexport async function resolveCryptoEvent(\n  eventId: number,\n  targetAsset: string,\n  targetPrice: number,\n  condition: string\n): Promise<ResolutionResult | null> {\n  const currentPrice = await getCryptoPrice(targetAsset);\n  \n  if (currentPrice === null) {\n    console.error(`Could not fetch price for ${targetAsset}`);\n    return null;\n  }\n  \n  let outcome: \"YES\" | \"NO\";\n  \n  if (condition === \"above\") {\n    outcome = currentPrice >= targetPrice ? \"YES\" : \"NO\";\n  } else if (condition === \"below\") {\n    outcome = currentPrice <= targetPrice ? \"YES\" : \"NO\";\n  } else {\n    return null;\n  }\n  \n  return {\n    outcome,\n    proof: {\n      asset: targetAsset,\n      targetPrice,\n      actualPrice: currentPrice,\n      condition,\n      timestamp: new Date().toISOString(),\n      source: \"coingecko\",\n    },\n    source: \"coingecko\",\n  };\n}\n\nexport async function resolveEvent(eventId: number): Promise<boolean> {\n  try {\n    const [event] = await db.select().from(events).where(eq(events.id, eventId));\n    \n    if (!event || event.resolved) {\n      return false;\n    }\n    \n    let result: ResolutionResult | null = null;\n    \n    if (event.category === \"Crypto\" && event.targetAsset && event.targetPrice && event.priceCondition) {\n      result = await resolveCryptoEvent(\n        eventId,\n        event.targetAsset,\n        parseFloat(event.targetPrice),\n        event.priceCondition\n      );\n    }\n    \n    if (!result) {\n      console.log(`No automated resolution available for event ${eventId}`);\n      return false;\n    }\n    \n    await db.update(events).set({\n      resolved: true,\n      outcome: result.outcome,\n      resolutionSource: result.source,\n      resolutionProof: JSON.stringify(result.proof),\n      resolvedBy: \"system\",\n      resolvedAt: new Date(),\n    }).where(eq(events.id, eventId));\n    \n    await settleBets(eventId, result.outcome);\n    \n    console.log(`Event ${eventId} resolved: ${result.outcome}`);\n    return true;\n  } catch (error) {\n    console.error(`Error resolving event ${eventId}:`, error);\n    return false;\n  }\n}\n\nexport async function settleBets(eventId: number, outcome: string): Promise<void> {\n  const eventBets = await db.select().from(bets).where(\n    and(eq(bets.eventId, eventId), eq(bets.settled, false))\n  );\n  \n  const [event] = await db.select().from(events).where(eq(events.id, eventId));\n  if (!event) return;\n  \n  const creatorFee = parseFloat(event.creatorFee || \"2\") / 100;\n  \n  for (const bet of eventBets) {\n    const isWinner = bet.option === outcome;\n    let payout = 0;\n    \n    if (isWinner) {\n      const grossPayout = parseFloat(bet.shares);\n      const fee = grossPayout * creatorFee;\n      payout = grossPayout - fee;\n      \n      const [user] = await db.select().from(users).where(eq(users.id, bet.userId));\n      if (user) {\n        const newBalance = parseFloat(user.balance) + payout;\n        const newProfit = parseFloat(user.totalProfit) + (payout - parseFloat(bet.amount));\n        \n        await db.update(users).set({\n          balance: newBalance.toFixed(2),\n          totalProfit: newProfit.toFixed(2),\n        }).where(eq(users.id, bet.userId));\n      }\n      \n      if (event.creatorAddress) {\n        const [creator] = await db.select().from(users)\n          .where(eq(users.walletAddress, event.creatorAddress));\n        if (creator) {\n          const newCreatorBalance = parseFloat(creator.balance) + fee;\n          await db.update(users).set({\n            balance: newCreatorBalance.toFixed(2),\n          }).where(eq(users.id, creator.id));\n        }\n      }\n    }\n    \n    await db.update(bets).set({\n      settled: true,\n      payout: payout.toFixed(2),\n    }).where(eq(bets.id, bet.id));\n  }\n}\n\nexport async function checkAndResolveExpiredEvents(): Promise<number> {\n  const now = new Date();\n  \n  const expiredEvents = await db.select().from(events).where(\n    and(\n      eq(events.resolved, false),\n      lte(events.deadline, now)\n    )\n  );\n  \n  let resolvedCount = 0;\n  \n  for (const event of expiredEvents) {\n    const success = await resolveEvent(event.id);\n    if (success) resolvedCount++;\n  }\n  \n  return resolvedCount;\n}\n\nlet resolutionInterval: NodeJS.Timeout | null = null;\n\nexport function startResolutionCron(intervalMinutes: number = 5): void {\n  if (resolutionInterval) {\n    clearInterval(resolutionInterval);\n  }\n  \n  console.log(`Starting resolution cron job (every ${intervalMinutes} minutes)`);\n  \n  checkAndResolveExpiredEvents().then(count => {\n    if (count > 0) console.log(`Initial check: resolved ${count} events`);\n  });\n  \n  resolutionInterval = setInterval(async () => {\n    const count = await checkAndResolveExpiredEvents();\n    if (count > 0) console.log(`Cron: resolved ${count} events`);\n  }, intervalMinutes * 60 * 1000);\n}\n\nexport function stopResolutionCron(): void {\n  if (resolutionInterval) {\n    clearInterval(resolutionInterval);\n    resolutionInterval = null;\n    console.log(\"Resolution cron job stopped\");\n  }\n}\n","path":null,"size_bytes":6013,"size_tokens":null},"scripts/verify-sourcify-v2.ts":{"content":"import * as fs from \"fs\";\n\nconst V2_IMPLEMENTATION = \"0xa6120d1eBe106A1051F84899c2912ac83EABc15F\";\nconst PROXY_ADDRESS = \"0x8A15A75501D49F44A4c2c6f0803a01534f0E3fCe\";\nconst CHAIN_ID = \"143\";\n\nconst SOURCIFY_API = \"https://sourcify-api-monad.blockvision.org\";\n\nasync function verifyWithStandardJson(\n  address: string,\n  contractName: string,\n  sources: { [key: string]: { content: string } }\n) {\n  console.log(`\\nVerifying ${contractName} at ${address}...`);\n  \n  const standardInput = {\n    language: \"Solidity\",\n    sources: sources,\n    settings: {\n      optimizer: {\n        enabled: true,\n        runs: 200\n      },\n      viaIR: true,\n      evmVersion: \"cancun\",\n      outputSelection: {\n        \"*\": {\n          \"*\": [\"abi\", \"evm.bytecode\", \"evm.deployedBytecode\", \"metadata\"]\n        }\n      }\n    }\n  };\n  \n  const requestBody = {\n    address: address,\n    chain: CHAIN_ID,\n    files: {\n      \"standard-input.json\": JSON.stringify(standardInput)\n    },\n    compilerVersion: \"0.8.28+commit.7893614a\",\n    contractName: contractName\n  };\n  \n  try {\n    const response = await fetch(`${SOURCIFY_API}/verify/solc-json`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(requestBody)\n    });\n    \n    const result = await response.json();\n    console.log(\"Response:\", JSON.stringify(result, null, 2));\n    \n    if (response.ok && result.result?.[0]?.status === \"perfect\") {\n      console.log(` ${contractName} verified successfully!`);\n      console.log(`View at: https://monadvision.com/address/${address}`);\n      return true;\n    } else {\n      console.log(`Result status: ${response.status}`);\n      return false;\n    }\n  } catch (error) {\n    console.error(\"Error:\", error);\n    return false;\n  }\n}\n\nasync function main() {\n  console.log(\" Verifying contracts on MonadVision via Sourcify Standard JSON...\\n\");\n  \n  // Read source files\n  const v2Source = fs.readFileSync(\"contracts/PredictionMarketV2.sol\", \"utf8\");\n  const ierc20Source = fs.readFileSync(\"contracts/interfaces/IERC20.sol\", \"utf8\");\n  const proxySource = fs.readFileSync(\"contracts/PredictionMarketProxy.sol\", \"utf8\");\n  \n  // Verify V2 Implementation\n  const v2Sources = {\n    \"contracts/PredictionMarketV2.sol\": { content: v2Source },\n    \"contracts/interfaces/IERC20.sol\": { content: ierc20Source }\n  };\n  \n  await verifyWithStandardJson(V2_IMPLEMENTATION, \"PredictionMarketV2\", v2Sources);\n  \n  // Verify Proxy\n  const proxySources = {\n    \"contracts/PredictionMarketProxy.sol\": { content: proxySource }\n  };\n  \n  await verifyWithStandardJson(PROXY_ADDRESS, \"PredictionMarketProxy\", proxySources);\n}\n\nmain().catch(console.error);\n","path":null,"size_bytes":2685,"size_tokens":null},"contracts/PredictionMarketProxy.sol":{"content":"// SPDX-License-Identifier: MIT\npragma solidity ^0.8.20;\n\ncontract PredictionMarketProxy {\n    bytes32 private constant IMPLEMENTATION_SLOT = bytes32(uint256(keccak256(\"eip1967.proxy.implementation\")) - 1);\n    bytes32 private constant ADMIN_SLOT = bytes32(uint256(keccak256(\"eip1967.proxy.admin\")) - 1);\n    \n    event Upgraded(address indexed implementation);\n    event AdminChanged(address previousAdmin, address newAdmin);\n    \n    constructor(address _implementation, bytes memory _data) {\n        _setImplementation(_implementation);\n        _setAdmin(msg.sender);\n        \n        if (_data.length > 0) {\n            (bool success,) = _implementation.delegatecall(_data);\n            require(success, \"Initialization failed\");\n        }\n    }\n    \n    function _setImplementation(address _implementation) private {\n        require(_implementation != address(0), \"Invalid implementation\");\n        bytes32 slot = IMPLEMENTATION_SLOT;\n        assembly {\n            sstore(slot, _implementation)\n        }\n    }\n    \n    function _getImplementation() private view returns (address impl) {\n        bytes32 slot = IMPLEMENTATION_SLOT;\n        assembly {\n            impl := sload(slot)\n        }\n    }\n    \n    function _setAdmin(address _admin) private {\n        bytes32 slot = ADMIN_SLOT;\n        assembly {\n            sstore(slot, _admin)\n        }\n    }\n    \n    function _getAdmin() private view returns (address adm) {\n        bytes32 slot = ADMIN_SLOT;\n        assembly {\n            adm := sload(slot)\n        }\n    }\n    \n    function implementation() external view returns (address) {\n        return _getImplementation();\n    }\n    \n    function admin() external view returns (address) {\n        return _getAdmin();\n    }\n    \n    function upgradeTo(address newImplementation) external {\n        require(msg.sender == _getAdmin(), \"Not admin\");\n        _setImplementation(newImplementation);\n        emit Upgraded(newImplementation);\n    }\n    \n    function changeAdmin(address newAdmin) external {\n        require(msg.sender == _getAdmin(), \"Not admin\");\n        emit AdminChanged(_getAdmin(), newAdmin);\n        _setAdmin(newAdmin);\n    }\n    \n    fallback() external payable {\n        address impl = _getImplementation();\n        assembly {\n            calldatacopy(0, 0, calldatasize())\n            let result := delegatecall(gas(), impl, 0, calldatasize(), 0, 0)\n            returndatacopy(0, 0, returndatasize())\n            switch result\n            case 0 { revert(0, returndatasize()) }\n            default { return(0, returndatasize()) }\n        }\n    }\n    \n    receive() external payable {}\n}\n","path":null,"size_bytes":2619,"size_tokens":null},"contracts/README.md":{"content":"# Monad Markets Smart Contracts\n\n## Overview\n\nFully decentralized prediction market contracts for Monad blockchain.\n\n## Contract: PredictionMarket.sol\n\n### Settings\n| Parameter | Value |\n|-----------|-------|\n| USDC Contract | 0x754704Bc059F8C67012fEd69BC8A327a5aafb603 |\n| Creator Fee | 2% of volume |\n| Proposal Bond | 5 USDC |\n| Challenge Bond | 10 USDC |\n| Challenge Window | 24 hours |\n| Auto-Void Timeout | 7 days |\n| Min Bet | No minimum |\n\n## Resolution Flow (100% Trustless, No Admin)\n\n```\n1. Market Created\n   - Creator sets: question, targetAsset, targetPrice, priceAbove, deadline\n   - Example: \"Will BTC hit $100k?\" / bitcoin / 100000 / true / Dec 31\n\n2. Trading Phase\n   - Users deposit USDC to contract\n   - Users buy YES or NO shares via AMM\n   - Price adjusts based on demand\n   - 2% fee to creator\n\n3. After Deadline - Permissionless Resolution\n   a) ANYONE can propose outcome:\n      - Submit current price + stake 5 USDC bond\n      - Contract calculates: price >= target ? YES : NO\n   \n   b) 24-hour challenge window:\n      - If price wrong, anyone challenges with 10 USDC\n      - Submit correct price\n   \n   c) Finalize:\n      - No challenge  proposer gets bond back\n      - Higher bond wins  winner takes all bonds\n\n4. Auto-Void\n   - If no proposal after 7 days  market voided\n   - All users refunded\n\n5. Claim Winnings\n   - Winners: 1 USDC per winning share\n   - Losers: 0\n   - Voided: refund\n```\n\n## Key Functions\n\n```solidity\n// Deposit/Withdraw\ndeposit(uint256 amount)\nwithdraw(uint256 amount)\n\n// Trading\ncreateMarket(question, deadline, targetAsset, targetPrice, priceAbove)\nbuyShares(marketId, isYes, amount)\n\n// Resolution (anyone can call)\nproposeOutcome(marketId, currentPrice)  // stake 5 USDC\nchallengeOutcome(marketId, correctPrice) // stake 10 USDC\nfinalizeResolution(marketId)\nvoidMarket(marketId)\n\n// Claim\nclaimWinnings(marketId)\n```\n\n## Deploy to Monad\n\n```bash\n# Set private key\nexport PRIVATE_KEY=your_private_key\n\n# Deploy\nnpx hardhat run scripts/deploy.js --network monad\n```\n\n## Trustless Features\n\n No admin address  \n No centralized oracle  \n Anyone can propose/challenge  \n Economic incentives for truth  \n Auto-void on timeout  \n All funds in contract (not custodied)\n","path":null,"size_bytes":2244,"size_tokens":null},"scripts/deploy.js":{"content":"const hre = require(\"hardhat\");\n\nasync function main() {\n  const USDC_ADDRESS = \"0x754704Bc059F8C67012fEd69BC8A327a5aafb603\";\n  const [deployer] = await hre.ethers.getSigners();\n  \n  console.log(\"Deploying contracts with:\", deployer.address);\n  console.log(\"USDC Address:\", USDC_ADDRESS);\n  \n  // 1. Deploy Implementation\n  console.log(\"\\n1. Deploying PredictionMarketV1 implementation...\");\n  const PredictionMarketV1 = await hre.ethers.getContractFactory(\"PredictionMarketV1\");\n  const implementation = await PredictionMarketV1.deploy();\n  await implementation.waitForDeployment();\n  const implAddress = await implementation.getAddress();\n  console.log(\"Implementation deployed to:\", implAddress);\n  \n  // 2. Encode initialize call\n  const initData = implementation.interface.encodeFunctionData(\"initialize\", [\n    USDC_ADDRESS,\n    deployer.address\n  ]);\n  \n  // 3. Deploy Proxy\n  console.log(\"\\n2. Deploying Proxy...\");\n  const PredictionMarketProxy = await hre.ethers.getContractFactory(\"PredictionMarketProxy\");\n  const proxy = await PredictionMarketProxy.deploy(implAddress, initData);\n  await proxy.waitForDeployment();\n  const proxyAddress = await proxy.getAddress();\n  console.log(\"Proxy deployed to:\", proxyAddress);\n  \n  // 4. Verify\n  console.log(\"\\n3. Verifying deployment...\");\n  const market = PredictionMarketV1.attach(proxyAddress);\n  const version = await market.getVersion();\n  const owner = await market.owner();\n  console.log(\"Contract version:\", version);\n  console.log(\"Contract owner:\", owner);\n  \n  console.log(\"\\n=== Deployment Complete ===\");\n  console.log(\"Proxy Address (use this):\", proxyAddress);\n  console.log(\"Implementation Address:\", implAddress);\n  console.log(\"\\nSettings:\");\n  console.log(\"- Creator Fee: 2%\");\n  console.log(\"- Proposal Bond: 5 USDC\");\n  console.log(\"- Challenge Bond: 10 USDC\");\n  console.log(\"- Challenge Window: 24 hours\");\n  console.log(\"- Auto-Void Timeout: 7 days\");\n  \n  return { proxyAddress, implAddress };\n}\n\nmain()\n  .then(() => process.exit(0))\n  .catch((error) => {\n    console.error(\"Deployment failed:\", error);\n    process.exit(1);\n  });\n","path":null,"size_bytes":2110,"size_tokens":null},"scripts/verify-sourcify.ts":{"content":"import * as fs from \"fs\";\nimport * as path from \"path\";\n\nconst V2_IMPLEMENTATION = \"0xa6120d1eBe106A1051F84899c2912ac83EABc15F\";\nconst PROXY_ADDRESS = \"0x8A15A75501D49F44A4c2c6f0803a01534f0E3fCe\";\nconst CHAIN_ID = \"143\"; // Monad Mainnet\n\nconst SOURCIFY_API = \"https://sourcify-api-monad.blockvision.org\";\n\nasync function verifyContract(address: string, contractPath: string, contractName: string) {\n  console.log(`\\nVerifying ${contractName} at ${address}...`);\n  \n  // Read the flattened source code\n  const sourceCode = fs.readFileSync(contractPath, \"utf8\");\n  \n  // Create metadata\n  const metadata = {\n    compiler: {\n      version: \"0.8.28+commit.7893614a\"\n    },\n    language: \"Solidity\",\n    output: {\n      abi: [],\n      devdoc: {},\n      userdoc: {}\n    },\n    settings: {\n      compilationTarget: {\n        [contractPath]: contractName\n      },\n      evmVersion: \"cancun\",\n      libraries: {},\n      metadata: {\n        bytecodeHash: \"none\",\n        useLiteralContent: true\n      },\n      optimizer: {\n        enabled: true,\n        runs: 200\n      },\n      viaIR: true,\n      remappings: []\n    },\n    sources: {\n      [contractPath]: {\n        content: sourceCode,\n        keccak256: \"\"\n      }\n    },\n    version: 1\n  };\n  \n  // Create form data\n  const formData = new FormData();\n  formData.append(\"address\", address);\n  formData.append(\"chain\", CHAIN_ID);\n  formData.append(\"files\", new Blob([sourceCode], { type: \"text/plain\" }), path.basename(contractPath));\n  formData.append(\"files\", new Blob([JSON.stringify(metadata, null, 2)], { type: \"application/json\" }), \"metadata.json\");\n  \n  try {\n    const response = await fetch(`${SOURCIFY_API}/verify`, {\n      method: \"POST\",\n      body: formData\n    });\n    \n    const result = await response.json();\n    console.log(\"Response:\", JSON.stringify(result, null, 2));\n    \n    if (response.ok) {\n      console.log(` ${contractName} verified successfully!`);\n      console.log(`View at: https://monadvision.com/address/${address}`);\n    } else {\n      console.log(` Verification failed:`, result);\n    }\n  } catch (error) {\n    console.error(\"Error:\", error);\n  }\n}\n\nasync function checkVerification(address: string) {\n  console.log(`\\nChecking verification status for ${address}...`);\n  \n  try {\n    const response = await fetch(`${SOURCIFY_API}/check-by-addresses?addresses=${address}&chainIds=${CHAIN_ID}`);\n    const result = await response.json();\n    console.log(\"Status:\", JSON.stringify(result, null, 2));\n  } catch (error) {\n    console.error(\"Error:\", error);\n  }\n}\n\nasync function main() {\n  console.log(\" Verifying contracts on MonadVision via Sourcify...\\n\");\n  \n  // Check current status\n  await checkVerification(V2_IMPLEMENTATION);\n  await checkVerification(PROXY_ADDRESS);\n  \n  // Try to verify V2 Implementation\n  await verifyContract(\n    V2_IMPLEMENTATION,\n    \"contracts/PredictionMarketV2_Flattened.sol\",\n    \"PredictionMarketV2\"\n  );\n  \n  // Try to verify Proxy\n  const proxySource = fs.readFileSync(\"contracts/PredictionMarketProxy.sol\", \"utf8\");\n  const ierc20Source = fs.readFileSync(\"contracts/interfaces/IERC20.sol\", \"utf8\");\n  \n  // Flatten proxy\n  const proxyFlattened = `// SPDX-License-Identifier: MIT\npragma solidity ^0.8.20;\n\ncontract PredictionMarketProxy {\n    bytes32 private constant IMPLEMENTATION_SLOT = bytes32(uint256(keccak256(\"eip1967.proxy.implementation\")) - 1);\n    bytes32 private constant ADMIN_SLOT = bytes32(uint256(keccak256(\"eip1967.proxy.admin\")) - 1);\n    \n    event Upgraded(address indexed implementation);\n    event AdminChanged(address previousAdmin, address newAdmin);\n    \n    constructor(address _implementation, bytes memory _data) {\n        _setImplementation(_implementation);\n        _setAdmin(msg.sender);\n        \n        if (_data.length > 0) {\n            (bool success,) = _implementation.delegatecall(_data);\n            require(success, \"Initialization failed\");\n        }\n    }\n    \n    function _setImplementation(address _implementation) private {\n        require(_implementation != address(0), \"Invalid implementation\");\n        bytes32 slot = IMPLEMENTATION_SLOT;\n        assembly {\n            sstore(slot, _implementation)\n        }\n    }\n    \n    function _getImplementation() private view returns (address impl) {\n        bytes32 slot = IMPLEMENTATION_SLOT;\n        assembly {\n            impl := sload(slot)\n        }\n    }\n    \n    function _setAdmin(address _admin) private {\n        bytes32 slot = ADMIN_SLOT;\n        assembly {\n            sstore(slot, _admin)\n        }\n    }\n    \n    function _getAdmin() private view returns (address adm) {\n        bytes32 slot = ADMIN_SLOT;\n        assembly {\n            adm := sload(slot)\n        }\n    }\n    \n    function implementation() external view returns (address) {\n        return _getImplementation();\n    }\n    \n    function admin() external view returns (address) {\n        return _getAdmin();\n    }\n    \n    function upgradeTo(address newImplementation) external {\n        require(msg.sender == _getAdmin(), \"Not admin\");\n        _setImplementation(newImplementation);\n        emit Upgraded(newImplementation);\n    }\n    \n    function changeAdmin(address newAdmin) external {\n        require(msg.sender == _getAdmin(), \"Not admin\");\n        emit AdminChanged(_getAdmin(), newAdmin);\n        _setAdmin(newAdmin);\n    }\n    \n    fallback() external payable {\n        address impl = _getImplementation();\n        assembly {\n            calldatacopy(0, 0, calldatasize())\n            let result := delegatecall(gas(), impl, 0, calldatasize(), 0, 0)\n            returndatacopy(0, 0, returndatasize())\n            switch result\n            case 0 { revert(0, returndatasize()) }\n            default { return(0, returndatasize()) }\n        }\n    }\n    \n    receive() external payable {}\n}`;\n  \n  fs.writeFileSync(\"contracts/PredictionMarketProxy_Flattened.sol\", proxyFlattened);\n  \n  await verifyContract(\n    PROXY_ADDRESS,\n    \"contracts/PredictionMarketProxy_Flattened.sol\",\n    \"PredictionMarketProxy\"\n  );\n}\n\nmain().catch(console.error);\n","path":null,"size_bytes":6049,"size_tokens":null},"scripts/deploy-uups.ts":{"content":"import { ethers } from \"ethers\";\nimport * as fs from \"fs\";\n\nconst USDC_ADDRESS = \"0x754704Bc059F8C67012fEd69BC8A327a5aafb603\";\nconst RPC_URL = \"https://rpc.monad.xyz\";\n\nasync function main() {\n  console.log(\" Deploying PredictionMarket with TRUE UUPS pattern...\\n\");\n  \n  const privateKey = process.env.DEPLOYER_PRIVATE_KEY;\n  if (!privateKey) {\n    throw new Error(\"DEPLOYER_PRIVATE_KEY not set\");\n  }\n  \n  const provider = new ethers.JsonRpcProvider(RPC_URL);\n  const wallet = new ethers.Wallet(privateKey, provider);\n  \n  console.log(\"Deployer:\", wallet.address);\n  \n  const balance = await provider.getBalance(wallet.address);\n  console.log(\"Balance:\", ethers.formatEther(balance), \"MON\\n\");\n  \n  const compiled = JSON.parse(fs.readFileSync(\"compiled_uups.json\", \"utf8\"));\n  \n  const implContract = compiled.contracts[\"contracts/PredictionMarketV2UUPS.sol:PredictionMarketV2UUPS\"];\n  const proxyContract = compiled.contracts[\"contracts/UUPSProxy.sol:UUPSProxy\"];\n  \n  const implAbi = typeof implContract.abi === 'string' ? JSON.parse(implContract.abi) : implContract.abi;\n  const implBytecode = implContract.bin.startsWith(\"0x\") ? implContract.bin : \"0x\" + implContract.bin;\n  const proxyAbi = typeof proxyContract.abi === 'string' ? JSON.parse(proxyContract.abi) : proxyContract.abi;\n  const proxyBytecode = proxyContract.bin.startsWith(\"0x\") ? proxyContract.bin : \"0x\" + proxyContract.bin;\n  \n  console.log(\"1 Deploying Implementation...\");\n  const ImplFactory = new ethers.ContractFactory(implAbi, implBytecode, wallet);\n  const implementation = await ImplFactory.deploy();\n  await implementation.waitForDeployment();\n  const implAddress = await implementation.getAddress();\n  console.log(\"   Implementation:\", implAddress);\n  \n  console.log(\"\\n2 Deploying UUPS Proxy...\");\n  const iface = new ethers.Interface(implAbi);\n  const initData = iface.encodeFunctionData(\"initialize\", [USDC_ADDRESS, wallet.address]);\n  \n  const ProxyFactory = new ethers.ContractFactory(proxyAbi, proxyBytecode, wallet);\n  const proxy = await ProxyFactory.deploy(implAddress, initData);\n  await proxy.waitForDeployment();\n  const proxyAddress = await proxy.getAddress();\n  console.log(\"   Proxy:\", proxyAddress);\n  \n  console.log(\"\\n3 Verifying...\");\n  const market = new ethers.Contract(proxyAddress, implAbi, wallet);\n  const version = await market.getVersion();\n  const owner = await market.owner();\n  const usdc = await market.usdc();\n  const treasury = await market.getTreasury();\n  const storedImpl = await market.getImplementation();\n  \n  console.log(\"   Version:\", version);\n  console.log(\"   Owner:\", owner);\n  console.log(\"   USDC:\", usdc);\n  console.log(\"   Treasury:\", treasury);\n  console.log(\"   Stored Implementation:\", storedImpl);\n  \n  console.log(\"\\n UUPS DEPLOYMENT SUCCESSFUL!\");\n  console.log(\"=====================================\");\n  console.log(\"Proxy Address (USE THIS):\", proxyAddress);\n  console.log(\"Implementation Address:\", implAddress);\n  console.log(\"=====================================\");\n  console.log(\"\\nUUPS Features:\");\n  console.log(\"- Upgrade logic in IMPLEMENTATION (not proxy)\");\n  console.log(\"- Only owner can upgrade via upgradeTo()\");\n  console.log(\"- Minimal proxy (just delegation)\");\n  console.log(\"\\nSettings:\");\n  console.log(\"- USDC:\", USDC_ADDRESS);\n  console.log(\"- Platform Fee: 2%  Treasury\");\n  console.log(\"- Treasury:\", \"0xE9059B5f1C60ecf9C1F07ac2bBa148A75394f56e\");\n  console.log(\"- Proposal Bond: 5 USDC\");\n  console.log(\"- Challenge Bond: 10 USDC\");\n  console.log(\"- Challenge Window: 24 hours\");\n  \n  const deploymentInfo = {\n    network: \"monad-mainnet\",\n    chainId: 143,\n    proxyAddress,\n    implementationAddress: implAddress,\n    proxyType: \"UUPS\",\n    usdc: USDC_ADDRESS,\n    treasury: \"0xE9059B5f1C60ecf9C1F07ac2bBa148A75394f56e\",\n    owner: wallet.address,\n    version: \"2.0.0-UUPS\",\n    deployedAt: new Date().toISOString()\n  };\n  \n  fs.writeFileSync(\"deployment-uups.json\", JSON.stringify(deploymentInfo, null, 2));\n  console.log(\"\\n Deployment info saved to deployment-uups.json\");\n}\n\nmain().catch(console.error);\n","path":null,"size_bytes":4108,"size_tokens":null},"contracts/UUPSProxy.sol":{"content":"// SPDX-License-Identifier: MIT\npragma solidity ^0.8.20;\n\ncontract UUPSProxy {\n    bytes32 private constant IMPLEMENTATION_SLOT = bytes32(uint256(keccak256(\"eip1967.proxy.implementation\")) - 1);\n    \n    constructor(address _implementation, bytes memory _data) {\n        require(_implementation != address(0), \"Invalid implementation\");\n        bytes32 slot = IMPLEMENTATION_SLOT;\n        assembly {\n            sstore(slot, _implementation)\n        }\n        \n        if (_data.length > 0) {\n            (bool success,) = _implementation.delegatecall(_data);\n            require(success, \"Initialization failed\");\n        }\n    }\n    \n    function _getImplementation() private view returns (address impl) {\n        bytes32 slot = IMPLEMENTATION_SLOT;\n        assembly {\n            impl := sload(slot)\n        }\n    }\n    \n    fallback() external payable {\n        address impl = _getImplementation();\n        assembly {\n            calldatacopy(0, 0, calldatasize())\n            let result := delegatecall(gas(), impl, 0, calldatasize(), 0, 0)\n            returndatacopy(0, 0, returndatasize())\n            switch result\n            case 0 { revert(0, returndatasize()) }\n            default { return(0, returndatasize()) }\n        }\n    }\n    \n    receive() external payable {}\n}\n","path":null,"size_bytes":1283,"size_tokens":null},"scripts/deploy-direct.ts":{"content":"import { ethers } from \"ethers\";\nimport * as fs from \"fs\";\n\nconst USDC_ADDRESS = \"0x754704Bc059F8C67012fEd69BC8A327a5aafb603\";\nconst RPC_URL = \"https://rpc.monad.xyz\";\n\nasync function main() {\n  console.log(\" Deploying PredictionMarket to Monad Mainnet...\\n\");\n  \n  const privateKey = process.env.DEPLOYER_PRIVATE_KEY;\n  if (!privateKey) {\n    throw new Error(\"DEPLOYER_PRIVATE_KEY not set\");\n  }\n  \n  const provider = new ethers.JsonRpcProvider(RPC_URL);\n  const wallet = new ethers.Wallet(privateKey, provider);\n  \n  console.log(\"Deployer:\", wallet.address);\n  \n  const balance = await provider.getBalance(wallet.address);\n  console.log(\"Balance:\", ethers.formatEther(balance), \"MON\\n\");\n  \n  if (balance === 0n) {\n    throw new Error(\"Deployer has no MON for gas fees!\");\n  }\n  \n  const compiled = JSON.parse(fs.readFileSync(\"compiled.json\", \"utf8\"));\n  \n  const implContract = compiled.contracts[\"contracts/PredictionMarketV1.sol:PredictionMarketV1\"];\n  const proxyContract = compiled.contracts[\"contracts/PredictionMarketProxy.sol:PredictionMarketProxy\"];\n  \n  const implAbi = typeof implContract.abi === 'string' ? JSON.parse(implContract.abi) : implContract.abi;\n  const implBytecode = implContract.bin.startsWith(\"0x\") ? implContract.bin : \"0x\" + implContract.bin;\n  const proxyAbi = typeof proxyContract.abi === 'string' ? JSON.parse(proxyContract.abi) : proxyContract.abi;\n  const proxyBytecode = proxyContract.bin.startsWith(\"0x\") ? proxyContract.bin : \"0x\" + proxyContract.bin;\n  \n  console.log(\"1 Deploying Implementation...\");\n  const ImplFactory = new ethers.ContractFactory(implAbi, implBytecode, wallet);\n  const implementation = await ImplFactory.deploy();\n  await implementation.waitForDeployment();\n  const implAddress = await implementation.getAddress();\n  console.log(\"   Implementation:\", implAddress);\n  \n  console.log(\"\\n2 Deploying Proxy...\");\n  const iface = new ethers.Interface(implAbi);\n  const initData = iface.encodeFunctionData(\"initialize\", [USDC_ADDRESS, wallet.address]);\n  \n  const ProxyFactory = new ethers.ContractFactory(proxyAbi, proxyBytecode, wallet);\n  const proxy = await ProxyFactory.deploy(implAddress, initData);\n  await proxy.waitForDeployment();\n  const proxyAddress = await proxy.getAddress();\n  console.log(\"   Proxy:\", proxyAddress);\n  \n  console.log(\"\\n3 Verifying...\");\n  const market = new ethers.Contract(proxyAddress, implAbi, wallet);\n  const version = await market.getVersion();\n  const owner = await market.owner();\n  const usdc = await market.usdc();\n  \n  console.log(\"   Version:\", version);\n  console.log(\"   Owner:\", owner);\n  console.log(\"   USDC:\", usdc);\n  \n  console.log(\"\\n DEPLOYMENT SUCCESSFUL!\");\n  console.log(\"=====================================\");\n  console.log(\"Proxy Address (USE THIS):\", proxyAddress);\n  console.log(\"Implementation Address:\", implAddress);\n  console.log(\"=====================================\");\n  console.log(\"\\nSettings:\");\n  console.log(\"- USDC:\", USDC_ADDRESS);\n  console.log(\"- Creator Fee: 2%\");\n  console.log(\"- Proposal Bond: 5 USDC\");\n  console.log(\"- Challenge Bond: 10 USDC\");\n  console.log(\"- Challenge Window: 24 hours\");\n  console.log(\"- Auto-Void: 7 days\");\n  \n  const deploymentInfo = {\n    network: \"monad-mainnet\",\n    chainId: 143,\n    proxyAddress,\n    implementationAddress: implAddress,\n    usdc: USDC_ADDRESS,\n    owner: wallet.address,\n    deployedAt: new Date().toISOString()\n  };\n  \n  fs.writeFileSync(\"deployment.json\", JSON.stringify(deploymentInfo, null, 2));\n  console.log(\"\\n Deployment info saved to deployment.json\");\n}\n\nmain().catch(console.error);\n","path":null,"size_bytes":3611,"size_tokens":null},"scripts/verify-uups.ts":{"content":"import * as fs from \"fs\";\n\nconst IMPL_ADDRESS = \"0x3a4730423C0B4594f8C4A6Dc2E61f5725b48a993\";\nconst PROXY_ADDRESS = \"0x0118B45105e06e9696bF8959ff3115e3F505D44C\";\nconst CHAIN_ID = \"143\";\n\nconst SOURCIFY_API = \"https://sourcify-api-monad.blockvision.org\";\n\nasync function verifyWithStandardJson(\n  address: string,\n  contractName: string,\n  sources: { [key: string]: { content: string } }\n) {\n  console.log(`\\nVerifying ${contractName} at ${address}...`);\n  \n  const standardInput = {\n    language: \"Solidity\",\n    sources: sources,\n    settings: {\n      optimizer: {\n        enabled: true,\n        runs: 200\n      },\n      viaIR: true,\n      evmVersion: \"cancun\",\n      outputSelection: {\n        \"*\": {\n          \"*\": [\"abi\", \"evm.bytecode\", \"evm.deployedBytecode\", \"metadata\"]\n        }\n      }\n    }\n  };\n  \n  const requestBody = {\n    address: address,\n    chain: CHAIN_ID,\n    files: {\n      \"standard-input.json\": JSON.stringify(standardInput)\n    },\n    compilerVersion: \"0.8.28+commit.7893614a\",\n    contractName: contractName\n  };\n  \n  try {\n    const response = await fetch(`${SOURCIFY_API}/verify/solc-json`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(requestBody)\n    });\n    \n    const result = await response.json();\n    \n    if (response.ok && result.result?.[0]?.status === \"perfect\") {\n      console.log(` ${contractName} verified successfully!`);\n      console.log(`View at: https://monadvision.com/address/${address}`);\n      return true;\n    } else {\n      console.log(`Status: ${result.result?.[0]?.status || 'failed'}`);\n      if (result.error) console.log(`Error: ${result.error}`);\n      return false;\n    }\n  } catch (error) {\n    console.error(\"Error:\", error);\n    return false;\n  }\n}\n\nasync function main() {\n  console.log(\" Verifying UUPS contracts on MonadVision...\\n\");\n  \n  const implSource = fs.readFileSync(\"contracts/PredictionMarketV2UUPS.sol\", \"utf8\");\n  const ierc20Source = fs.readFileSync(\"contracts/interfaces/IERC20.sol\", \"utf8\");\n  const proxySource = fs.readFileSync(\"contracts/UUPSProxy.sol\", \"utf8\");\n  \n  // Verify Implementation\n  const implSources = {\n    \"contracts/PredictionMarketV2UUPS.sol\": { content: implSource },\n    \"contracts/interfaces/IERC20.sol\": { content: ierc20Source }\n  };\n  \n  await verifyWithStandardJson(IMPL_ADDRESS, \"PredictionMarketV2UUPS\", implSources);\n  \n  // Verify Proxy\n  const proxySources = {\n    \"contracts/UUPSProxy.sol\": { content: proxySource }\n  };\n  \n  await verifyWithStandardJson(PROXY_ADDRESS, \"UUPSProxy\", proxySources);\n  \n  // Check status\n  console.log(\"\\n Checking verification status...\");\n  \n  const checkImpl = await fetch(`${SOURCIFY_API}/check-by-addresses?addresses=${IMPL_ADDRESS}&chainIds=${CHAIN_ID}`);\n  const implStatus = await checkImpl.json();\n  console.log(`Implementation: ${implStatus[0]?.status || 'unknown'}`);\n  \n  const checkProxy = await fetch(`${SOURCIFY_API}/check-by-addresses?addresses=${PROXY_ADDRESS}&chainIds=${CHAIN_ID}`);\n  const proxyStatus = await checkProxy.json();\n  console.log(`Proxy: ${proxyStatus[0]?.status || 'unknown'}`);\n}\n\nmain().catch(console.error);\n","path":null,"size_bytes":3177,"size_tokens":null},"contracts/interfaces/IERC20.sol":{"content":"// SPDX-License-Identifier: MIT\npragma solidity ^0.8.20;\n\ninterface IERC20 {\n    function totalSupply() external view returns (uint256);\n    function balanceOf(address account) external view returns (uint256);\n    function transfer(address to, uint256 amount) external returns (bool);\n    function allowance(address owner, address spender) external view returns (uint256);\n    function approve(address spender, uint256 amount) external returns (bool);\n    function transferFrom(address from, address to, uint256 amount) external returns (bool);\n    function decimals() external view returns (uint8);\n}\n","path":null,"size_bytes":602,"size_tokens":null},"contracts/PredictionMarketProxy_Flattened.sol":{"content":"// SPDX-License-Identifier: MIT\npragma solidity ^0.8.20;\n\ncontract PredictionMarketProxy {\n    bytes32 private constant IMPLEMENTATION_SLOT = bytes32(uint256(keccak256(\"eip1967.proxy.implementation\")) - 1);\n    bytes32 private constant ADMIN_SLOT = bytes32(uint256(keccak256(\"eip1967.proxy.admin\")) - 1);\n    \n    event Upgraded(address indexed implementation);\n    event AdminChanged(address previousAdmin, address newAdmin);\n    \n    constructor(address _implementation, bytes memory _data) {\n        _setImplementation(_implementation);\n        _setAdmin(msg.sender);\n        \n        if (_data.length > 0) {\n            (bool success,) = _implementation.delegatecall(_data);\n            require(success, \"Initialization failed\");\n        }\n    }\n    \n    function _setImplementation(address _implementation) private {\n        require(_implementation != address(0), \"Invalid implementation\");\n        bytes32 slot = IMPLEMENTATION_SLOT;\n        assembly {\n            sstore(slot, _implementation)\n        }\n    }\n    \n    function _getImplementation() private view returns (address impl) {\n        bytes32 slot = IMPLEMENTATION_SLOT;\n        assembly {\n            impl := sload(slot)\n        }\n    }\n    \n    function _setAdmin(address _admin) private {\n        bytes32 slot = ADMIN_SLOT;\n        assembly {\n            sstore(slot, _admin)\n        }\n    }\n    \n    function _getAdmin() private view returns (address adm) {\n        bytes32 slot = ADMIN_SLOT;\n        assembly {\n            adm := sload(slot)\n        }\n    }\n    \n    function implementation() external view returns (address) {\n        return _getImplementation();\n    }\n    \n    function admin() external view returns (address) {\n        return _getAdmin();\n    }\n    \n    function upgradeTo(address newImplementation) external {\n        require(msg.sender == _getAdmin(), \"Not admin\");\n        _setImplementation(newImplementation);\n        emit Upgraded(newImplementation);\n    }\n    \n    function changeAdmin(address newAdmin) external {\n        require(msg.sender == _getAdmin(), \"Not admin\");\n        emit AdminChanged(_getAdmin(), newAdmin);\n        _setAdmin(newAdmin);\n    }\n    \n    fallback() external payable {\n        address impl = _getImplementation();\n        assembly {\n            calldatacopy(0, 0, calldatasize())\n            let result := delegatecall(gas(), impl, 0, calldatasize(), 0, 0)\n            returndatacopy(0, 0, returndatasize())\n            switch result\n            case 0 { revert(0, returndatasize()) }\n            default { return(0, returndatasize()) }\n        }\n    }\n    \n    receive() external payable {}\n}","path":null,"size_bytes":2618,"size_tokens":null},"client/src/lib/contract.ts":{"content":"import { ethers } from \"ethers\";\nimport { ACTIVE_NETWORK } from \"./monad\";\n\nexport const PREDICTION_MARKET_ADDRESS = \"0x0118B45105e06e9696bF8959ff3115e3F505D44C\";\nexport const USDC_ADDRESS = \"0x754704Bc059F8C67012fEd69BC8A327a5aafb603\";\nexport const TREASURY_ADDRESS = \"0xE9059B5f1C60ecf9C1F07ac2bBa148A75394f56e\";\n\nexport const PREDICTION_MARKET_ABI = [\n  \"function usdc() view returns (address)\",\n  \"function owner() view returns (address)\",\n  \"function nextMarketId() view returns (uint256)\",\n  \"function getVersion() view returns (string)\",\n  \"function getTreasury() view returns (address)\",\n  \"function getUserBalance(address user) view returns (uint256)\",\n  \"function getMarket(uint256 marketId) view returns (tuple(uint256 id, address creator, string question, uint8 category, uint256 deadline, uint8 status, uint8 outcome, uint256 yesPool, uint256 noPool, uint256 totalVolume, string targetAsset, uint256 targetPrice, bool priceAbove, uint256 resolvedPrice, uint256 resolvedAt))\",\n  \"function getPosition(uint256 marketId, address user) view returns (tuple(uint256 yesShares, uint256 noShares))\",\n  \"function getProposal(uint256 marketId) view returns (tuple(address proposer, uint8 proposedOutcome, uint256 proposedPrice, uint256 proposalTime, uint256 bond, bool challenged, address challenger, uint256 challengeBond, uint8 challengeOutcome, uint256 challengePrice))\",\n  \"function getPrice(uint256 marketId, bool isYes) view returns (uint256)\",\n  \"function deposit(uint256 amount)\",\n  \"function withdraw(uint256 amount)\",\n  \"function createMarket(string question, uint8 category, uint256 deadline, string targetAsset, uint256 targetPrice, bool priceAbove) returns (uint256)\",\n  \"function buyShares(uint256 marketId, bool isYes, uint256 amount)\",\n  \"function proposeOutcome(uint256 marketId, uint256 currentPrice)\",\n  \"function challengeOutcome(uint256 marketId, uint256 correctPrice)\",\n  \"function finalizeResolution(uint256 marketId)\",\n  \"function voidMarket(uint256 marketId)\",\n  \"function claimWinnings(uint256 marketId)\",\n  \"event MarketCreated(uint256 indexed marketId, address indexed creator, string question, uint256 deadline, string targetAsset, uint256 targetPrice, bool priceAbove)\",\n  \"event SharesPurchased(uint256 indexed marketId, address indexed user, bool isYes, uint256 amount, uint256 shares, uint256 price)\",\n  \"event OutcomeProposed(uint256 indexed marketId, address indexed proposer, uint8 outcome, uint256 price, uint256 bond)\",\n  \"event OutcomeChallenged(uint256 indexed marketId, address indexed challenger, uint8 outcome, uint256 price, uint256 bond)\",\n  \"event MarketResolved(uint256 indexed marketId, uint8 outcome, uint256 resolvedPrice, address winner, uint256 reward)\",\n  \"event MarketVoided(uint256 indexed marketId)\",\n  \"event WinningsClaimed(uint256 indexed marketId, address indexed user, uint256 amount)\",\n  \"event Deposited(address indexed user, uint256 amount)\",\n  \"event Withdrawn(address indexed user, uint256 amount)\",\n  \"event PlatformFeeCollected(uint256 indexed marketId, uint256 amount)\"\n];\n\nexport const USDC_ABI = [\n  \"function balanceOf(address account) view returns (uint256)\",\n  \"function allowance(address owner, address spender) view returns (uint256)\",\n  \"function approve(address spender, uint256 amount) returns (bool)\",\n  \"function transfer(address to, uint256 amount) returns (bool)\",\n  \"function decimals() view returns (uint8)\"\n];\n\nexport enum MarketStatus {\n  OPEN = 0,\n  PENDING_RESOLUTION = 1,\n  RESOLVED = 2,\n  VOIDED = 3\n}\n\nexport enum Outcome {\n  UNRESOLVED = 0,\n  YES = 1,\n  NO = 2\n}\n\nexport enum Category {\n  CRYPTO = 0,\n  SPORTS = 1,\n  POLITICS = 2,\n  POP_CULTURE = 3,\n  SCIENCE = 4,\n  OTHER = 5\n}\n\nexport const CATEGORY_NAMES = [\"Crypto\", \"Sports\", \"Politics\", \"Pop Culture\", \"Science\", \"Other\"];\n\nexport function categoryToNumber(category: string): number {\n  switch (category) {\n    case \"Crypto\": return Category.CRYPTO;\n    case \"Sports\": return Category.SPORTS;\n    case \"Politics\": return Category.POLITICS;\n    case \"Pop Culture\": return Category.POP_CULTURE;\n    case \"Science\": return Category.SCIENCE;\n    case \"Other\": return Category.OTHER;\n    default: return Category.OTHER;\n  }\n}\n\nexport function categoryToString(category: number): string {\n  return CATEGORY_NAMES[category] || \"Other\";\n}\n\nexport interface Market {\n  id: bigint;\n  creator: string;\n  question: string;\n  category: number;\n  deadline: bigint;\n  status: MarketStatus;\n  outcome: Outcome;\n  yesPool: bigint;\n  noPool: bigint;\n  totalVolume: bigint;\n  targetAsset: string;\n  targetPrice: bigint;\n  priceAbove: boolean;\n  resolvedPrice: bigint;\n  resolvedAt: bigint;\n}\n\nexport interface Position {\n  yesShares: bigint;\n  noShares: bigint;\n}\n\nexport interface Proposal {\n  proposer: string;\n  proposedOutcome: Outcome;\n  proposedPrice: bigint;\n  proposalTime: bigint;\n  bond: bigint;\n  challenged: boolean;\n  challenger: string;\n  challengeBond: bigint;\n  challengeOutcome: Outcome;\n  challengePrice: bigint;\n}\n\nexport function getProvider() {\n  return new ethers.JsonRpcProvider(ACTIVE_NETWORK.rpcUrl);\n}\n\nexport function getContract(signerOrProvider?: ethers.Signer | ethers.Provider) {\n  const provider = signerOrProvider || getProvider();\n  return new ethers.Contract(PREDICTION_MARKET_ADDRESS, PREDICTION_MARKET_ABI, provider);\n}\n\nexport function getUsdcContract(signerOrProvider?: ethers.Signer | ethers.Provider) {\n  const provider = signerOrProvider || getProvider();\n  return new ethers.Contract(USDC_ADDRESS, USDC_ABI, provider);\n}\n\nexport async function getContractBalance(address: string): Promise<string> {\n  if (!address) return \"0\";\n  try {\n    const contract = getContract();\n    const balance = await contract.getUserBalance(address);\n    if (balance === null || balance === undefined) return \"0\";\n    return ethers.formatUnits(balance, 6);\n  } catch (error) {\n    console.error(\"Failed to get contract balance:\", error);\n    return \"0\";\n  }\n}\n\nexport async function getUsdcBalance(address: string): Promise<string> {\n  if (!address) return \"0\";\n  try {\n    const usdc = getUsdcContract();\n    const balance = await usdc.balanceOf(address);\n    if (balance === null || balance === undefined) return \"0\";\n    return ethers.formatUnits(balance, 6);\n  } catch (error) {\n    console.error(\"Failed to get USDC balance:\", error);\n    return \"0\";\n  }\n}\n\nexport async function getUsdcAllowance(owner: string): Promise<string> {\n  if (!owner) return \"0\";\n  try {\n    const usdc = getUsdcContract();\n    const allowance = await usdc.allowance(owner, PREDICTION_MARKET_ADDRESS);\n    if (allowance === null || allowance === undefined) return \"0\";\n    return ethers.formatUnits(allowance, 6);\n  } catch (error) {\n    console.error(\"Failed to get allowance:\", error);\n    return \"0\";\n  }\n}\n\nexport async function getNativeBalance(address: string): Promise<string> {\n  if (!address) return \"0\";\n  try {\n    const provider = getProvider();\n    const balance = await provider.getBalance(address);\n    if (balance === null || balance === undefined) return \"0\";\n    return ethers.formatEther(balance);\n  } catch (error) {\n    console.error(\"Failed to get native balance:\", error);\n    return \"0\";\n  }\n}\n\nexport async function getAllMarkets(): Promise<Market[]> {\n  try {\n    const contract = getContract();\n    const nextId = await contract.nextMarketId();\n    const markets: Market[] = [];\n    \n    for (let i = 1; i < Number(nextId); i++) {\n      try {\n        const market = await contract.getMarket(i);\n        markets.push({\n          id: market.id,\n          creator: market.creator,\n          question: market.question,\n          category: market.category,\n          deadline: market.deadline,\n          status: market.status,\n          outcome: market.outcome,\n          yesPool: market.yesPool,\n          noPool: market.noPool,\n          totalVolume: market.totalVolume,\n          targetAsset: market.targetAsset,\n          targetPrice: market.targetPrice,\n          priceAbove: market.priceAbove,\n          resolvedPrice: market.resolvedPrice,\n          resolvedAt: market.resolvedAt\n        });\n      } catch (e) {\n        console.error(`Failed to get market ${i}:`, e);\n      }\n    }\n    \n    return markets;\n  } catch (error) {\n    console.error(\"Failed to get markets:\", error);\n    return [];\n  }\n}\n\nexport async function getMarket(marketId: number): Promise<Market | null> {\n  try {\n    const contract = getContract();\n    const market = await contract.getMarket(marketId);\n    return {\n      id: market.id,\n      creator: market.creator,\n      question: market.question,\n      category: market.category,\n      deadline: market.deadline,\n      status: market.status,\n      outcome: market.outcome,\n      yesPool: market.yesPool,\n      noPool: market.noPool,\n      totalVolume: market.totalVolume,\n      targetAsset: market.targetAsset,\n      targetPrice: market.targetPrice,\n      priceAbove: market.priceAbove,\n      resolvedPrice: market.resolvedPrice,\n      resolvedAt: market.resolvedAt\n    };\n  } catch (error) {\n    console.error(\"Failed to get market:\", error);\n    return null;\n  }\n}\n\nexport async function getPosition(marketId: number, userAddress: string): Promise<Position | null> {\n  try {\n    const contract = getContract();\n    const position = await contract.getPosition(marketId, userAddress);\n    return {\n      yesShares: position.yesShares,\n      noShares: position.noShares\n    };\n  } catch (error) {\n    console.error(\"Failed to get position:\", error);\n    return null;\n  }\n}\n\nexport async function getMarketPrice(marketId: number, isYes: boolean): Promise<number> {\n  try {\n    const contract = getContract();\n    const price = await contract.getPrice(marketId, isYes);\n    return Number(price) / 100;\n  } catch (error) {\n    console.error(\"Failed to get price:\", error);\n    return 50;\n  }\n}\n\nexport function formatUsdc(amount: bigint | null | undefined): string {\n  if (amount === null || amount === undefined) return \"0\";\n  return ethers.formatUnits(amount, 6);\n}\n\nexport function parseUsdc(amount: string): bigint {\n  if (!amount || amount === \"\") return BigInt(0);\n  return ethers.parseUnits(amount, 6);\n}\n","path":null,"size_bytes":10102,"size_tokens":null},"contracts/interfaces/IOracleAdapter.sol":{"content":"// SPDX-License-Identifier: MIT\npragma solidity ^0.8.20;\n\ninterface IOracleAdapter {\n    enum Outcome { UNRESOLVED, YES, NO, VOID }\n    \n    function requestResolution(uint256 marketId) external;\n    function getOutcome(uint256 marketId) external view returns (Outcome outcome, bool finalized);\n    function getProof(uint256 marketId) external view returns (bytes memory);\n}\n\ninterface IPriceFeedAdapter is IOracleAdapter {\n    function setMarketParams(\n        uint256 marketId,\n        string calldata assetId,\n        uint256 targetPrice,\n        bool above\n    ) external;\n}\n\ninterface IOptimisticOracle is IOracleAdapter {\n    function proposeOutcome(uint256 marketId, Outcome outcome, bytes calldata evidence) external payable;\n    function disputeOutcome(uint256 marketId) external payable;\n    function finalizeOutcome(uint256 marketId) external;\n    function getProposalInfo(uint256 marketId) external view returns (\n        address proposer,\n        Outcome proposedOutcome,\n        uint256 proposalTime,\n        uint256 bondAmount,\n        bool disputed\n    );\n}\n","path":null,"size_bytes":1074,"size_tokens":null},"contracts/PredictionMarketV2_Flattened.sol":{"content":"// SPDX-License-Identifier: MIT\npragma solidity ^0.8.20;\n\ninterface IERC20 {\n    function totalSupply() external view returns (uint256);\n    function balanceOf(address account) external view returns (uint256);\n    function transfer(address to, uint256 amount) external returns (bool);\n    function allowance(address owner, address spender) external view returns (uint256);\n    function approve(address spender, uint256 amount) external returns (bool);\n    function transferFrom(address from, address to, uint256 amount) external returns (bool);\n    function decimals() external view returns (uint8);\n}\n\nabstract contract Initializable {\n    uint8 private _initialized;\n    bool private _initializing;\n    \n    modifier initializer() {\n        require(_initialized == 0, \"Already initialized\");\n        _initialized = 1;\n        _;\n    }\n    \n    modifier reinitializer(uint8 version) {\n        require(_initialized < version, \"Already initialized\");\n        _initialized = version;\n        _;\n    }\n    \n    function _disableInitializers() internal {\n        _initialized = type(uint8).max;\n    }\n}\n\nabstract contract UUPSUpgradeable {\n    address private _implementation;\n    \n    event Upgraded(address indexed implementation);\n    \n    function upgradeTo(address newImplementation) external {\n        _authorizeUpgrade(newImplementation);\n        _implementation = newImplementation;\n        emit Upgraded(newImplementation);\n    }\n    \n    function _authorizeUpgrade(address newImplementation) internal virtual;\n}\n\ncontract PredictionMarketV2 is Initializable, UUPSUpgradeable {\n    IERC20 public usdc;\n    address public owner;\n    \n    uint256 public constant PLATFORM_FEE_BPS = 200; // 2% platform fee\n    uint256 public constant BPS_DENOMINATOR = 10000;\n    uint256 public constant CHALLENGE_WINDOW = 24 hours;\n    uint256 public constant MAX_RESOLUTION_TIMEOUT = 7 days;\n    uint256 public constant MIN_PROPOSAL_BOND = 5 * 1e6; // 5 USDC\n    uint256 public constant MIN_CHALLENGE_BOND = 10 * 1e6; // 10 USDC\n    \n    address public constant TREASURY = 0xE9059B5f1C60ecf9C1F07ac2bBa148A75394f56e;\n    \n    enum MarketStatus { OPEN, PENDING_RESOLUTION, RESOLVED, VOIDED }\n    enum Outcome { UNRESOLVED, YES, NO }\n    enum Category { CRYPTO }\n    \n    struct Market {\n        uint256 id;\n        address creator;\n        string question;\n        Category category;\n        uint256 deadline;\n        MarketStatus status;\n        Outcome outcome;\n        uint256 yesPool;\n        uint256 noPool;\n        uint256 totalVolume;\n        string targetAsset;\n        uint256 targetPrice;\n        bool priceAbove;\n        uint256 resolvedPrice;\n        uint256 resolvedAt;\n    }\n    \n    struct Position {\n        uint256 yesShares;\n        uint256 noShares;\n    }\n    \n    struct Proposal {\n        address proposer;\n        Outcome proposedOutcome;\n        uint256 proposedPrice;\n        uint256 proposalTime;\n        uint256 bond;\n        bool challenged;\n        address challenger;\n        uint256 challengeBond;\n        Outcome challengeOutcome;\n        uint256 challengePrice;\n    }\n    \n    uint256 public nextMarketId;\n    mapping(uint256 => Market) public markets;\n    mapping(uint256 => mapping(address => Position)) public positions;\n    mapping(uint256 => Proposal) public proposals;\n    mapping(address => uint256) public userBalances;\n    \n    event MarketCreated(uint256 indexed marketId, address indexed creator, string question, uint256 deadline, string targetAsset, uint256 targetPrice, bool priceAbove);\n    event SharesPurchased(uint256 indexed marketId, address indexed user, bool isYes, uint256 amount, uint256 shares, uint256 price);\n    event OutcomeProposed(uint256 indexed marketId, address indexed proposer, Outcome outcome, uint256 price, uint256 bond);\n    event OutcomeChallenged(uint256 indexed marketId, address indexed challenger, Outcome outcome, uint256 price, uint256 bond);\n    event MarketResolved(uint256 indexed marketId, Outcome outcome, uint256 resolvedPrice, address winner, uint256 reward);\n    event MarketVoided(uint256 indexed marketId);\n    event WinningsClaimed(uint256 indexed marketId, address indexed user, uint256 amount);\n    event Deposited(address indexed user, uint256 amount);\n    event Withdrawn(address indexed user, uint256 amount);\n    event OwnershipTransferred(address indexed previousOwner, address indexed newOwner);\n    event PlatformFeeCollected(uint256 indexed marketId, uint256 amount);\n    \n    modifier onlyOwner() {\n        require(msg.sender == owner, \"Not owner\");\n        _;\n    }\n    \n    /// @custom:oz-upgrades-unsafe-allow constructor\n    constructor() {\n        _disableInitializers();\n    }\n    \n    function initialize(address _usdc, address _owner) public initializer {\n        usdc = IERC20(_usdc);\n        owner = _owner;\n        nextMarketId = 1;\n    }\n    \n    function initializeV2() public reinitializer(2) {\n        // V2 initialization - treasury is now a constant\n    }\n    \n    function _authorizeUpgrade(address newImplementation) internal override onlyOwner {}\n    \n    function transferOwnership(address newOwner) external onlyOwner {\n        require(newOwner != address(0), \"Invalid owner\");\n        emit OwnershipTransferred(owner, newOwner);\n        owner = newOwner;\n    }\n    \n    // ============ DEPOSIT/WITHDRAW ============\n    \n    function deposit(uint256 amount) external {\n        require(amount > 0, \"Amount must be > 0\");\n        require(usdc.transferFrom(msg.sender, address(this), amount), \"Transfer failed\");\n        userBalances[msg.sender] += amount;\n        emit Deposited(msg.sender, amount);\n    }\n    \n    function withdraw(uint256 amount) external {\n        require(amount > 0, \"Amount must be > 0\");\n        require(userBalances[msg.sender] >= amount, \"Insufficient balance\");\n        userBalances[msg.sender] -= amount;\n        require(usdc.transfer(msg.sender, amount), \"Transfer failed\");\n        emit Withdrawn(msg.sender, amount);\n    }\n    \n    // ============ MARKET CREATION ============\n    \n    function createMarket(\n        string calldata question,\n        uint256 deadline,\n        string calldata targetAsset,\n        uint256 targetPrice,\n        bool priceAbove\n    ) external returns (uint256) {\n        require(deadline > block.timestamp + 1 hours, \"Deadline too soon\");\n        require(bytes(question).length > 0, \"Question required\");\n        require(bytes(targetAsset).length > 0, \"Target asset required\");\n        require(targetPrice > 0, \"Target price required\");\n        \n        uint256 marketId = nextMarketId++;\n        \n        markets[marketId] = Market({\n            id: marketId,\n            creator: msg.sender,\n            question: question,\n            category: Category.CRYPTO,\n            deadline: deadline,\n            status: MarketStatus.OPEN,\n            outcome: Outcome.UNRESOLVED,\n            yesPool: 1000 * 1e6,\n            noPool: 1000 * 1e6,\n            totalVolume: 0,\n            targetAsset: targetAsset,\n            targetPrice: targetPrice,\n            priceAbove: priceAbove,\n            resolvedPrice: 0,\n            resolvedAt: 0\n        });\n        \n        emit MarketCreated(marketId, msg.sender, question, deadline, targetAsset, targetPrice, priceAbove);\n        return marketId;\n    }\n    \n    // ============ TRADING (AMM) ============\n    \n    function getPrice(uint256 marketId, bool isYes) public view returns (uint256) {\n        Market storage market = markets[marketId];\n        uint256 total = market.yesPool + market.noPool;\n        if (total == 0) return 5000;\n        \n        if (isYes) {\n            return (market.noPool * 10000) / total;\n        } else {\n            return (market.yesPool * 10000) / total;\n        }\n    }\n    \n    function buyShares(uint256 marketId, bool isYes, uint256 amount) external {\n        Market storage market = markets[marketId];\n        require(market.status == MarketStatus.OPEN, \"Market not open\");\n        require(block.timestamp < market.deadline, \"Market expired\");\n        require(amount > 0, \"Amount must be > 0\");\n        require(userBalances[msg.sender] >= amount, \"Insufficient balance\");\n        \n        uint256 shares;\n        uint256 price = getPrice(marketId, isYes);\n        \n        if (isYes) {\n            uint256 k = market.yesPool * market.noPool;\n            market.noPool += amount;\n            uint256 newYesPool = k / market.noPool;\n            shares = market.yesPool - newYesPool;\n            market.yesPool = newYesPool;\n        } else {\n            uint256 k = market.yesPool * market.noPool;\n            market.yesPool += amount;\n            uint256 newNoPool = k / market.yesPool;\n            shares = market.noPool - newNoPool;\n            market.noPool = newNoPool;\n        }\n        \n        require(shares > 0, \"No shares to buy\");\n        \n        userBalances[msg.sender] -= amount;\n        \n        Position storage pos = positions[marketId][msg.sender];\n        if (isYes) {\n            pos.yesShares += shares;\n        } else {\n            pos.noShares += shares;\n        }\n        \n        // 2% platform fee goes to treasury\n        uint256 platformFee = (amount * PLATFORM_FEE_BPS) / BPS_DENOMINATOR;\n        userBalances[TREASURY] += platformFee;\n        market.totalVolume += amount;\n        \n        emit PlatformFeeCollected(marketId, platformFee);\n        emit SharesPurchased(marketId, msg.sender, isYes, amount, shares, price);\n    }\n    \n    // ============ PERMISSIONLESS RESOLUTION ============\n    \n    function proposeOutcome(uint256 marketId, uint256 currentPrice) external {\n        Market storage market = markets[marketId];\n        require(market.status == MarketStatus.OPEN, \"Market not open\");\n        require(block.timestamp >= market.deadline, \"Market not expired\");\n        require(userBalances[msg.sender] >= MIN_PROPOSAL_BOND, \"Insufficient bond\");\n        \n        Proposal storage existing = proposals[marketId];\n        require(existing.proposer == address(0), \"Already proposed\");\n        \n        userBalances[msg.sender] -= MIN_PROPOSAL_BOND;\n        \n        Outcome outcome;\n        if (market.priceAbove) {\n            outcome = currentPrice >= market.targetPrice ? Outcome.YES : Outcome.NO;\n        } else {\n            outcome = currentPrice < market.targetPrice ? Outcome.YES : Outcome.NO;\n        }\n        \n        proposals[marketId] = Proposal({\n            proposer: msg.sender,\n            proposedOutcome: outcome,\n            proposedPrice: currentPrice,\n            proposalTime: block.timestamp,\n            bond: MIN_PROPOSAL_BOND,\n            challenged: false,\n            challenger: address(0),\n            challengeBond: 0,\n            challengeOutcome: Outcome.UNRESOLVED,\n            challengePrice: 0\n        });\n        \n        market.status = MarketStatus.PENDING_RESOLUTION;\n        \n        emit OutcomeProposed(marketId, msg.sender, outcome, currentPrice, MIN_PROPOSAL_BOND);\n    }\n    \n    function challengeOutcome(uint256 marketId, uint256 correctPrice) external {\n        Market storage market = markets[marketId];\n        Proposal storage proposal = proposals[marketId];\n        \n        require(market.status == MarketStatus.PENDING_RESOLUTION, \"Not pending\");\n        require(block.timestamp < proposal.proposalTime + CHALLENGE_WINDOW, \"Challenge window closed\");\n        require(!proposal.challenged, \"Already challenged\");\n        require(userBalances[msg.sender] >= MIN_CHALLENGE_BOND, \"Insufficient bond\");\n        \n        Outcome newOutcome;\n        if (market.priceAbove) {\n            newOutcome = correctPrice >= market.targetPrice ? Outcome.YES : Outcome.NO;\n        } else {\n            newOutcome = correctPrice < market.targetPrice ? Outcome.YES : Outcome.NO;\n        }\n        \n        require(newOutcome != proposal.proposedOutcome, \"Same outcome\");\n        \n        userBalances[msg.sender] -= MIN_CHALLENGE_BOND;\n        \n        proposal.challenged = true;\n        proposal.challenger = msg.sender;\n        proposal.challengeBond = MIN_CHALLENGE_BOND;\n        proposal.challengeOutcome = newOutcome;\n        proposal.challengePrice = correctPrice;\n        \n        emit OutcomeChallenged(marketId, msg.sender, newOutcome, correctPrice, MIN_CHALLENGE_BOND);\n    }\n    \n    function finalizeResolution(uint256 marketId) external {\n        Market storage market = markets[marketId];\n        Proposal storage proposal = proposals[marketId];\n        \n        require(market.status == MarketStatus.PENDING_RESOLUTION, \"Not pending\");\n        require(block.timestamp >= proposal.proposalTime + CHALLENGE_WINDOW, \"Challenge window open\");\n        \n        if (proposal.challenged) {\n            uint256 totalBonds = proposal.bond + proposal.challengeBond;\n            \n            if (proposal.challengeBond > proposal.bond) {\n                market.status = MarketStatus.RESOLVED;\n                market.outcome = proposal.challengeOutcome;\n                market.resolvedPrice = proposal.challengePrice;\n                market.resolvedAt = block.timestamp;\n                userBalances[proposal.challenger] += totalBonds;\n                emit MarketResolved(marketId, proposal.challengeOutcome, proposal.challengePrice, proposal.challenger, totalBonds);\n            } else {\n                market.status = MarketStatus.RESOLVED;\n                market.outcome = proposal.proposedOutcome;\n                market.resolvedPrice = proposal.proposedPrice;\n                market.resolvedAt = block.timestamp;\n                userBalances[proposal.proposer] += totalBonds;\n                emit MarketResolved(marketId, proposal.proposedOutcome, proposal.proposedPrice, proposal.proposer, totalBonds);\n            }\n        } else {\n            market.status = MarketStatus.RESOLVED;\n            market.outcome = proposal.proposedOutcome;\n            market.resolvedPrice = proposal.proposedPrice;\n            market.resolvedAt = block.timestamp;\n            userBalances[proposal.proposer] += proposal.bond;\n            emit MarketResolved(marketId, proposal.proposedOutcome, proposal.proposedPrice, proposal.proposer, proposal.bond);\n        }\n    }\n    \n    function voidMarket(uint256 marketId) external {\n        Market storage market = markets[marketId];\n        Proposal storage proposal = proposals[marketId];\n        \n        require(market.status == MarketStatus.OPEN || market.status == MarketStatus.PENDING_RESOLUTION, \"Cannot void\");\n        require(block.timestamp > market.deadline + MAX_RESOLUTION_TIMEOUT, \"Timeout not reached\");\n        \n        if (proposal.proposer != address(0)) {\n            userBalances[proposal.proposer] += proposal.bond;\n            if (proposal.challenged) {\n                userBalances[proposal.challenger] += proposal.challengeBond;\n            }\n        }\n        \n        market.status = MarketStatus.VOIDED;\n        emit MarketVoided(marketId);\n    }\n    \n    // ============ CLAIM WINNINGS ============\n    \n    function claimWinnings(uint256 marketId) external {\n        Market storage market = markets[marketId];\n        Position storage pos = positions[marketId][msg.sender];\n        \n        require(market.status == MarketStatus.RESOLVED || market.status == MarketStatus.VOIDED, \"Market not resolved\");\n        require(pos.yesShares > 0 || pos.noShares > 0, \"No position\");\n        \n        uint256 payout = 0;\n        \n        if (market.status == MarketStatus.VOIDED) {\n            uint256 totalShares = pos.yesShares + pos.noShares;\n            payout = totalShares;\n        } else if (market.outcome == Outcome.YES) {\n            payout = pos.yesShares;\n        } else if (market.outcome == Outcome.NO) {\n            payout = pos.noShares;\n        }\n        \n        pos.yesShares = 0;\n        pos.noShares = 0;\n        \n        if (payout > 0) {\n            userBalances[msg.sender] += payout;\n            emit WinningsClaimed(marketId, msg.sender, payout);\n        }\n    }\n    \n    // ============ VIEW FUNCTIONS ============\n    \n    function getMarket(uint256 marketId) external view returns (Market memory) {\n        return markets[marketId];\n    }\n    \n    function getPosition(uint256 marketId, address user) external view returns (Position memory) {\n        return positions[marketId][user];\n    }\n    \n    function getProposal(uint256 marketId) external view returns (Proposal memory) {\n        return proposals[marketId];\n    }\n    \n    function getUserBalance(address user) external view returns (uint256) {\n        return userBalances[user];\n    }\n    \n    function getTreasury() external pure returns (address) {\n        return TREASURY;\n    }\n    \n    function getVersion() external pure returns (string memory) {\n        return \"2.0.0\";\n    }\n}\n","path":null,"size_bytes":16665,"size_tokens":null},"scripts/upgrade-v2.ts":{"content":"import { ethers } from \"ethers\";\nimport * as fs from \"fs\";\n\nconst PROXY_ADDRESS = \"0x8A15A75501D49F44A4c2c6f0803a01534f0E3fCe\";\nconst RPC_URL = \"https://rpc.monad.xyz\";\n\nasync function main() {\n  console.log(\" Upgrading PredictionMarket to V2...\\n\");\n  \n  const privateKey = process.env.DEPLOYER_PRIVATE_KEY;\n  if (!privateKey) {\n    throw new Error(\"DEPLOYER_PRIVATE_KEY not set\");\n  }\n  \n  const provider = new ethers.JsonRpcProvider(RPC_URL);\n  const wallet = new ethers.Wallet(privateKey, provider);\n  \n  console.log(\"Upgrader:\", wallet.address);\n  \n  const balance = await provider.getBalance(wallet.address);\n  console.log(\"Balance:\", ethers.formatEther(balance), \"MON\\n\");\n  \n  const compiled = JSON.parse(fs.readFileSync(\"compiled_v2.json\", \"utf8\"));\n  \n  const v2Contract = compiled.contracts[\"contracts/PredictionMarketV2.sol:PredictionMarketV2\"];\n  const proxyContract = compiled.contracts[\"contracts/PredictionMarketProxy.sol:PredictionMarketProxy\"];\n  \n  const v2Abi = typeof v2Contract.abi === 'string' ? JSON.parse(v2Contract.abi) : v2Contract.abi;\n  const v2Bytecode = v2Contract.bin.startsWith(\"0x\") ? v2Contract.bin : \"0x\" + v2Contract.bin;\n  const proxyAbi = typeof proxyContract.abi === 'string' ? JSON.parse(proxyContract.abi) : proxyContract.abi;\n  \n  console.log(\"1 Deploying V2 Implementation...\");\n  const V2Factory = new ethers.ContractFactory(v2Abi, v2Bytecode, wallet);\n  const v2Implementation = await V2Factory.deploy();\n  await v2Implementation.waitForDeployment();\n  const v2Address = await v2Implementation.getAddress();\n  console.log(\"   V2 Implementation:\", v2Address);\n  \n  console.log(\"\\n2 Upgrading Proxy...\");\n  const proxy = new ethers.Contract(PROXY_ADDRESS, proxyAbi, wallet);\n  const upgradeTx = await proxy.upgradeTo(v2Address);\n  await upgradeTx.wait();\n  console.log(\"   Upgrade TX:\", upgradeTx.hash);\n  \n  console.log(\"\\n3 Initializing V2...\");\n  const market = new ethers.Contract(PROXY_ADDRESS, v2Abi, wallet);\n  try {\n    const initTx = await market.initializeV2();\n    await initTx.wait();\n    console.log(\"   Init V2 TX:\", initTx.hash);\n  } catch (e: any) {\n    console.log(\"   V2 already initialized or not needed\");\n  }\n  \n  console.log(\"\\n4 Verifying...\");\n  const version = await market.getVersion();\n  const treasury = await market.getTreasury();\n  const owner = await market.owner();\n  \n  console.log(\"   Version:\", version);\n  console.log(\"   Treasury:\", treasury);\n  console.log(\"   Owner:\", owner);\n  \n  console.log(\"\\n UPGRADE SUCCESSFUL!\");\n  console.log(\"=====================================\");\n  console.log(\"Proxy Address:\", PROXY_ADDRESS);\n  console.log(\"New Implementation:\", v2Address);\n  console.log(\"Treasury:\", treasury);\n  console.log(\"=====================================\");\n  console.log(\"\\nV2 Changes:\");\n  console.log(\"- Platform Fee: 2% goes to Treasury\");\n  console.log(\"- No Creator Fee\");\n  console.log(\"- Treasury:\", \"0xE9059B5f1C60ecf9C1F07ac2bBa148A75394f56e\");\n  \n  const deploymentInfo = JSON.parse(fs.readFileSync(\"deployment.json\", \"utf8\"));\n  deploymentInfo.v2ImplementationAddress = v2Address;\n  deploymentInfo.treasury = treasury;\n  deploymentInfo.upgradedAt = new Date().toISOString();\n  deploymentInfo.version = \"2.0.0\";\n  \n  fs.writeFileSync(\"deployment.json\", JSON.stringify(deploymentInfo, null, 2));\n  console.log(\"\\n Deployment info updated\");\n}\n\nmain().catch(console.error);\n","path":null,"size_bytes":3411,"size_tokens":null},"scripts/upgrade.js":{"content":"const hre = require(\"hardhat\");\n\nasync function main() {\n  const PROXY_ADDRESS = process.env.PROXY_ADDRESS;\n  \n  if (!PROXY_ADDRESS) {\n    console.error(\"Please set PROXY_ADDRESS environment variable\");\n    process.exit(1);\n  }\n  \n  const [deployer] = await hre.ethers.getSigners();\n  console.log(\"Upgrading with:\", deployer.address);\n  console.log(\"Proxy address:\", PROXY_ADDRESS);\n  \n  // 1. Deploy new implementation (e.g., PredictionMarketV2)\n  console.log(\"\\n1. Deploying new implementation...\");\n  const NewImplementation = await hre.ethers.getContractFactory(\"PredictionMarketV1\"); // Change to V2\n  const newImpl = await NewImplementation.deploy();\n  await newImpl.waitForDeployment();\n  const newImplAddress = await newImpl.getAddress();\n  console.log(\"New implementation deployed to:\", newImplAddress);\n  \n  // 2. Upgrade proxy\n  console.log(\"\\n2. Upgrading proxy...\");\n  const proxy = await hre.ethers.getContractAt(\"PredictionMarketProxy\", PROXY_ADDRESS);\n  const tx = await proxy.upgradeTo(newImplAddress);\n  await tx.wait();\n  console.log(\"Proxy upgraded!\");\n  \n  // 3. Verify\n  console.log(\"\\n3. Verifying upgrade...\");\n  const market = await hre.ethers.getContractAt(\"PredictionMarketV1\", PROXY_ADDRESS);\n  const version = await market.getVersion();\n  console.log(\"New version:\", version);\n  \n  console.log(\"\\n=== Upgrade Complete ===\");\n}\n\nmain()\n  .then(() => process.exit(0))\n  .catch((error) => {\n    console.error(\"Upgrade failed:\", error);\n    process.exit(1);\n  });\n","path":null,"size_bytes":1489,"size_tokens":null},"contracts/PredictionMarketV2.sol":{"content":"// SPDX-License-Identifier: MIT\npragma solidity ^0.8.20;\n\nimport \"./interfaces/IERC20.sol\";\n\nabstract contract Initializable {\n    uint8 private _initialized;\n    bool private _initializing;\n    \n    modifier initializer() {\n        require(_initialized == 0, \"Already initialized\");\n        _initialized = 1;\n        _;\n    }\n    \n    modifier reinitializer(uint8 version) {\n        require(_initialized < version, \"Already initialized\");\n        _initialized = version;\n        _;\n    }\n    \n    function _disableInitializers() internal {\n        _initialized = type(uint8).max;\n    }\n}\n\nabstract contract UUPSUpgradeable {\n    address private _implementation;\n    \n    event Upgraded(address indexed implementation);\n    \n    function upgradeTo(address newImplementation) external {\n        _authorizeUpgrade(newImplementation);\n        _implementation = newImplementation;\n        emit Upgraded(newImplementation);\n    }\n    \n    function _authorizeUpgrade(address newImplementation) internal virtual;\n}\n\ncontract PredictionMarketV2 is Initializable, UUPSUpgradeable {\n    IERC20 public usdc;\n    address public owner;\n    \n    uint256 public constant PLATFORM_FEE_BPS = 200; // 2% platform fee\n    uint256 public constant BPS_DENOMINATOR = 10000;\n    uint256 public constant CHALLENGE_WINDOW = 24 hours;\n    uint256 public constant MAX_RESOLUTION_TIMEOUT = 7 days;\n    uint256 public constant MIN_PROPOSAL_BOND = 5 * 1e6; // 5 USDC\n    uint256 public constant MIN_CHALLENGE_BOND = 10 * 1e6; // 10 USDC\n    \n    address public constant TREASURY = 0xE9059B5f1C60ecf9C1F07ac2bBa148A75394f56e;\n    \n    enum MarketStatus { OPEN, PENDING_RESOLUTION, RESOLVED, VOIDED }\n    enum Outcome { UNRESOLVED, YES, NO }\n    enum Category { CRYPTO }\n    \n    struct Market {\n        uint256 id;\n        address creator;\n        string question;\n        Category category;\n        uint256 deadline;\n        MarketStatus status;\n        Outcome outcome;\n        uint256 yesPool;\n        uint256 noPool;\n        uint256 totalVolume;\n        string targetAsset;\n        uint256 targetPrice;\n        bool priceAbove;\n        uint256 resolvedPrice;\n        uint256 resolvedAt;\n    }\n    \n    struct Position {\n        uint256 yesShares;\n        uint256 noShares;\n    }\n    \n    struct Proposal {\n        address proposer;\n        Outcome proposedOutcome;\n        uint256 proposedPrice;\n        uint256 proposalTime;\n        uint256 bond;\n        bool challenged;\n        address challenger;\n        uint256 challengeBond;\n        Outcome challengeOutcome;\n        uint256 challengePrice;\n    }\n    \n    uint256 public nextMarketId;\n    mapping(uint256 => Market) public markets;\n    mapping(uint256 => mapping(address => Position)) public positions;\n    mapping(uint256 => Proposal) public proposals;\n    mapping(address => uint256) public userBalances;\n    \n    event MarketCreated(uint256 indexed marketId, address indexed creator, string question, uint256 deadline, string targetAsset, uint256 targetPrice, bool priceAbove);\n    event SharesPurchased(uint256 indexed marketId, address indexed user, bool isYes, uint256 amount, uint256 shares, uint256 price);\n    event OutcomeProposed(uint256 indexed marketId, address indexed proposer, Outcome outcome, uint256 price, uint256 bond);\n    event OutcomeChallenged(uint256 indexed marketId, address indexed challenger, Outcome outcome, uint256 price, uint256 bond);\n    event MarketResolved(uint256 indexed marketId, Outcome outcome, uint256 resolvedPrice, address winner, uint256 reward);\n    event MarketVoided(uint256 indexed marketId);\n    event WinningsClaimed(uint256 indexed marketId, address indexed user, uint256 amount);\n    event Deposited(address indexed user, uint256 amount);\n    event Withdrawn(address indexed user, uint256 amount);\n    event OwnershipTransferred(address indexed previousOwner, address indexed newOwner);\n    event PlatformFeeCollected(uint256 indexed marketId, uint256 amount);\n    \n    modifier onlyOwner() {\n        require(msg.sender == owner, \"Not owner\");\n        _;\n    }\n    \n    /// @custom:oz-upgrades-unsafe-allow constructor\n    constructor() {\n        _disableInitializers();\n    }\n    \n    function initialize(address _usdc, address _owner) public initializer {\n        usdc = IERC20(_usdc);\n        owner = _owner;\n        nextMarketId = 1;\n    }\n    \n    function initializeV2() public reinitializer(2) {\n        // V2 initialization - treasury is now a constant\n    }\n    \n    function _authorizeUpgrade(address newImplementation) internal override onlyOwner {}\n    \n    function transferOwnership(address newOwner) external onlyOwner {\n        require(newOwner != address(0), \"Invalid owner\");\n        emit OwnershipTransferred(owner, newOwner);\n        owner = newOwner;\n    }\n    \n    // ============ DEPOSIT/WITHDRAW ============\n    \n    function deposit(uint256 amount) external {\n        require(amount > 0, \"Amount must be > 0\");\n        require(usdc.transferFrom(msg.sender, address(this), amount), \"Transfer failed\");\n        userBalances[msg.sender] += amount;\n        emit Deposited(msg.sender, amount);\n    }\n    \n    function withdraw(uint256 amount) external {\n        require(amount > 0, \"Amount must be > 0\");\n        require(userBalances[msg.sender] >= amount, \"Insufficient balance\");\n        userBalances[msg.sender] -= amount;\n        require(usdc.transfer(msg.sender, amount), \"Transfer failed\");\n        emit Withdrawn(msg.sender, amount);\n    }\n    \n    // ============ MARKET CREATION ============\n    \n    function createMarket(\n        string calldata question,\n        uint256 deadline,\n        string calldata targetAsset,\n        uint256 targetPrice,\n        bool priceAbove\n    ) external returns (uint256) {\n        require(deadline > block.timestamp + 1 hours, \"Deadline too soon\");\n        require(bytes(question).length > 0, \"Question required\");\n        require(bytes(targetAsset).length > 0, \"Target asset required\");\n        require(targetPrice > 0, \"Target price required\");\n        \n        uint256 marketId = nextMarketId++;\n        \n        markets[marketId] = Market({\n            id: marketId,\n            creator: msg.sender,\n            question: question,\n            category: Category.CRYPTO,\n            deadline: deadline,\n            status: MarketStatus.OPEN,\n            outcome: Outcome.UNRESOLVED,\n            yesPool: 1000 * 1e6,\n            noPool: 1000 * 1e6,\n            totalVolume: 0,\n            targetAsset: targetAsset,\n            targetPrice: targetPrice,\n            priceAbove: priceAbove,\n            resolvedPrice: 0,\n            resolvedAt: 0\n        });\n        \n        emit MarketCreated(marketId, msg.sender, question, deadline, targetAsset, targetPrice, priceAbove);\n        return marketId;\n    }\n    \n    // ============ TRADING (AMM) ============\n    \n    function getPrice(uint256 marketId, bool isYes) public view returns (uint256) {\n        Market storage market = markets[marketId];\n        uint256 total = market.yesPool + market.noPool;\n        if (total == 0) return 5000;\n        \n        if (isYes) {\n            return (market.noPool * 10000) / total;\n        } else {\n            return (market.yesPool * 10000) / total;\n        }\n    }\n    \n    function buyShares(uint256 marketId, bool isYes, uint256 amount) external {\n        Market storage market = markets[marketId];\n        require(market.status == MarketStatus.OPEN, \"Market not open\");\n        require(block.timestamp < market.deadline, \"Market expired\");\n        require(amount > 0, \"Amount must be > 0\");\n        require(userBalances[msg.sender] >= amount, \"Insufficient balance\");\n        \n        uint256 shares;\n        uint256 price = getPrice(marketId, isYes);\n        \n        if (isYes) {\n            uint256 k = market.yesPool * market.noPool;\n            market.noPool += amount;\n            uint256 newYesPool = k / market.noPool;\n            shares = market.yesPool - newYesPool;\n            market.yesPool = newYesPool;\n        } else {\n            uint256 k = market.yesPool * market.noPool;\n            market.yesPool += amount;\n            uint256 newNoPool = k / market.yesPool;\n            shares = market.noPool - newNoPool;\n            market.noPool = newNoPool;\n        }\n        \n        require(shares > 0, \"No shares to buy\");\n        \n        userBalances[msg.sender] -= amount;\n        \n        Position storage pos = positions[marketId][msg.sender];\n        if (isYes) {\n            pos.yesShares += shares;\n        } else {\n            pos.noShares += shares;\n        }\n        \n        // 2% platform fee goes to treasury\n        uint256 platformFee = (amount * PLATFORM_FEE_BPS) / BPS_DENOMINATOR;\n        userBalances[TREASURY] += platformFee;\n        market.totalVolume += amount;\n        \n        emit PlatformFeeCollected(marketId, platformFee);\n        emit SharesPurchased(marketId, msg.sender, isYes, amount, shares, price);\n    }\n    \n    // ============ PERMISSIONLESS RESOLUTION ============\n    \n    function proposeOutcome(uint256 marketId, uint256 currentPrice) external {\n        Market storage market = markets[marketId];\n        require(market.status == MarketStatus.OPEN, \"Market not open\");\n        require(block.timestamp >= market.deadline, \"Market not expired\");\n        require(userBalances[msg.sender] >= MIN_PROPOSAL_BOND, \"Insufficient bond\");\n        \n        Proposal storage existing = proposals[marketId];\n        require(existing.proposer == address(0), \"Already proposed\");\n        \n        userBalances[msg.sender] -= MIN_PROPOSAL_BOND;\n        \n        Outcome outcome;\n        if (market.priceAbove) {\n            outcome = currentPrice >= market.targetPrice ? Outcome.YES : Outcome.NO;\n        } else {\n            outcome = currentPrice < market.targetPrice ? Outcome.YES : Outcome.NO;\n        }\n        \n        proposals[marketId] = Proposal({\n            proposer: msg.sender,\n            proposedOutcome: outcome,\n            proposedPrice: currentPrice,\n            proposalTime: block.timestamp,\n            bond: MIN_PROPOSAL_BOND,\n            challenged: false,\n            challenger: address(0),\n            challengeBond: 0,\n            challengeOutcome: Outcome.UNRESOLVED,\n            challengePrice: 0\n        });\n        \n        market.status = MarketStatus.PENDING_RESOLUTION;\n        \n        emit OutcomeProposed(marketId, msg.sender, outcome, currentPrice, MIN_PROPOSAL_BOND);\n    }\n    \n    function challengeOutcome(uint256 marketId, uint256 correctPrice) external {\n        Market storage market = markets[marketId];\n        Proposal storage proposal = proposals[marketId];\n        \n        require(market.status == MarketStatus.PENDING_RESOLUTION, \"Not pending\");\n        require(block.timestamp < proposal.proposalTime + CHALLENGE_WINDOW, \"Challenge window closed\");\n        require(!proposal.challenged, \"Already challenged\");\n        require(userBalances[msg.sender] >= MIN_CHALLENGE_BOND, \"Insufficient bond\");\n        \n        Outcome newOutcome;\n        if (market.priceAbove) {\n            newOutcome = correctPrice >= market.targetPrice ? Outcome.YES : Outcome.NO;\n        } else {\n            newOutcome = correctPrice < market.targetPrice ? Outcome.YES : Outcome.NO;\n        }\n        \n        require(newOutcome != proposal.proposedOutcome, \"Same outcome\");\n        \n        userBalances[msg.sender] -= MIN_CHALLENGE_BOND;\n        \n        proposal.challenged = true;\n        proposal.challenger = msg.sender;\n        proposal.challengeBond = MIN_CHALLENGE_BOND;\n        proposal.challengeOutcome = newOutcome;\n        proposal.challengePrice = correctPrice;\n        \n        emit OutcomeChallenged(marketId, msg.sender, newOutcome, correctPrice, MIN_CHALLENGE_BOND);\n    }\n    \n    function finalizeResolution(uint256 marketId) external {\n        Market storage market = markets[marketId];\n        Proposal storage proposal = proposals[marketId];\n        \n        require(market.status == MarketStatus.PENDING_RESOLUTION, \"Not pending\");\n        require(block.timestamp >= proposal.proposalTime + CHALLENGE_WINDOW, \"Challenge window open\");\n        \n        if (proposal.challenged) {\n            uint256 totalBonds = proposal.bond + proposal.challengeBond;\n            \n            if (proposal.challengeBond > proposal.bond) {\n                market.status = MarketStatus.RESOLVED;\n                market.outcome = proposal.challengeOutcome;\n                market.resolvedPrice = proposal.challengePrice;\n                market.resolvedAt = block.timestamp;\n                userBalances[proposal.challenger] += totalBonds;\n                emit MarketResolved(marketId, proposal.challengeOutcome, proposal.challengePrice, proposal.challenger, totalBonds);\n            } else {\n                market.status = MarketStatus.RESOLVED;\n                market.outcome = proposal.proposedOutcome;\n                market.resolvedPrice = proposal.proposedPrice;\n                market.resolvedAt = block.timestamp;\n                userBalances[proposal.proposer] += totalBonds;\n                emit MarketResolved(marketId, proposal.proposedOutcome, proposal.proposedPrice, proposal.proposer, totalBonds);\n            }\n        } else {\n            market.status = MarketStatus.RESOLVED;\n            market.outcome = proposal.proposedOutcome;\n            market.resolvedPrice = proposal.proposedPrice;\n            market.resolvedAt = block.timestamp;\n            userBalances[proposal.proposer] += proposal.bond;\n            emit MarketResolved(marketId, proposal.proposedOutcome, proposal.proposedPrice, proposal.proposer, proposal.bond);\n        }\n    }\n    \n    function voidMarket(uint256 marketId) external {\n        Market storage market = markets[marketId];\n        Proposal storage proposal = proposals[marketId];\n        \n        require(market.status == MarketStatus.OPEN || market.status == MarketStatus.PENDING_RESOLUTION, \"Cannot void\");\n        require(block.timestamp > market.deadline + MAX_RESOLUTION_TIMEOUT, \"Timeout not reached\");\n        \n        if (proposal.proposer != address(0)) {\n            userBalances[proposal.proposer] += proposal.bond;\n            if (proposal.challenged) {\n                userBalances[proposal.challenger] += proposal.challengeBond;\n            }\n        }\n        \n        market.status = MarketStatus.VOIDED;\n        emit MarketVoided(marketId);\n    }\n    \n    // ============ CLAIM WINNINGS ============\n    \n    function claimWinnings(uint256 marketId) external {\n        Market storage market = markets[marketId];\n        Position storage pos = positions[marketId][msg.sender];\n        \n        require(market.status == MarketStatus.RESOLVED || market.status == MarketStatus.VOIDED, \"Market not resolved\");\n        require(pos.yesShares > 0 || pos.noShares > 0, \"No position\");\n        \n        uint256 payout = 0;\n        \n        if (market.status == MarketStatus.VOIDED) {\n            uint256 totalShares = pos.yesShares + pos.noShares;\n            payout = totalShares;\n        } else if (market.outcome == Outcome.YES) {\n            payout = pos.yesShares;\n        } else if (market.outcome == Outcome.NO) {\n            payout = pos.noShares;\n        }\n        \n        pos.yesShares = 0;\n        pos.noShares = 0;\n        \n        if (payout > 0) {\n            userBalances[msg.sender] += payout;\n            emit WinningsClaimed(marketId, msg.sender, payout);\n        }\n    }\n    \n    // ============ VIEW FUNCTIONS ============\n    \n    function getMarket(uint256 marketId) external view returns (Market memory) {\n        return markets[marketId];\n    }\n    \n    function getPosition(uint256 marketId, address user) external view returns (Position memory) {\n        return positions[marketId][user];\n    }\n    \n    function getProposal(uint256 marketId) external view returns (Proposal memory) {\n        return proposals[marketId];\n    }\n    \n    function getUserBalance(address user) external view returns (uint256) {\n        return userBalances[user];\n    }\n    \n    function getTreasury() external pure returns (address) {\n        return TREASURY;\n    }\n    \n    function getVersion() external pure returns (string memory) {\n        return \"2.0.0\";\n    }\n}\n","path":null,"size_bytes":16155,"size_tokens":null},"contracts/PredictionMarketV1.sol":{"content":"// SPDX-License-Identifier: MIT\npragma solidity ^0.8.20;\n\nimport \"./interfaces/IERC20.sol\";\n\nabstract contract Initializable {\n    uint8 private _initialized;\n    bool private _initializing;\n    \n    modifier initializer() {\n        require(_initialized == 0, \"Already initialized\");\n        _initialized = 1;\n        _;\n    }\n    \n    function _disableInitializers() internal {\n        _initialized = type(uint8).max;\n    }\n}\n\nabstract contract UUPSUpgradeable {\n    address private _implementation;\n    \n    event Upgraded(address indexed implementation);\n    \n    function upgradeTo(address newImplementation) external {\n        _authorizeUpgrade(newImplementation);\n        _implementation = newImplementation;\n        emit Upgraded(newImplementation);\n    }\n    \n    function _authorizeUpgrade(address newImplementation) internal virtual;\n}\n\ncontract PredictionMarketV1 is Initializable, UUPSUpgradeable {\n    IERC20 public usdc;\n    address public owner;\n    \n    uint256 public constant CREATOR_FEE_BPS = 200; // 2%\n    uint256 public constant BPS_DENOMINATOR = 10000;\n    uint256 public constant CHALLENGE_WINDOW = 24 hours;\n    uint256 public constant MAX_RESOLUTION_TIMEOUT = 7 days;\n    uint256 public constant MIN_PROPOSAL_BOND = 5 * 1e6; // 5 USDC\n    uint256 public constant MIN_CHALLENGE_BOND = 10 * 1e6; // 10 USDC\n    \n    enum MarketStatus { OPEN, PENDING_RESOLUTION, RESOLVED, VOIDED }\n    enum Outcome { UNRESOLVED, YES, NO }\n    enum Category { CRYPTO }\n    \n    struct Market {\n        uint256 id;\n        address creator;\n        string question;\n        Category category;\n        uint256 deadline;\n        MarketStatus status;\n        Outcome outcome;\n        uint256 yesPool;\n        uint256 noPool;\n        uint256 totalVolume;\n        string targetAsset;\n        uint256 targetPrice;\n        bool priceAbove;\n        uint256 resolvedPrice;\n        uint256 resolvedAt;\n    }\n    \n    struct Position {\n        uint256 yesShares;\n        uint256 noShares;\n    }\n    \n    struct Proposal {\n        address proposer;\n        Outcome proposedOutcome;\n        uint256 proposedPrice;\n        uint256 proposalTime;\n        uint256 bond;\n        bool challenged;\n        address challenger;\n        uint256 challengeBond;\n        Outcome challengeOutcome;\n        uint256 challengePrice;\n    }\n    \n    uint256 public nextMarketId;\n    mapping(uint256 => Market) public markets;\n    mapping(uint256 => mapping(address => Position)) public positions;\n    mapping(uint256 => Proposal) public proposals;\n    mapping(address => uint256) public userBalances;\n    \n    event MarketCreated(uint256 indexed marketId, address indexed creator, string question, uint256 deadline, string targetAsset, uint256 targetPrice, bool priceAbove);\n    event SharesPurchased(uint256 indexed marketId, address indexed user, bool isYes, uint256 amount, uint256 shares, uint256 price);\n    event OutcomeProposed(uint256 indexed marketId, address indexed proposer, Outcome outcome, uint256 price, uint256 bond);\n    event OutcomeChallenged(uint256 indexed marketId, address indexed challenger, Outcome outcome, uint256 price, uint256 bond);\n    event MarketResolved(uint256 indexed marketId, Outcome outcome, uint256 resolvedPrice, address winner, uint256 reward);\n    event MarketVoided(uint256 indexed marketId);\n    event WinningsClaimed(uint256 indexed marketId, address indexed user, uint256 amount);\n    event Deposited(address indexed user, uint256 amount);\n    event Withdrawn(address indexed user, uint256 amount);\n    event OwnershipTransferred(address indexed previousOwner, address indexed newOwner);\n    \n    modifier onlyOwner() {\n        require(msg.sender == owner, \"Not owner\");\n        _;\n    }\n    \n    /// @custom:oz-upgrades-unsafe-allow constructor\n    constructor() {\n        _disableInitializers();\n    }\n    \n    function initialize(address _usdc, address _owner) public initializer {\n        usdc = IERC20(_usdc);\n        owner = _owner;\n        nextMarketId = 1;\n    }\n    \n    function _authorizeUpgrade(address newImplementation) internal override onlyOwner {}\n    \n    function transferOwnership(address newOwner) external onlyOwner {\n        require(newOwner != address(0), \"Invalid owner\");\n        emit OwnershipTransferred(owner, newOwner);\n        owner = newOwner;\n    }\n    \n    // ============ DEPOSIT/WITHDRAW ============\n    \n    function deposit(uint256 amount) external {\n        require(amount > 0, \"Amount must be > 0\");\n        require(usdc.transferFrom(msg.sender, address(this), amount), \"Transfer failed\");\n        userBalances[msg.sender] += amount;\n        emit Deposited(msg.sender, amount);\n    }\n    \n    function withdraw(uint256 amount) external {\n        require(amount > 0, \"Amount must be > 0\");\n        require(userBalances[msg.sender] >= amount, \"Insufficient balance\");\n        userBalances[msg.sender] -= amount;\n        require(usdc.transfer(msg.sender, amount), \"Transfer failed\");\n        emit Withdrawn(msg.sender, amount);\n    }\n    \n    // ============ MARKET CREATION ============\n    \n    function createMarket(\n        string calldata question,\n        uint256 deadline,\n        string calldata targetAsset,\n        uint256 targetPrice,\n        bool priceAbove\n    ) external returns (uint256) {\n        require(deadline > block.timestamp + 1 hours, \"Deadline too soon\");\n        require(bytes(question).length > 0, \"Question required\");\n        require(bytes(targetAsset).length > 0, \"Target asset required\");\n        require(targetPrice > 0, \"Target price required\");\n        \n        uint256 marketId = nextMarketId++;\n        \n        markets[marketId] = Market({\n            id: marketId,\n            creator: msg.sender,\n            question: question,\n            category: Category.CRYPTO,\n            deadline: deadline,\n            status: MarketStatus.OPEN,\n            outcome: Outcome.UNRESOLVED,\n            yesPool: 1000 * 1e6,\n            noPool: 1000 * 1e6,\n            totalVolume: 0,\n            targetAsset: targetAsset,\n            targetPrice: targetPrice,\n            priceAbove: priceAbove,\n            resolvedPrice: 0,\n            resolvedAt: 0\n        });\n        \n        emit MarketCreated(marketId, msg.sender, question, deadline, targetAsset, targetPrice, priceAbove);\n        return marketId;\n    }\n    \n    // ============ TRADING (AMM) ============\n    \n    function getPrice(uint256 marketId, bool isYes) public view returns (uint256) {\n        Market storage market = markets[marketId];\n        uint256 total = market.yesPool + market.noPool;\n        if (total == 0) return 5000;\n        \n        if (isYes) {\n            return (market.noPool * 10000) / total;\n        } else {\n            return (market.yesPool * 10000) / total;\n        }\n    }\n    \n    function buyShares(uint256 marketId, bool isYes, uint256 amount) external {\n        Market storage market = markets[marketId];\n        require(market.status == MarketStatus.OPEN, \"Market not open\");\n        require(block.timestamp < market.deadline, \"Market expired\");\n        require(amount > 0, \"Amount must be > 0\");\n        require(userBalances[msg.sender] >= amount, \"Insufficient balance\");\n        \n        uint256 shares;\n        uint256 price = getPrice(marketId, isYes);\n        \n        if (isYes) {\n            uint256 k = market.yesPool * market.noPool;\n            market.noPool += amount;\n            uint256 newYesPool = k / market.noPool;\n            shares = market.yesPool - newYesPool;\n            market.yesPool = newYesPool;\n        } else {\n            uint256 k = market.yesPool * market.noPool;\n            market.yesPool += amount;\n            uint256 newNoPool = k / market.yesPool;\n            shares = market.noPool - newNoPool;\n            market.noPool = newNoPool;\n        }\n        \n        require(shares > 0, \"No shares to buy\");\n        \n        userBalances[msg.sender] -= amount;\n        \n        Position storage pos = positions[marketId][msg.sender];\n        if (isYes) {\n            pos.yesShares += shares;\n        } else {\n            pos.noShares += shares;\n        }\n        \n        uint256 creatorFee = (amount * CREATOR_FEE_BPS) / BPS_DENOMINATOR;\n        userBalances[market.creator] += creatorFee;\n        market.totalVolume += amount;\n        \n        emit SharesPurchased(marketId, msg.sender, isYes, amount, shares, price);\n    }\n    \n    // ============ PERMISSIONLESS RESOLUTION ============\n    \n    function proposeOutcome(uint256 marketId, uint256 currentPrice) external {\n        Market storage market = markets[marketId];\n        require(market.status == MarketStatus.OPEN, \"Market not open\");\n        require(block.timestamp >= market.deadline, \"Market not expired\");\n        require(userBalances[msg.sender] >= MIN_PROPOSAL_BOND, \"Insufficient bond\");\n        \n        Proposal storage existing = proposals[marketId];\n        require(existing.proposer == address(0), \"Already proposed\");\n        \n        userBalances[msg.sender] -= MIN_PROPOSAL_BOND;\n        \n        Outcome outcome;\n        if (market.priceAbove) {\n            outcome = currentPrice >= market.targetPrice ? Outcome.YES : Outcome.NO;\n        } else {\n            outcome = currentPrice < market.targetPrice ? Outcome.YES : Outcome.NO;\n        }\n        \n        proposals[marketId] = Proposal({\n            proposer: msg.sender,\n            proposedOutcome: outcome,\n            proposedPrice: currentPrice,\n            proposalTime: block.timestamp,\n            bond: MIN_PROPOSAL_BOND,\n            challenged: false,\n            challenger: address(0),\n            challengeBond: 0,\n            challengeOutcome: Outcome.UNRESOLVED,\n            challengePrice: 0\n        });\n        \n        market.status = MarketStatus.PENDING_RESOLUTION;\n        \n        emit OutcomeProposed(marketId, msg.sender, outcome, currentPrice, MIN_PROPOSAL_BOND);\n    }\n    \n    function challengeOutcome(uint256 marketId, uint256 correctPrice) external {\n        Market storage market = markets[marketId];\n        Proposal storage proposal = proposals[marketId];\n        \n        require(market.status == MarketStatus.PENDING_RESOLUTION, \"Not pending\");\n        require(block.timestamp < proposal.proposalTime + CHALLENGE_WINDOW, \"Challenge window closed\");\n        require(!proposal.challenged, \"Already challenged\");\n        require(userBalances[msg.sender] >= MIN_CHALLENGE_BOND, \"Insufficient bond\");\n        \n        Outcome newOutcome;\n        if (market.priceAbove) {\n            newOutcome = correctPrice >= market.targetPrice ? Outcome.YES : Outcome.NO;\n        } else {\n            newOutcome = correctPrice < market.targetPrice ? Outcome.YES : Outcome.NO;\n        }\n        \n        require(newOutcome != proposal.proposedOutcome, \"Same outcome\");\n        \n        userBalances[msg.sender] -= MIN_CHALLENGE_BOND;\n        \n        proposal.challenged = true;\n        proposal.challenger = msg.sender;\n        proposal.challengeBond = MIN_CHALLENGE_BOND;\n        proposal.challengeOutcome = newOutcome;\n        proposal.challengePrice = correctPrice;\n        \n        emit OutcomeChallenged(marketId, msg.sender, newOutcome, correctPrice, MIN_CHALLENGE_BOND);\n    }\n    \n    function finalizeResolution(uint256 marketId) external {\n        Market storage market = markets[marketId];\n        Proposal storage proposal = proposals[marketId];\n        \n        require(market.status == MarketStatus.PENDING_RESOLUTION, \"Not pending\");\n        require(block.timestamp >= proposal.proposalTime + CHALLENGE_WINDOW, \"Challenge window open\");\n        \n        if (proposal.challenged) {\n            uint256 totalBonds = proposal.bond + proposal.challengeBond;\n            \n            if (proposal.challengeBond > proposal.bond) {\n                market.status = MarketStatus.RESOLVED;\n                market.outcome = proposal.challengeOutcome;\n                market.resolvedPrice = proposal.challengePrice;\n                market.resolvedAt = block.timestamp;\n                userBalances[proposal.challenger] += totalBonds;\n                emit MarketResolved(marketId, proposal.challengeOutcome, proposal.challengePrice, proposal.challenger, totalBonds);\n            } else {\n                market.status = MarketStatus.RESOLVED;\n                market.outcome = proposal.proposedOutcome;\n                market.resolvedPrice = proposal.proposedPrice;\n                market.resolvedAt = block.timestamp;\n                userBalances[proposal.proposer] += totalBonds;\n                emit MarketResolved(marketId, proposal.proposedOutcome, proposal.proposedPrice, proposal.proposer, totalBonds);\n            }\n        } else {\n            market.status = MarketStatus.RESOLVED;\n            market.outcome = proposal.proposedOutcome;\n            market.resolvedPrice = proposal.proposedPrice;\n            market.resolvedAt = block.timestamp;\n            userBalances[proposal.proposer] += proposal.bond;\n            emit MarketResolved(marketId, proposal.proposedOutcome, proposal.proposedPrice, proposal.proposer, proposal.bond);\n        }\n    }\n    \n    function voidMarket(uint256 marketId) external {\n        Market storage market = markets[marketId];\n        Proposal storage proposal = proposals[marketId];\n        \n        require(market.status == MarketStatus.OPEN || market.status == MarketStatus.PENDING_RESOLUTION, \"Cannot void\");\n        require(block.timestamp > market.deadline + MAX_RESOLUTION_TIMEOUT, \"Timeout not reached\");\n        \n        if (proposal.proposer != address(0)) {\n            userBalances[proposal.proposer] += proposal.bond;\n            if (proposal.challenged) {\n                userBalances[proposal.challenger] += proposal.challengeBond;\n            }\n        }\n        \n        market.status = MarketStatus.VOIDED;\n        emit MarketVoided(marketId);\n    }\n    \n    // ============ CLAIM WINNINGS ============\n    \n    function claimWinnings(uint256 marketId) external {\n        Market storage market = markets[marketId];\n        Position storage pos = positions[marketId][msg.sender];\n        \n        require(market.status == MarketStatus.RESOLVED || market.status == MarketStatus.VOIDED, \"Market not resolved\");\n        require(pos.yesShares > 0 || pos.noShares > 0, \"No position\");\n        \n        uint256 payout = 0;\n        \n        if (market.status == MarketStatus.VOIDED) {\n            uint256 totalShares = pos.yesShares + pos.noShares;\n            payout = totalShares;\n        } else if (market.outcome == Outcome.YES) {\n            payout = pos.yesShares;\n        } else if (market.outcome == Outcome.NO) {\n            payout = pos.noShares;\n        }\n        \n        pos.yesShares = 0;\n        pos.noShares = 0;\n        \n        if (payout > 0) {\n            userBalances[msg.sender] += payout;\n            emit WinningsClaimed(marketId, msg.sender, payout);\n        }\n    }\n    \n    // ============ VIEW FUNCTIONS ============\n    \n    function getMarket(uint256 marketId) external view returns (Market memory) {\n        return markets[marketId];\n    }\n    \n    function getPosition(uint256 marketId, address user) external view returns (Position memory) {\n        return positions[marketId][user];\n    }\n    \n    function getProposal(uint256 marketId) external view returns (Proposal memory) {\n        return proposals[marketId];\n    }\n    \n    function getUserBalance(address user) external view returns (uint256) {\n        return userBalances[user];\n    }\n    \n    function getVersion() external pure returns (string memory) {\n        return \"1.0.0\";\n    }\n}\n","path":null,"size_bytes":15498,"size_tokens":null},"client/src/hooks/useContract.tsx":{"content":"import { useState, useCallback } from \"react\";\nimport { ethers } from \"ethers\";\nimport { useAccount } from \"wagmi\";\nimport {\n  PREDICTION_MARKET_ADDRESS,\n  PREDICTION_MARKET_ABI,\n  USDC_ADDRESS,\n  USDC_ABI,\n  getContractBalance,\n  getUsdcBalance,\n  getUsdcAllowance,\n  getNativeBalance,\n  parseUsdc,\n  Market,\n  getAllMarkets,\n  getMarket,\n  getPosition,\n  Position,\n  categoryToNumber\n} from \"../lib/contract\";\n\nconst MONAD_CHAIN_ID = 143;\n\nexport function useContract() {\n  const { address, isConnected } = useAccount();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const getSigner = useCallback(async () => {\n    if (!window.ethereum) throw new Error(\"No wallet found. Please install MetaMask.\");\n    if (!isConnected) throw new Error(\"Wallet not connected\");\n    \n    const provider = new ethers.BrowserProvider(window.ethereum);\n    \n    const network = await provider.getNetwork();\n    if (Number(network.chainId) !== MONAD_CHAIN_ID) {\n      try {\n        await window.ethereum.request({\n          method: 'wallet_switchEthereumChain',\n          params: [{ chainId: '0x8f' }],\n        });\n        await new Promise(resolve => setTimeout(resolve, 500));\n      } catch (switchError: any) {\n        if (switchError.code === 4902) {\n          try {\n            await window.ethereum.request({\n              method: 'wallet_addEthereumChain',\n              params: [{\n                chainId: '0x8f',\n                chainName: 'Monad',\n                nativeCurrency: { name: 'MON', symbol: 'MON', decimals: 18 },\n                rpcUrls: ['https://rpc.monad.xyz'],\n                blockExplorerUrls: ['https://monadvision.com']\n              }],\n            });\n          } catch (addError) {\n            throw new Error(\"Please add Monad network to your wallet\");\n          }\n        } else if (switchError.code === 4001) {\n          throw new Error(\"Please switch to Monad network\");\n        } else {\n          throw new Error(\"Failed to switch network\");\n        }\n      }\n    }\n    \n    try {\n      return await provider.getSigner();\n    } catch (e: any) {\n      if (e.code === 4001) {\n        throw new Error(\"Connection rejected by user\");\n      }\n      throw new Error(\"Failed to connect to wallet\");\n    }\n  }, [isConnected]);\n\n  const getContractWithSigner = useCallback(async () => {\n    const signer = await getSigner();\n    return new ethers.Contract(PREDICTION_MARKET_ADDRESS, PREDICTION_MARKET_ABI, signer);\n  }, [getSigner]);\n\n  const getUsdcWithSigner = useCallback(async () => {\n    const signer = await getSigner();\n    return new ethers.Contract(USDC_ADDRESS, USDC_ABI, signer);\n  }, [getSigner]);\n\n  const approveUsdc = useCallback(async (amount: string) => {\n    setLoading(true);\n    setError(null);\n    try {\n      const usdc = await getUsdcWithSigner();\n      const tx = await usdc.approve(PREDICTION_MARKET_ADDRESS, parseUsdc(amount));\n      await tx.wait();\n      return true;\n    } catch (e: any) {\n      console.error(\"Approve error:\", e);\n      const msg = e.message?.toLowerCase() || \"\";\n      const shortMsg = e.shortMessage?.toLowerCase() || \"\";\n      \n      if (e.code === 4001 || e.code === \"ACTION_REJECTED\") {\n        setError(\"Transaction rejected by user\");\n      } else if (msg.includes(\"insufficient funds for gas\") || shortMsg.includes(\"insufficient funds\")) {\n        setError(\"Need MON for gas fees. Add MON to your wallet.\");\n      } else if (msg.includes(\"network\") || msg.includes(\"chain\") || msg.includes(\"switch\")) {\n        setError(\"Please switch to Monad network (Chain ID 143)\");\n      } else if (msg.includes(\"user rejected\") || msg.includes(\"user denied\")) {\n        setError(\"Transaction rejected by user\");\n      } else {\n        setError(e.shortMessage || e.reason || e.message || \"Approval failed\");\n      }\n      return false;\n    } finally {\n      setLoading(false);\n    }\n  }, [getUsdcWithSigner]);\n\n  const deposit = useCallback(async (amount: string) => {\n    setLoading(true);\n    setError(null);\n    try {\n      const contract = await getContractWithSigner();\n      const tx = await contract.deposit(parseUsdc(amount));\n      await tx.wait();\n      return true;\n    } catch (e: any) {\n      console.error(\"Deposit error:\", e);\n      const msg = e.message?.toLowerCase() || \"\";\n      const shortMsg = e.shortMessage?.toLowerCase() || \"\";\n      \n      if (e.code === 4001 || e.code === \"ACTION_REJECTED\") {\n        setError(\"Transaction rejected by user\");\n      } else if (msg.includes(\"insufficient funds for gas\") || shortMsg.includes(\"insufficient funds\")) {\n        setError(\"Need MON for gas fees. Add MON to your wallet.\");\n      } else if (msg.includes(\"allowance\") || msg.includes(\"approve\") || msg.includes(\"erc20\")) {\n        setError(\"Please approve USDC first\");\n      } else if (msg.includes(\"user rejected\") || msg.includes(\"user denied\")) {\n        setError(\"Transaction rejected by user\");\n      } else {\n        setError(e.shortMessage || e.reason || e.message || \"Deposit failed\");\n      }\n      return false;\n    } finally {\n      setLoading(false);\n    }\n  }, [getContractWithSigner]);\n\n  const withdraw = useCallback(async (amount: string) => {\n    setLoading(true);\n    setError(null);\n    try {\n      const contract = await getContractWithSigner();\n      const tx = await contract.withdraw(parseUsdc(amount));\n      await tx.wait();\n      return true;\n    } catch (e: any) {\n      setError(e.message || \"Withdrawal failed\");\n      return false;\n    } finally {\n      setLoading(false);\n    }\n  }, [getContractWithSigner]);\n\n  const createMarket = useCallback(async (\n    question: string,\n    category: string,\n    deadline: number,\n    targetAsset: string,\n    targetPrice: string,\n    priceAbove: boolean\n  ) => {\n    setLoading(true);\n    setError(null);\n    try {\n      const contract = await getContractWithSigner();\n      const priceInUnits = targetPrice && targetPrice !== \"0\" ? ethers.parseUnits(targetPrice, 6) : BigInt(0);\n      const categoryNum = categoryToNumber(category);\n      const tx = await contract.createMarket(question, categoryNum, deadline, targetAsset || \"\", priceInUnits, priceAbove);\n      const receipt = await tx.wait();\n      \n      const event = receipt.logs.find((log: any) => {\n        try {\n          const parsed = contract.interface.parseLog(log);\n          return parsed?.name === \"MarketCreated\";\n        } catch {\n          return false;\n        }\n      });\n      \n      if (event) {\n        const parsed = contract.interface.parseLog(event);\n        return Number(parsed?.args.marketId);\n      }\n      return null;\n    } catch (e: any) {\n      setError(e.message || \"Market creation failed\");\n      return null;\n    } finally {\n      setLoading(false);\n    }\n  }, [getContractWithSigner]);\n\n  const buyShares = useCallback(async (marketId: number, isYes: boolean, amount: string) => {\n    setLoading(true);\n    setError(null);\n    try {\n      const contract = await getContractWithSigner();\n      const tx = await contract.buyShares(marketId, isYes, parseUsdc(amount));\n      await tx.wait();\n      return true;\n    } catch (e: any) {\n      setError(e.message || \"Buy failed\");\n      return false;\n    } finally {\n      setLoading(false);\n    }\n  }, [getContractWithSigner]);\n\n  const proposeOutcome = useCallback(async (marketId: number, currentPrice: string) => {\n    setLoading(true);\n    setError(null);\n    try {\n      const contract = await getContractWithSigner();\n      const priceInUnits = ethers.parseUnits(currentPrice, 6);\n      const tx = await contract.proposeOutcome(marketId, priceInUnits);\n      await tx.wait();\n      return true;\n    } catch (e: any) {\n      setError(e.message || \"Proposal failed\");\n      return false;\n    } finally {\n      setLoading(false);\n    }\n  }, [getContractWithSigner]);\n\n  const challengeOutcome = useCallback(async (marketId: number, correctPrice: string) => {\n    setLoading(true);\n    setError(null);\n    try {\n      const contract = await getContractWithSigner();\n      const priceInUnits = ethers.parseUnits(correctPrice, 6);\n      const tx = await contract.challengeOutcome(marketId, priceInUnits);\n      await tx.wait();\n      return true;\n    } catch (e: any) {\n      setError(e.message || \"Challenge failed\");\n      return false;\n    } finally {\n      setLoading(false);\n    }\n  }, [getContractWithSigner]);\n\n  const finalizeResolution = useCallback(async (marketId: number) => {\n    setLoading(true);\n    setError(null);\n    try {\n      const contract = await getContractWithSigner();\n      const tx = await contract.finalizeResolution(marketId);\n      await tx.wait();\n      return true;\n    } catch (e: any) {\n      setError(e.message || \"Finalization failed\");\n      return false;\n    } finally {\n      setLoading(false);\n    }\n  }, [getContractWithSigner]);\n\n  const claimWinnings = useCallback(async (marketId: number) => {\n    setLoading(true);\n    setError(null);\n    try {\n      const contract = await getContractWithSigner();\n      const tx = await contract.claimWinnings(marketId);\n      await tx.wait();\n      return true;\n    } catch (e: any) {\n      setError(e.message || \"Claim failed\");\n      return false;\n    } finally {\n      setLoading(false);\n    }\n  }, [getContractWithSigner]);\n\n  return {\n    address,\n    isConnected,\n    loading,\n    error,\n    approveUsdc,\n    deposit,\n    withdraw,\n    createMarket,\n    buyShares,\n    proposeOutcome,\n    challengeOutcome,\n    finalizeResolution,\n    claimWinnings,\n    getContractBalance: () => address ? getContractBalance(address) : Promise.resolve(\"0\"),\n    getUsdcBalance: () => address ? getUsdcBalance(address) : Promise.resolve(\"0\"),\n    getUsdcAllowance: () => address ? getUsdcAllowance(address) : Promise.resolve(\"0\"),\n    getNativeBalance: () => address ? getNativeBalance(address) : Promise.resolve(\"0\"),\n    getAllMarkets,\n    getMarket,\n    getPosition: (marketId: number) => address ? getPosition(marketId, address) : Promise.resolve(null)\n  };\n}\n","path":null,"size_bytes":9979,"size_tokens":null},"scripts/deploy-monad.ts":{"content":"import { ethers } from \"ethers\";\n\nconst USDC_ADDRESS = \"0x754704Bc059F8C67012fEd69BC8A327a5aafb603\";\nconst RPC_URL = \"https://rpc.monad.xyz\";\n\n// Contract bytecode and ABI (compiled)\nconst PredictionMarketV1 = {\n  abi: [\n    \"function initialize(address _usdc, address _owner) public\",\n    \"function getVersion() external pure returns (string memory)\",\n    \"function owner() external view returns (address)\",\n    \"function usdc() external view returns (address)\",\n    \"function deposit(uint256 amount) external\",\n    \"function withdraw(uint256 amount) external\",\n    \"function createMarket(string calldata question, uint256 deadline, string calldata targetAsset, uint256 targetPrice, bool priceAbove) external returns (uint256)\",\n    \"function buyShares(uint256 marketId, bool isYes, uint256 amount) external\",\n    \"function proposeOutcome(uint256 marketId, uint256 currentPrice) external\",\n    \"function challengeOutcome(uint256 marketId, uint256 correctPrice) external\",\n    \"function finalizeResolution(uint256 marketId) external\",\n    \"function claimWinnings(uint256 marketId) external\",\n    \"function getMarket(uint256 marketId) external view returns (tuple(uint256 id, address creator, string question, uint8 category, uint256 deadline, uint8 status, uint8 outcome, uint256 yesPool, uint256 noPool, uint256 totalVolume, string targetAsset, uint256 targetPrice, bool priceAbove, uint256 resolvedPrice, uint256 resolvedAt))\",\n    \"function getUserBalance(address user) external view returns (uint256)\",\n    \"function getPrice(uint256 marketId, bool isYes) public view returns (uint256)\"\n  ]\n};\n\nasync function main() {\n  console.log(\" Deploying PredictionMarket to Monad Mainnet...\\n\");\n  \n  const privateKey = process.env.DEPLOYER_PRIVATE_KEY;\n  if (!privateKey) {\n    throw new Error(\"DEPLOYER_PRIVATE_KEY not set\");\n  }\n  \n  const provider = new ethers.JsonRpcProvider(RPC_URL);\n  const wallet = new ethers.Wallet(privateKey, provider);\n  \n  console.log(\"Deployer:\", wallet.address);\n  \n  const balance = await provider.getBalance(wallet.address);\n  console.log(\"Balance:\", ethers.formatEther(balance), \"MON\\n\");\n  \n  if (balance === 0n) {\n    throw new Error(\"Deployer has no MON for gas fees!\");\n  }\n  \n  // Read compiled bytecode\n  const fs = await import(\"fs\");\n  const path = await import(\"path\");\n  \n  // Check if artifacts exist\n  const artifactPath = path.join(process.cwd(), \"artifacts/contracts/PredictionMarketV1.sol/PredictionMarketV1.json\");\n  \n  if (!fs.existsSync(artifactPath)) {\n    console.log(\" Contract not compiled. Please compile first with:\");\n    console.log(\"   npx hardhat compile --config hardhat.config.cjs\");\n    process.exit(1);\n  }\n  \n  const artifact = JSON.parse(fs.readFileSync(artifactPath, \"utf8\"));\n  const bytecode = artifact.bytecode;\n  \n  // Deploy Implementation\n  console.log(\"1 Deploying Implementation...\");\n  const ImplFactory = new ethers.ContractFactory(artifact.abi, bytecode, wallet);\n  const implementation = await ImplFactory.deploy();\n  await implementation.waitForDeployment();\n  const implAddress = await implementation.getAddress();\n  console.log(\"   Implementation:\", implAddress);\n  \n  // Deploy Proxy\n  console.log(\"\\n2 Deploying Proxy...\");\n  const proxyArtifactPath = path.join(process.cwd(), \"artifacts/contracts/PredictionMarketProxy.sol/PredictionMarketProxy.json\");\n  const proxyArtifact = JSON.parse(fs.readFileSync(proxyArtifactPath, \"utf8\"));\n  \n  // Encode initialize call\n  const iface = new ethers.Interface(artifact.abi);\n  const initData = iface.encodeFunctionData(\"initialize\", [USDC_ADDRESS, wallet.address]);\n  \n  const ProxyFactory = new ethers.ContractFactory(proxyArtifact.abi, proxyArtifact.bytecode, wallet);\n  const proxy = await ProxyFactory.deploy(implAddress, initData);\n  await proxy.waitForDeployment();\n  const proxyAddress = await proxy.getAddress();\n  console.log(\"   Proxy:\", proxyAddress);\n  \n  // Verify\n  console.log(\"\\n3 Verifying...\");\n  const market = new ethers.Contract(proxyAddress, artifact.abi, wallet);\n  const version = await market.getVersion();\n  const owner = await market.owner();\n  const usdc = await market.usdc();\n  \n  console.log(\"   Version:\", version);\n  console.log(\"   Owner:\", owner);\n  console.log(\"   USDC:\", usdc);\n  \n  console.log(\"\\n DEPLOYMENT SUCCESSFUL!\");\n  console.log(\"=====================================\");\n  console.log(\"Proxy Address (USE THIS):\", proxyAddress);\n  console.log(\"Implementation Address:\", implAddress);\n  console.log(\"=====================================\");\n  console.log(\"\\nSettings:\");\n  console.log(\"- USDC:\", USDC_ADDRESS);\n  console.log(\"- Creator Fee: 2%\");\n  console.log(\"- Proposal Bond: 5 USDC\");\n  console.log(\"- Challenge Bond: 10 USDC\");\n  console.log(\"- Challenge Window: 24 hours\");\n  console.log(\"- Auto-Void: 7 days\");\n  \n  // Save deployment info\n  const deploymentInfo = {\n    network: \"monad-mainnet\",\n    chainId: 143,\n    proxyAddress,\n    implementationAddress: implAddress,\n    usdc: USDC_ADDRESS,\n    owner: wallet.address,\n    deployedAt: new Date().toISOString()\n  };\n  \n  fs.writeFileSync(\"deployment.json\", JSON.stringify(deploymentInfo, null, 2));\n  console.log(\"\\n Deployment info saved to deployment.json\");\n}\n\nmain().catch(console.error);\n","path":null,"size_bytes":5258,"size_tokens":null},"contracts/PredictionMarketV2UUPS.sol":{"content":"// SPDX-License-Identifier: MIT\npragma solidity ^0.8.20;\n\nimport \"./interfaces/IERC20.sol\";\n\ncontract PredictionMarketV2UUPS {\n    bytes32 private constant IMPLEMENTATION_SLOT = bytes32(uint256(keccak256(\"eip1967.proxy.implementation\")) - 1);\n    \n    IERC20 public usdc;\n    address public owner;\n    uint8 private _initialized;\n    \n    uint256 public constant PLATFORM_FEE_BPS = 200; // 2% platform fee\n    uint256 public constant BPS_DENOMINATOR = 10000;\n    uint256 public constant CHALLENGE_WINDOW = 24 hours;\n    uint256 public constant MAX_RESOLUTION_TIMEOUT = 7 days;\n    uint256 public constant MIN_PROPOSAL_BOND = 5 * 1e6; // 5 USDC\n    uint256 public constant MIN_CHALLENGE_BOND = 10 * 1e6; // 10 USDC\n    \n    address public constant TREASURY = 0xE9059B5f1C60ecf9C1F07ac2bBa148A75394f56e;\n    \n    enum MarketStatus { OPEN, PENDING_RESOLUTION, RESOLVED, VOIDED }\n    enum Outcome { UNRESOLVED, YES, NO }\n    enum Category { CRYPTO }\n    \n    struct Market {\n        uint256 id;\n        address creator;\n        string question;\n        Category category;\n        uint256 deadline;\n        MarketStatus status;\n        Outcome outcome;\n        uint256 yesPool;\n        uint256 noPool;\n        uint256 totalVolume;\n        string targetAsset;\n        uint256 targetPrice;\n        bool priceAbove;\n        uint256 resolvedPrice;\n        uint256 resolvedAt;\n    }\n    \n    struct Position {\n        uint256 yesShares;\n        uint256 noShares;\n    }\n    \n    struct Proposal {\n        address proposer;\n        Outcome proposedOutcome;\n        uint256 proposedPrice;\n        uint256 proposalTime;\n        uint256 bond;\n        bool challenged;\n        address challenger;\n        uint256 challengeBond;\n        Outcome challengeOutcome;\n        uint256 challengePrice;\n    }\n    \n    uint256 public nextMarketId;\n    mapping(uint256 => Market) public markets;\n    mapping(uint256 => mapping(address => Position)) public positions;\n    mapping(uint256 => Proposal) public proposals;\n    mapping(address => uint256) public userBalances;\n    \n    event MarketCreated(uint256 indexed marketId, address indexed creator, string question, uint256 deadline, string targetAsset, uint256 targetPrice, bool priceAbove);\n    event SharesPurchased(uint256 indexed marketId, address indexed user, bool isYes, uint256 amount, uint256 shares, uint256 price);\n    event OutcomeProposed(uint256 indexed marketId, address indexed proposer, Outcome outcome, uint256 price, uint256 bond);\n    event OutcomeChallenged(uint256 indexed marketId, address indexed challenger, Outcome outcome, uint256 price, uint256 bond);\n    event MarketResolved(uint256 indexed marketId, Outcome outcome, uint256 resolvedPrice, address winner, uint256 reward);\n    event MarketVoided(uint256 indexed marketId);\n    event WinningsClaimed(uint256 indexed marketId, address indexed user, uint256 amount);\n    event Deposited(address indexed user, uint256 amount);\n    event Withdrawn(address indexed user, uint256 amount);\n    event OwnershipTransferred(address indexed previousOwner, address indexed newOwner);\n    event PlatformFeeCollected(uint256 indexed marketId, uint256 amount);\n    event Upgraded(address indexed implementation);\n    \n    modifier onlyOwner() {\n        require(msg.sender == owner, \"Not owner\");\n        _;\n    }\n    \n    modifier initializer() {\n        require(_initialized == 0, \"Already initialized\");\n        _initialized = 1;\n        _;\n    }\n    \n    constructor() {\n        _initialized = type(uint8).max;\n    }\n    \n    function initialize(address _usdc, address _owner) public initializer {\n        usdc = IERC20(_usdc);\n        owner = _owner;\n        nextMarketId = 1;\n    }\n    \n    function upgradeTo(address newImplementation) external onlyOwner {\n        require(newImplementation != address(0), \"Invalid implementation\");\n        bytes32 slot = IMPLEMENTATION_SLOT;\n        assembly {\n            sstore(slot, newImplementation)\n        }\n        emit Upgraded(newImplementation);\n    }\n    \n    function getImplementation() external view returns (address impl) {\n        bytes32 slot = IMPLEMENTATION_SLOT;\n        assembly {\n            impl := sload(slot)\n        }\n    }\n    \n    function transferOwnership(address newOwner) external onlyOwner {\n        require(newOwner != address(0), \"Invalid owner\");\n        emit OwnershipTransferred(owner, newOwner);\n        owner = newOwner;\n    }\n    \n    // ============ DEPOSIT/WITHDRAW ============\n    \n    function deposit(uint256 amount) external {\n        require(amount > 0, \"Amount must be > 0\");\n        require(usdc.transferFrom(msg.sender, address(this), amount), \"Transfer failed\");\n        userBalances[msg.sender] += amount;\n        emit Deposited(msg.sender, amount);\n    }\n    \n    function withdraw(uint256 amount) external {\n        require(amount > 0, \"Amount must be > 0\");\n        require(userBalances[msg.sender] >= amount, \"Insufficient balance\");\n        userBalances[msg.sender] -= amount;\n        require(usdc.transfer(msg.sender, amount), \"Transfer failed\");\n        emit Withdrawn(msg.sender, amount);\n    }\n    \n    // ============ MARKET CREATION ============\n    \n    function createMarket(\n        string calldata question,\n        uint256 deadline,\n        string calldata targetAsset,\n        uint256 targetPrice,\n        bool priceAbove\n    ) external returns (uint256) {\n        require(deadline > block.timestamp + 1 hours, \"Deadline too soon\");\n        require(bytes(question).length > 0, \"Question required\");\n        require(bytes(targetAsset).length > 0, \"Target asset required\");\n        require(targetPrice > 0, \"Target price required\");\n        \n        uint256 marketId = nextMarketId++;\n        \n        markets[marketId] = Market({\n            id: marketId,\n            creator: msg.sender,\n            question: question,\n            category: Category.CRYPTO,\n            deadline: deadline,\n            status: MarketStatus.OPEN,\n            outcome: Outcome.UNRESOLVED,\n            yesPool: 1000 * 1e6,\n            noPool: 1000 * 1e6,\n            totalVolume: 0,\n            targetAsset: targetAsset,\n            targetPrice: targetPrice,\n            priceAbove: priceAbove,\n            resolvedPrice: 0,\n            resolvedAt: 0\n        });\n        \n        emit MarketCreated(marketId, msg.sender, question, deadline, targetAsset, targetPrice, priceAbove);\n        return marketId;\n    }\n    \n    // ============ TRADING (AMM) ============\n    \n    function getPrice(uint256 marketId, bool isYes) public view returns (uint256) {\n        Market storage market = markets[marketId];\n        uint256 total = market.yesPool + market.noPool;\n        if (total == 0) return 5000;\n        \n        if (isYes) {\n            return (market.noPool * 10000) / total;\n        } else {\n            return (market.yesPool * 10000) / total;\n        }\n    }\n    \n    function buyShares(uint256 marketId, bool isYes, uint256 amount) external {\n        Market storage market = markets[marketId];\n        require(market.status == MarketStatus.OPEN, \"Market not open\");\n        require(block.timestamp < market.deadline, \"Market expired\");\n        require(amount > 0, \"Amount must be > 0\");\n        require(userBalances[msg.sender] >= amount, \"Insufficient balance\");\n        \n        uint256 shares;\n        uint256 price = getPrice(marketId, isYes);\n        \n        if (isYes) {\n            uint256 k = market.yesPool * market.noPool;\n            market.noPool += amount;\n            uint256 newYesPool = k / market.noPool;\n            shares = market.yesPool - newYesPool;\n            market.yesPool = newYesPool;\n        } else {\n            uint256 k = market.yesPool * market.noPool;\n            market.yesPool += amount;\n            uint256 newNoPool = k / market.yesPool;\n            shares = market.noPool - newNoPool;\n            market.noPool = newNoPool;\n        }\n        \n        require(shares > 0, \"No shares to buy\");\n        \n        userBalances[msg.sender] -= amount;\n        \n        Position storage pos = positions[marketId][msg.sender];\n        if (isYes) {\n            pos.yesShares += shares;\n        } else {\n            pos.noShares += shares;\n        }\n        \n        uint256 platformFee = (amount * PLATFORM_FEE_BPS) / BPS_DENOMINATOR;\n        userBalances[TREASURY] += platformFee;\n        market.totalVolume += amount;\n        \n        emit PlatformFeeCollected(marketId, platformFee);\n        emit SharesPurchased(marketId, msg.sender, isYes, amount, shares, price);\n    }\n    \n    // ============ PERMISSIONLESS RESOLUTION ============\n    \n    function proposeOutcome(uint256 marketId, uint256 currentPrice) external {\n        Market storage market = markets[marketId];\n        require(market.status == MarketStatus.OPEN, \"Market not open\");\n        require(block.timestamp >= market.deadline, \"Market not expired\");\n        require(userBalances[msg.sender] >= MIN_PROPOSAL_BOND, \"Insufficient bond\");\n        \n        Proposal storage existing = proposals[marketId];\n        require(existing.proposer == address(0), \"Already proposed\");\n        \n        userBalances[msg.sender] -= MIN_PROPOSAL_BOND;\n        \n        Outcome outcome;\n        if (market.priceAbove) {\n            outcome = currentPrice >= market.targetPrice ? Outcome.YES : Outcome.NO;\n        } else {\n            outcome = currentPrice < market.targetPrice ? Outcome.YES : Outcome.NO;\n        }\n        \n        proposals[marketId] = Proposal({\n            proposer: msg.sender,\n            proposedOutcome: outcome,\n            proposedPrice: currentPrice,\n            proposalTime: block.timestamp,\n            bond: MIN_PROPOSAL_BOND,\n            challenged: false,\n            challenger: address(0),\n            challengeBond: 0,\n            challengeOutcome: Outcome.UNRESOLVED,\n            challengePrice: 0\n        });\n        \n        market.status = MarketStatus.PENDING_RESOLUTION;\n        \n        emit OutcomeProposed(marketId, msg.sender, outcome, currentPrice, MIN_PROPOSAL_BOND);\n    }\n    \n    function challengeOutcome(uint256 marketId, uint256 correctPrice) external {\n        Market storage market = markets[marketId];\n        Proposal storage proposal = proposals[marketId];\n        \n        require(market.status == MarketStatus.PENDING_RESOLUTION, \"Not pending\");\n        require(block.timestamp < proposal.proposalTime + CHALLENGE_WINDOW, \"Challenge window closed\");\n        require(!proposal.challenged, \"Already challenged\");\n        require(userBalances[msg.sender] >= MIN_CHALLENGE_BOND, \"Insufficient bond\");\n        \n        Outcome newOutcome;\n        if (market.priceAbove) {\n            newOutcome = correctPrice >= market.targetPrice ? Outcome.YES : Outcome.NO;\n        } else {\n            newOutcome = correctPrice < market.targetPrice ? Outcome.YES : Outcome.NO;\n        }\n        \n        require(newOutcome != proposal.proposedOutcome, \"Same outcome\");\n        \n        userBalances[msg.sender] -= MIN_CHALLENGE_BOND;\n        \n        proposal.challenged = true;\n        proposal.challenger = msg.sender;\n        proposal.challengeBond = MIN_CHALLENGE_BOND;\n        proposal.challengeOutcome = newOutcome;\n        proposal.challengePrice = correctPrice;\n        \n        emit OutcomeChallenged(marketId, msg.sender, newOutcome, correctPrice, MIN_CHALLENGE_BOND);\n    }\n    \n    function finalizeResolution(uint256 marketId) external {\n        Market storage market = markets[marketId];\n        Proposal storage proposal = proposals[marketId];\n        \n        require(market.status == MarketStatus.PENDING_RESOLUTION, \"Not pending\");\n        require(block.timestamp >= proposal.proposalTime + CHALLENGE_WINDOW, \"Challenge window open\");\n        \n        if (proposal.challenged) {\n            uint256 totalBonds = proposal.bond + proposal.challengeBond;\n            \n            if (proposal.challengeBond > proposal.bond) {\n                market.status = MarketStatus.RESOLVED;\n                market.outcome = proposal.challengeOutcome;\n                market.resolvedPrice = proposal.challengePrice;\n                market.resolvedAt = block.timestamp;\n                userBalances[proposal.challenger] += totalBonds;\n                emit MarketResolved(marketId, proposal.challengeOutcome, proposal.challengePrice, proposal.challenger, totalBonds);\n            } else {\n                market.status = MarketStatus.RESOLVED;\n                market.outcome = proposal.proposedOutcome;\n                market.resolvedPrice = proposal.proposedPrice;\n                market.resolvedAt = block.timestamp;\n                userBalances[proposal.proposer] += totalBonds;\n                emit MarketResolved(marketId, proposal.proposedOutcome, proposal.proposedPrice, proposal.proposer, totalBonds);\n            }\n        } else {\n            market.status = MarketStatus.RESOLVED;\n            market.outcome = proposal.proposedOutcome;\n            market.resolvedPrice = proposal.proposedPrice;\n            market.resolvedAt = block.timestamp;\n            userBalances[proposal.proposer] += proposal.bond;\n            emit MarketResolved(marketId, proposal.proposedOutcome, proposal.proposedPrice, proposal.proposer, proposal.bond);\n        }\n    }\n    \n    function voidMarket(uint256 marketId) external {\n        Market storage market = markets[marketId];\n        Proposal storage proposal = proposals[marketId];\n        \n        require(market.status == MarketStatus.OPEN || market.status == MarketStatus.PENDING_RESOLUTION, \"Cannot void\");\n        require(block.timestamp > market.deadline + MAX_RESOLUTION_TIMEOUT, \"Timeout not reached\");\n        \n        if (proposal.proposer != address(0)) {\n            userBalances[proposal.proposer] += proposal.bond;\n            if (proposal.challenged) {\n                userBalances[proposal.challenger] += proposal.challengeBond;\n            }\n        }\n        \n        market.status = MarketStatus.VOIDED;\n        emit MarketVoided(marketId);\n    }\n    \n    // ============ CLAIM WINNINGS ============\n    \n    function claimWinnings(uint256 marketId) external {\n        Market storage market = markets[marketId];\n        Position storage pos = positions[marketId][msg.sender];\n        \n        require(market.status == MarketStatus.RESOLVED || market.status == MarketStatus.VOIDED, \"Market not resolved\");\n        require(pos.yesShares > 0 || pos.noShares > 0, \"No position\");\n        \n        uint256 payout = 0;\n        \n        if (market.status == MarketStatus.VOIDED) {\n            uint256 totalShares = pos.yesShares + pos.noShares;\n            payout = totalShares;\n        } else if (market.outcome == Outcome.YES) {\n            payout = pos.yesShares;\n        } else if (market.outcome == Outcome.NO) {\n            payout = pos.noShares;\n        }\n        \n        pos.yesShares = 0;\n        pos.noShares = 0;\n        \n        if (payout > 0) {\n            userBalances[msg.sender] += payout;\n            emit WinningsClaimed(marketId, msg.sender, payout);\n        }\n    }\n    \n    // ============ VIEW FUNCTIONS ============\n    \n    function getMarket(uint256 marketId) external view returns (Market memory) {\n        return markets[marketId];\n    }\n    \n    function getPosition(uint256 marketId, address user) external view returns (Position memory) {\n        return positions[marketId][user];\n    }\n    \n    function getProposal(uint256 marketId) external view returns (Proposal memory) {\n        return proposals[marketId];\n    }\n    \n    function getUserBalance(address user) external view returns (uint256) {\n        return userBalances[user];\n    }\n    \n    function getTreasury() external pure returns (address) {\n        return TREASURY;\n    }\n    \n    function getVersion() external pure returns (string memory) {\n        return \"2.0.0-UUPS\";\n    }\n}\n","path":null,"size_bytes":15754,"size_tokens":null},"scripts/verify-v3.ts":{"content":"import * as fs from \"fs\";\n\nconst V3_IMPL_ADDRESS = \"0xBD96F86eA9081e5C51C69257709DfD9625ebB6E9\";\nconst CHAIN_ID = \"143\";\nconst SOURCIFY_API = \"https://sourcify-api-monad.blockvision.org\";\n\nasync function main() {\n  console.log(\" Verifying V3 Implementation on MonadVision...\\n\");\n  \n  const implSource = fs.readFileSync(\"contracts/PredictionMarketV3UUPS.sol\", \"utf8\");\n  const ierc20Source = fs.readFileSync(\"contracts/interfaces/IERC20.sol\", \"utf8\");\n  \n  const standardInput = {\n    language: \"Solidity\",\n    sources: {\n      \"contracts/PredictionMarketV3UUPS.sol\": { content: implSource },\n      \"contracts/interfaces/IERC20.sol\": { content: ierc20Source }\n    },\n    settings: {\n      optimizer: { enabled: true, runs: 200 },\n      viaIR: true,\n      evmVersion: \"cancun\",\n      outputSelection: {\n        \"*\": { \"*\": [\"abi\", \"evm.bytecode\", \"evm.deployedBytecode\", \"metadata\"] }\n      }\n    }\n  };\n  \n  const requestBody = {\n    address: V3_IMPL_ADDRESS,\n    chain: CHAIN_ID,\n    files: { \"standard-input.json\": JSON.stringify(standardInput) },\n    compilerVersion: \"0.8.28+commit.7893614a\",\n    contractName: \"PredictionMarketV3UUPS\"\n  };\n  \n  console.log(\"Verifying V3 at\", V3_IMPL_ADDRESS);\n  \n  const response = await fetch(`${SOURCIFY_API}/verify/solc-json`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify(requestBody)\n  });\n  \n  const result = await response.json();\n  \n  if (response.ok && result.result?.[0]?.status === \"perfect\") {\n    console.log(\" V3 Implementation verified successfully!\");\n    console.log(`View at: https://monadvision.com/address/${V3_IMPL_ADDRESS}`);\n  } else {\n    console.log(\"Status:\", result.result?.[0]?.status || 'failed');\n    if (result.error) console.log(\"Error:\", result.error);\n  }\n  \n  const checkStatus = await fetch(`${SOURCIFY_API}/check-by-addresses?addresses=${V3_IMPL_ADDRESS}&chainIds=${CHAIN_ID}`);\n  const status = await checkStatus.json();\n  console.log(\"\\nVerification status:\", status[0]?.status || 'unknown');\n}\n\nmain().catch(console.error);\n","path":null,"size_bytes":2064,"size_tokens":null},"scripts/upgrade-to-v3.ts":{"content":"import { ethers } from \"ethers\";\nimport * as fs from \"fs\";\n\nconst PROXY_ADDRESS = \"0x0118B45105e06e9696bF8959ff3115e3F505D44C\";\nconst RPC_URL = \"https://rpc.monad.xyz\";\n\nasync function main() {\n  console.log(\" Upgrading to PredictionMarket V3...\\n\");\n  \n  const privateKey = process.env.DEPLOYER_PRIVATE_KEY;\n  if (!privateKey) {\n    throw new Error(\"DEPLOYER_PRIVATE_KEY not set\");\n  }\n  \n  const provider = new ethers.JsonRpcProvider(RPC_URL);\n  const wallet = new ethers.Wallet(privateKey, provider);\n  \n  console.log(\"Deployer:\", wallet.address);\n  \n  const balance = await provider.getBalance(wallet.address);\n  console.log(\"Balance:\", ethers.formatEther(balance), \"MON\\n\");\n  \n  const compiled = JSON.parse(fs.readFileSync(\"compiled_v3.json\", \"utf8\"));\n  \n  const implContract = compiled.contracts[\"contracts/PredictionMarketV3UUPS.sol:PredictionMarketV3UUPS\"];\n  const implAbi = typeof implContract.abi === 'string' ? JSON.parse(implContract.abi) : implContract.abi;\n  const implBytecode = implContract.bin.startsWith(\"0x\") ? implContract.bin : \"0x\" + implContract.bin;\n  \n  console.log(\"1 Deploying V3 Implementation...\");\n  const ImplFactory = new ethers.ContractFactory(implAbi, implBytecode, wallet);\n  const implementation = await ImplFactory.deploy();\n  await implementation.waitForDeployment();\n  const implAddress = await implementation.getAddress();\n  console.log(\"   V3 Implementation:\", implAddress);\n  \n  console.log(\"\\n2 Upgrading Proxy to V3...\");\n  const proxyAbi = [\n    \"function upgradeTo(address newImplementation)\",\n    \"function getVersion() view returns (string)\",\n    \"function getImplementation() view returns (address)\",\n    \"function owner() view returns (address)\"\n  ];\n  \n  const proxy = new ethers.Contract(PROXY_ADDRESS, proxyAbi, wallet);\n  \n  const currentOwner = await proxy.owner();\n  console.log(\"   Current owner:\", currentOwner);\n  console.log(\"   Wallet address:\", wallet.address);\n  \n  if (currentOwner.toLowerCase() !== wallet.address.toLowerCase()) {\n    throw new Error(\"Not the owner of the proxy\");\n  }\n  \n  const tx = await proxy.upgradeTo(implAddress);\n  await tx.wait();\n  console.log(\"   Upgrade tx:\", tx.hash);\n  \n  console.log(\"\\n3 Verifying...\");\n  const market = new ethers.Contract(PROXY_ADDRESS, implAbi, wallet);\n  const version = await market.getVersion();\n  const storedImpl = await market.getImplementation();\n  \n  console.log(\"   Version:\", version);\n  console.log(\"   Stored Implementation:\", storedImpl);\n  \n  console.log(\"\\n UPGRADE TO V3 SUCCESSFUL!\");\n  console.log(\"=====================================\");\n  console.log(\"Proxy Address (unchanged):\", PROXY_ADDRESS);\n  console.log(\"New Implementation:\", implAddress);\n  console.log(\"Version:\", version);\n  console.log(\"=====================================\");\n  console.log(\"\\nV3 Fixes:\");\n  console.log(\"- FIXED: AMM CPMM logic now correct\");\n  console.log(\"- FIXED: Platform fee deducted before AMM calculation\");\n  console.log(\"- Shares calculated correctly from pool changes\");\n  \n  const deploymentInfo = JSON.parse(fs.readFileSync(\"deployment-uups.json\", \"utf8\"));\n  deploymentInfo.v3ImplementationAddress = implAddress;\n  deploymentInfo.currentVersion = \"3.0.0-UUPS\";\n  deploymentInfo.upgradedAt = new Date().toISOString();\n  \n  fs.writeFileSync(\"deployment-uups.json\", JSON.stringify(deploymentInfo, null, 2));\n  console.log(\"\\n Deployment info updated\");\n}\n\nmain().catch(console.error);\n","path":null,"size_bytes":3447,"size_tokens":null},"contracts/PredictionMarketV3UUPS.sol":{"content":"// SPDX-License-Identifier: MIT\npragma solidity ^0.8.20;\n\nimport \"./interfaces/IERC20.sol\";\n\ncontract PredictionMarketV3UUPS {\n    bytes32 private constant IMPLEMENTATION_SLOT = bytes32(uint256(keccak256(\"eip1967.proxy.implementation\")) - 1);\n    \n    IERC20 public usdc;\n    address public owner;\n    uint8 private _initialized;\n    \n    uint256 public constant PLATFORM_FEE_BPS = 200; // 2% platform fee\n    uint256 public constant BPS_DENOMINATOR = 10000;\n    uint256 public constant CHALLENGE_WINDOW = 24 hours;\n    uint256 public constant MAX_RESOLUTION_TIMEOUT = 7 days;\n    uint256 public constant MIN_PROPOSAL_BOND = 5 * 1e6; // 5 USDC\n    uint256 public constant MIN_CHALLENGE_BOND = 10 * 1e6; // 10 USDC\n    \n    address public constant TREASURY = 0xE9059B5f1C60ecf9C1F07ac2bBa148A75394f56e;\n    \n    enum MarketStatus { OPEN, PENDING_RESOLUTION, RESOLVED, VOIDED }\n    enum Outcome { UNRESOLVED, YES, NO }\n    enum Category { CRYPTO }\n    \n    struct Market {\n        uint256 id;\n        address creator;\n        string question;\n        Category category;\n        uint256 deadline;\n        MarketStatus status;\n        Outcome outcome;\n        uint256 yesPool;\n        uint256 noPool;\n        uint256 totalVolume;\n        string targetAsset;\n        uint256 targetPrice;\n        bool priceAbove;\n        uint256 resolvedPrice;\n        uint256 resolvedAt;\n    }\n    \n    struct Position {\n        uint256 yesShares;\n        uint256 noShares;\n    }\n    \n    struct Proposal {\n        address proposer;\n        Outcome proposedOutcome;\n        uint256 proposedPrice;\n        uint256 proposalTime;\n        uint256 bond;\n        bool challenged;\n        address challenger;\n        uint256 challengeBond;\n        Outcome challengeOutcome;\n        uint256 challengePrice;\n    }\n    \n    uint256 public nextMarketId;\n    mapping(uint256 => Market) public markets;\n    mapping(uint256 => mapping(address => Position)) public positions;\n    mapping(uint256 => Proposal) public proposals;\n    mapping(address => uint256) public userBalances;\n    \n    event MarketCreated(uint256 indexed marketId, address indexed creator, string question, uint256 deadline, string targetAsset, uint256 targetPrice, bool priceAbove);\n    event SharesPurchased(uint256 indexed marketId, address indexed user, bool isYes, uint256 amount, uint256 shares, uint256 price);\n    event OutcomeProposed(uint256 indexed marketId, address indexed proposer, Outcome outcome, uint256 price, uint256 bond);\n    event OutcomeChallenged(uint256 indexed marketId, address indexed challenger, Outcome outcome, uint256 price, uint256 bond);\n    event MarketResolved(uint256 indexed marketId, Outcome outcome, uint256 resolvedPrice, address winner, uint256 reward);\n    event MarketVoided(uint256 indexed marketId);\n    event WinningsClaimed(uint256 indexed marketId, address indexed user, uint256 amount);\n    event Deposited(address indexed user, uint256 amount);\n    event Withdrawn(address indexed user, uint256 amount);\n    event OwnershipTransferred(address indexed previousOwner, address indexed newOwner);\n    event PlatformFeeCollected(uint256 indexed marketId, uint256 amount);\n    event Upgraded(address indexed implementation);\n    \n    modifier onlyOwner() {\n        require(msg.sender == owner, \"Not owner\");\n        _;\n    }\n    \n    modifier initializer() {\n        require(_initialized == 0, \"Already initialized\");\n        _initialized = 1;\n        _;\n    }\n    \n    constructor() {\n        _initialized = type(uint8).max;\n    }\n    \n    function initialize(address _usdc, address _owner) public initializer {\n        usdc = IERC20(_usdc);\n        owner = _owner;\n        nextMarketId = 1;\n    }\n    \n    function upgradeTo(address newImplementation) external onlyOwner {\n        require(newImplementation != address(0), \"Invalid implementation\");\n        bytes32 slot = IMPLEMENTATION_SLOT;\n        assembly {\n            sstore(slot, newImplementation)\n        }\n        emit Upgraded(newImplementation);\n    }\n    \n    function getImplementation() external view returns (address impl) {\n        bytes32 slot = IMPLEMENTATION_SLOT;\n        assembly {\n            impl := sload(slot)\n        }\n    }\n    \n    function transferOwnership(address newOwner) external onlyOwner {\n        require(newOwner != address(0), \"Invalid owner\");\n        emit OwnershipTransferred(owner, newOwner);\n        owner = newOwner;\n    }\n    \n    // ============ DEPOSIT/WITHDRAW ============\n    \n    function deposit(uint256 amount) external {\n        require(amount > 0, \"Amount must be > 0\");\n        require(usdc.transferFrom(msg.sender, address(this), amount), \"Transfer failed\");\n        userBalances[msg.sender] += amount;\n        emit Deposited(msg.sender, amount);\n    }\n    \n    function withdraw(uint256 amount) external {\n        require(amount > 0, \"Amount must be > 0\");\n        require(userBalances[msg.sender] >= amount, \"Insufficient balance\");\n        userBalances[msg.sender] -= amount;\n        require(usdc.transfer(msg.sender, amount), \"Transfer failed\");\n        emit Withdrawn(msg.sender, amount);\n    }\n    \n    // ============ MARKET CREATION ============\n    \n    function createMarket(\n        string calldata question,\n        uint256 deadline,\n        string calldata targetAsset,\n        uint256 targetPrice,\n        bool priceAbove\n    ) external returns (uint256) {\n        require(deadline > block.timestamp + 1 hours, \"Deadline too soon\");\n        require(bytes(question).length > 0, \"Question required\");\n        require(bytes(targetAsset).length > 0, \"Target asset required\");\n        require(targetPrice > 0, \"Target price required\");\n        \n        uint256 marketId = nextMarketId++;\n        \n        markets[marketId] = Market({\n            id: marketId,\n            creator: msg.sender,\n            question: question,\n            category: Category.CRYPTO,\n            deadline: deadline,\n            status: MarketStatus.OPEN,\n            outcome: Outcome.UNRESOLVED,\n            yesPool: 1000 * 1e6,\n            noPool: 1000 * 1e6,\n            totalVolume: 0,\n            targetAsset: targetAsset,\n            targetPrice: targetPrice,\n            priceAbove: priceAbove,\n            resolvedPrice: 0,\n            resolvedAt: 0\n        });\n        \n        emit MarketCreated(marketId, msg.sender, question, deadline, targetAsset, targetPrice, priceAbove);\n        return marketId;\n    }\n    \n    // ============ TRADING (AMM) - FIXED CPMM ============\n    \n    function getPrice(uint256 marketId, bool isYes) public view returns (uint256) {\n        Market storage market = markets[marketId];\n        uint256 total = market.yesPool + market.noPool;\n        if (total == 0) return 5000;\n        \n        if (isYes) {\n            return (market.noPool * 10000) / total;\n        } else {\n            return (market.yesPool * 10000) / total;\n        }\n    }\n    \n    function buyShares(uint256 marketId, bool isYes, uint256 amount) external {\n        Market storage market = markets[marketId];\n        require(market.status == MarketStatus.OPEN, \"Market not open\");\n        require(block.timestamp < market.deadline, \"Market expired\");\n        require(amount > 0, \"Amount must be > 0\");\n        require(userBalances[msg.sender] >= amount, \"Insufficient balance\");\n        \n        // Deduct platform fee first\n        uint256 platformFee = (amount * PLATFORM_FEE_BPS) / BPS_DENOMINATOR;\n        uint256 amountAfterFee = amount - platformFee;\n        \n        uint256 shares;\n        uint256 price = getPrice(marketId, isYes);\n        \n        // FIXED CPMM: k = yesPool * noPool (constant product)\n        // When buying YES: Add to noPool (payment), calculate shares from yesPool decrease\n        // When buying NO: Add to yesPool (payment), calculate shares from noPool decrease\n        uint256 k = market.yesPool * market.noPool;\n        \n        if (isYes) {\n            // User pays into noPool, receives yesShares\n            uint256 newNoPool = market.noPool + amountAfterFee;\n            uint256 newYesPool = k / newNoPool;\n            shares = market.yesPool - newYesPool;\n            market.yesPool = newYesPool;\n            market.noPool = newNoPool;\n        } else {\n            // User pays into yesPool, receives noShares\n            uint256 newYesPool = market.yesPool + amountAfterFee;\n            uint256 newNoPool = k / newYesPool;\n            shares = market.noPool - newNoPool;\n            market.noPool = newNoPool;\n            market.yesPool = newYesPool;\n        }\n        \n        require(shares > 0, \"No shares to buy\");\n        \n        userBalances[msg.sender] -= amount;\n        userBalances[TREASURY] += platformFee;\n        \n        Position storage pos = positions[marketId][msg.sender];\n        if (isYes) {\n            pos.yesShares += shares;\n        } else {\n            pos.noShares += shares;\n        }\n        \n        market.totalVolume += amount;\n        \n        emit PlatformFeeCollected(marketId, platformFee);\n        emit SharesPurchased(marketId, msg.sender, isYes, amount, shares, price);\n    }\n    \n    // ============ PERMISSIONLESS RESOLUTION ============\n    \n    function proposeOutcome(uint256 marketId, uint256 currentPrice) external {\n        Market storage market = markets[marketId];\n        require(market.status == MarketStatus.OPEN, \"Market not open\");\n        require(block.timestamp >= market.deadline, \"Market not expired\");\n        require(userBalances[msg.sender] >= MIN_PROPOSAL_BOND, \"Insufficient bond\");\n        \n        Proposal storage existing = proposals[marketId];\n        require(existing.proposer == address(0), \"Already proposed\");\n        \n        userBalances[msg.sender] -= MIN_PROPOSAL_BOND;\n        \n        Outcome outcome;\n        if (market.priceAbove) {\n            outcome = currentPrice >= market.targetPrice ? Outcome.YES : Outcome.NO;\n        } else {\n            outcome = currentPrice < market.targetPrice ? Outcome.YES : Outcome.NO;\n        }\n        \n        proposals[marketId] = Proposal({\n            proposer: msg.sender,\n            proposedOutcome: outcome,\n            proposedPrice: currentPrice,\n            proposalTime: block.timestamp,\n            bond: MIN_PROPOSAL_BOND,\n            challenged: false,\n            challenger: address(0),\n            challengeBond: 0,\n            challengeOutcome: Outcome.UNRESOLVED,\n            challengePrice: 0\n        });\n        \n        market.status = MarketStatus.PENDING_RESOLUTION;\n        \n        emit OutcomeProposed(marketId, msg.sender, outcome, currentPrice, MIN_PROPOSAL_BOND);\n    }\n    \n    function challengeOutcome(uint256 marketId, uint256 correctPrice) external {\n        Market storage market = markets[marketId];\n        Proposal storage proposal = proposals[marketId];\n        \n        require(market.status == MarketStatus.PENDING_RESOLUTION, \"Not pending\");\n        require(block.timestamp < proposal.proposalTime + CHALLENGE_WINDOW, \"Challenge window closed\");\n        require(!proposal.challenged, \"Already challenged\");\n        require(userBalances[msg.sender] >= MIN_CHALLENGE_BOND, \"Insufficient bond\");\n        \n        Outcome newOutcome;\n        if (market.priceAbove) {\n            newOutcome = correctPrice >= market.targetPrice ? Outcome.YES : Outcome.NO;\n        } else {\n            newOutcome = correctPrice < market.targetPrice ? Outcome.YES : Outcome.NO;\n        }\n        \n        require(newOutcome != proposal.proposedOutcome, \"Same outcome\");\n        \n        userBalances[msg.sender] -= MIN_CHALLENGE_BOND;\n        \n        proposal.challenged = true;\n        proposal.challenger = msg.sender;\n        proposal.challengeBond = MIN_CHALLENGE_BOND;\n        proposal.challengeOutcome = newOutcome;\n        proposal.challengePrice = correctPrice;\n        \n        emit OutcomeChallenged(marketId, msg.sender, newOutcome, correctPrice, MIN_CHALLENGE_BOND);\n    }\n    \n    function finalizeResolution(uint256 marketId) external {\n        Market storage market = markets[marketId];\n        Proposal storage proposal = proposals[marketId];\n        \n        require(market.status == MarketStatus.PENDING_RESOLUTION, \"Not pending\");\n        require(block.timestamp >= proposal.proposalTime + CHALLENGE_WINDOW, \"Challenge window open\");\n        \n        if (proposal.challenged) {\n            uint256 totalBonds = proposal.bond + proposal.challengeBond;\n            \n            if (proposal.challengeBond > proposal.bond) {\n                market.status = MarketStatus.RESOLVED;\n                market.outcome = proposal.challengeOutcome;\n                market.resolvedPrice = proposal.challengePrice;\n                market.resolvedAt = block.timestamp;\n                userBalances[proposal.challenger] += totalBonds;\n                emit MarketResolved(marketId, proposal.challengeOutcome, proposal.challengePrice, proposal.challenger, totalBonds);\n            } else {\n                market.status = MarketStatus.RESOLVED;\n                market.outcome = proposal.proposedOutcome;\n                market.resolvedPrice = proposal.proposedPrice;\n                market.resolvedAt = block.timestamp;\n                userBalances[proposal.proposer] += totalBonds;\n                emit MarketResolved(marketId, proposal.proposedOutcome, proposal.proposedPrice, proposal.proposer, totalBonds);\n            }\n        } else {\n            market.status = MarketStatus.RESOLVED;\n            market.outcome = proposal.proposedOutcome;\n            market.resolvedPrice = proposal.proposedPrice;\n            market.resolvedAt = block.timestamp;\n            userBalances[proposal.proposer] += proposal.bond;\n            emit MarketResolved(marketId, proposal.proposedOutcome, proposal.proposedPrice, proposal.proposer, proposal.bond);\n        }\n    }\n    \n    function voidMarket(uint256 marketId) external {\n        Market storage market = markets[marketId];\n        Proposal storage proposal = proposals[marketId];\n        \n        require(market.status == MarketStatus.OPEN || market.status == MarketStatus.PENDING_RESOLUTION, \"Cannot void\");\n        require(block.timestamp > market.deadline + MAX_RESOLUTION_TIMEOUT, \"Timeout not reached\");\n        \n        if (proposal.proposer != address(0)) {\n            userBalances[proposal.proposer] += proposal.bond;\n            if (proposal.challenged) {\n                userBalances[proposal.challenger] += proposal.challengeBond;\n            }\n        }\n        \n        market.status = MarketStatus.VOIDED;\n        emit MarketVoided(marketId);\n    }\n    \n    // ============ CLAIM WINNINGS ============\n    \n    function claimWinnings(uint256 marketId) external {\n        Market storage market = markets[marketId];\n        Position storage pos = positions[marketId][msg.sender];\n        \n        require(market.status == MarketStatus.RESOLVED || market.status == MarketStatus.VOIDED, \"Market not resolved\");\n        require(pos.yesShares > 0 || pos.noShares > 0, \"No position\");\n        \n        uint256 payout = 0;\n        \n        if (market.status == MarketStatus.VOIDED) {\n            uint256 totalShares = pos.yesShares + pos.noShares;\n            payout = totalShares;\n        } else if (market.outcome == Outcome.YES) {\n            payout = pos.yesShares;\n        } else if (market.outcome == Outcome.NO) {\n            payout = pos.noShares;\n        }\n        \n        pos.yesShares = 0;\n        pos.noShares = 0;\n        \n        if (payout > 0) {\n            userBalances[msg.sender] += payout;\n            emit WinningsClaimed(marketId, msg.sender, payout);\n        }\n    }\n    \n    // ============ VIEW FUNCTIONS ============\n    \n    function getMarket(uint256 marketId) external view returns (Market memory) {\n        return markets[marketId];\n    }\n    \n    function getPosition(uint256 marketId, address user) external view returns (Position memory) {\n        return positions[marketId][user];\n    }\n    \n    function getProposal(uint256 marketId) external view returns (Proposal memory) {\n        return proposals[marketId];\n    }\n    \n    function getUserBalance(address user) external view returns (uint256) {\n        return userBalances[user];\n    }\n    \n    function getTreasury() external pure returns (address) {\n        return TREASURY;\n    }\n    \n    function getVersion() external pure returns (string memory) {\n        return \"3.0.0-UUPS\";\n    }\n}\n","path":null,"size_bytes":16304,"size_tokens":null},"client/src/types/global.d.ts":{"content":"interface Window {\n  ethereum?: {\n    request: (args: { method: string; params?: any[] }) => Promise<any>;\n    isMetaMask?: boolean;\n    on?: (event: string, callback: (...args: any[]) => void) => void;\n    removeListener?: (event: string, callback: (...args: any[]) => void) => void;\n  };\n}\n","path":null,"size_bytes":292,"size_tokens":null}},"version":2}